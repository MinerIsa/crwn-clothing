/*! For license information please see main.d0d557f1.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},391:function(e,t,n){"use strict";t.__esModule=!0;var r=n(791),i=(o(r),o(n(7))),a=o(n(566));o(n(255));function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=1073741823;function f(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}t.default=function(e,t){var n,o,h="__create-react-context-"+(0,a.default)()+"__",d=function(e){function n(){var t,r;u(this,n);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=r=s(this,e.call.apply(e,[this].concat(a))),r.emitter=f(r.props.value),s(r,t)}return c(n,e),n.prototype.getChildContext=function(){var e;return(e={})[h]=this.emitter,e},n.prototype.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n=this.props.value,r=e.value,i=void 0;((a=n)===(o=r)?0!==a||1/a===1/o:a!==a&&o!==o)?i=0:(i="function"===typeof t?t(n,r):l,0!==(i|=0)&&this.emitter.set(e.value,i))}var a,o},n.prototype.render=function(){return this.props.children},n}(r.Component);d.childContextTypes=((n={})[h]=i.default.object.isRequired,n);var p=function(t){function n(){var e,r;u(this,n);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=r=s(this,t.call.apply(t,[this].concat(a))),r.state={value:r.getValue()},r.onUpdate=function(e,t){0!==((0|r.observedBits)&t)&&r.setState({value:r.getValue()})},s(r,e)}return c(n,t),n.prototype.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?l:t},n.prototype.componentDidMount=function(){this.context[h]&&this.context[h].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?l:e},n.prototype.componentWillUnmount=function(){this.context[h]&&this.context[h].off(this.onUpdate)},n.prototype.getValue=function(){return this.context[h]?this.context[h].get():e},n.prototype.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(r.Component);return p.contextTypes=((o={})[h]=i.default.object,o),{Provider:d,Consumer:p}},e.exports=t.default},589:function(e,t,n){"use strict";t.__esModule=!0;var r=a(n(791)),i=a(n(391));function a(e){return e&&e.__esModule?e:{default:e}}t.default=r.default.createContext||i.default,e.exports=t.default},394:function(e){"use strict";function t(e){return function(){return e}}var n=function(){};n.thatReturns=t,n.thatReturnsFalse=t(!1),n.thatReturnsTrue=t(!0),n.thatReturnsNull=t(null),n.thatReturnsThis=function(){return this},n.thatReturnsArgument=function(e){return e},e.exports=n},255:function(e,t,n){"use strict";var r=n(394);e.exports=r},566:function(e,t,n){"use strict";var r="__global_unique_id__";e.exports=function(){return n.g[r]=(n.g[r]||0)+1}},110:function(e,t,n){"use strict";var r=n(441),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,u,s=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(s[l]=o[l]);if(t){u=t(o);for(var f=0;f<u.length;f++)r.call(o,u[f])&&(s[u[f]]=o[u[f]])}}return s}},151:function(e,t,n){var r=n(878);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return u(a(e,t),t)},e.exports.tokensToFunction=u,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,u="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var f=n[0],h=n[1],d=n.index;if(u+=e.slice(o,d),o=d+f.length,h)u+=h[1];else{var p=e[o],v=n[2],y=n[3],m=n[4],g=n[5],k=n[6],w=n[7];u&&(r.push(u),u="");var b=null!=v&&null!=p&&p!==v,x="+"===k||"*"===k,_="?"===k||"*"===k,I=n[2]||l,E=m||g;r.push({name:y||a++,prefix:v||"",delimiter:I,optional:_,repeat:x,partial:b,asterisk:!!w,pattern:E?c(E):w?".*":"[^"+s(I)+"]+?"})}}return o<e.length&&(u+=e.substr(o)),u&&r.push(u),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function u(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",f(t)));return function(t,i){for(var a="",u=t||{},s=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var f,h=u[l.name];if(null==h){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(f=s(h[d]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(0===d?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):s(h),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');a+=l.prefix+f}}else a+=l}return a}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",u=0;u<e.length;u++){var c=e[u];if("string"===typeof c)o+=s(c);else{var h=s(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+h+d+")*"),o+=d=c.optional?c.partial?h+"("+d+")?":"(?:"+h+"("+d+"))?":h+"("+d+")"}}var p=s(n.delimiter||"/"),v=o.slice(-p.length)===p;return i||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":i&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,f(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return h(a(e,n),t,n)}(e,t,n)}},878:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var u=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)u.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function y(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,_=60106,I=60107,E=60108,T=60114,S=60109,C=60110,N=60112,A=60113,O=60120,P=60115,R=60116,D=60121,L=60128,M=60129,U=60130,F=60131;if("function"===typeof Symbol&&Symbol.for){var V=Symbol.for;x=V("react.element"),_=V("react.portal"),I=V("react.fragment"),E=V("react.strict_mode"),T=V("react.profiler"),S=V("react.provider"),C=V("react.context"),N=V("react.forward_ref"),A=V("react.suspense"),O=V("react.suspense_list"),P=V("react.memo"),R=V("react.lazy"),D=V("react.block"),V("react.scope"),L=V("react.opaque.id"),M=V("react.debug_trace_mode"),U=V("react.offscreen"),F=V("react.legacy_hidden")}var j,q="function"===typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=q&&e[q]||e["@@iterator"])?e:null}function z(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var K=!1;function W(e,t){if(!e||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var r=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){r=s}e.call(t.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"===typeof s.stack){for(var i=s.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=u);break}}}finally{K=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function G(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 22:return e=W(e.type._render,!1);case 1:return e=W(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case _:return"Portal";case T:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case O:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case P:return H(e.type);case D:return H(e._render);case R:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ue(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,ye,me=(ye=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ye(e,t)}))}:ye);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function xe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var _e=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(e,t){if(t){if(_e[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,Ne=null;function Ae(e){if(e=ri(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Se(e.stateNode,e.type,t))}}function Oe(e){Ce?Ne?Ne.push(e):Ne=[e]:Ce=e}function Pe(){if(Ce){var e=Ce,t=Ne;if(Ne=Ce=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Re(e,t){return e(t)}function De(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var Me=Re,Ue=!1,Fe=!1;function Ve(){null===Ce&&null===Ne||(Le(),Pe())}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var qe=!1;if(f)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){qe=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch(ye){qe=!1}function ze(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Ke=!1,We=null,Ge=!1,He=null,Qe={onError:function(e){Ke=!0,We=e}};function Ye(e,t,n,r,i,a,o,u,s){Ke=!1,We=null,ze.apply(Qe,arguments)}function $e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Xe(e){if($e(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Xe(i),e;if(a===r)return Xe(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],ut=null,st=null,ct=null,lt=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":ut=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function yt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=ni(e.target);if(null!==t){var n=$e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Je(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function wt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==ut&&gt(ut)&&(ut=null),null!==st&&gt(st)&&(st=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ft.forEach(kt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,wt)))}function xt(e){function t(t){return bt(t,e)}if(0<ot.length){bt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ut&&bt(ut,e),null!==st&&bt(st,e),null!==ct&&bt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)mt(n),null===n.blockedOn&&ht.shift()}function _t(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var It={animationend:_t("Animation","AnimationEnd"),animationiteration:_t("Animation","AnimationIteration"),animationstart:_t("Animation","AnimationStart"),transitionend:_t("Transition","TransitionEnd")},Et={},Tt={};function St(e){if(Et[e])return Et[e];if(!It[e])return e;var t,n=It[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return Et[e]=n[t];return e}f&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete It.animationend.animation,delete It.animationiteration.animation,delete It.animationstart.animation),"TransitionEvent"in window||delete It.transitionend.transition);var Ct=St("animationend"),Nt=St("animationiteration"),At=St("animationstart"),Ot=St("transitionend"),Pt=new Map,Rt=new Map,Dt=["abort","abort",Ct,"animationEnd",Nt,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ot,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Rt.set(r,t),Pt.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Mt=8;function Ut(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==a)r=a,i=Mt=15;else if(0!==(a=134217727&n)){var s=a&~o;0!==s?(r=Ut(s),i=Mt):0!==(u&=a)&&(r=Ut(u),i=Mt)}else 0!==(a=n&~o)?(r=Ut(a),i=Mt):0!==u&&(r=Ut(u),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Kt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ut(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Kt(t)),r|=e[n],t&=~i;return r}function Vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function jt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=qt(24&~t))?jt(10,t):e;case 10:return 0===(e=qt(192&~t))?jt(8,t):e;case 8:return 0===(e=qt(3584&~t))&&(0===(e=qt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=qt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function qt(e){return e&-e}function Bt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Kt(t)]=n}var Kt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Wt(e)/Gt|0)|0},Wt=Math.log,Gt=Math.LN2;var Ht=a.unstable_UserBlockingPriority,Qt=a.unstable_runWithPriority,Yt=!0;function $t(e,t,n,r){Ue||Le();var i=Xt,a=Ue;Ue=!0;try{De(i,e,t,n,r)}finally{(Ue=a)||Ve()}}function Jt(e,t,n,r){Qt(Ht,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){var i;if(Yt)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ut=yt(ut,e,t,n,r,i),!0;case"dragenter":return st=yt(st,e,t,n,r,i),!0;case"mouseover":return ct=yt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,yt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,yt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Te(r);if(null!==(i=ni(i))){var a=$e(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Je(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function un(){return!1}function sn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:un,this.isPropagationStopped=un,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(hn),pn=i({},hn,{view:0,detail:0}),vn=sn(pn),yn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=sn(yn),gn=sn(i({},yn,{dataTransfer:0})),kn=sn(i({},pn,{relatedTarget:0})),wn=sn(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(bn),_n=sn(i({},hn,{data:0})),In={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function Cn(){return Sn}var Nn=i({},pn,{key:function(e){if(e.key){var t=In[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=sn(Nn),On=sn(i({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=sn(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Rn=sn(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=i({},yn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=sn(Dn),Mn=[9,13,27,32],Un=f&&"CompositionEvent"in window,Fn=null;f&&"documentMode"in document&&(Fn=document.documentMode);var Vn=f&&"TextEvent"in window&&!Fn,jn=f&&(!Un||Fn&&8<Fn&&11>=Fn),qn=String.fromCharCode(32),Bn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Qn(e,t,n,r){Oe(r),0<(t=Ur(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,$n=null;function Jn(e){Nr(e,0)}function Xn(e){if(J(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Yn&&(Yn.detachEvent("onpropertychange",ar),$n=Yn=null)}function ar(e){if("value"===e.propertyName&&Xn($n)){var t=[];if(Qn(t,$n,e,Te(e)),e=Jn,Ue)e(t);else{Ue=!0;try{Re(e,t)}finally{Ue=!1,Ve()}}}}function or(e,t,n){"focusin"===e?(ir(),$n=n,(Yn=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function ur(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn($n)}function sr(e,t){if("click"===e)return Xn(t)}function cr(e,t){if("input"===e||"change"===e)return Xn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function yr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,kr=null,wr=null,br=null,xr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==kr||kr!==X(r)||("selectionStart"in(r=kr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&hr(br,r)||(br=r,0<(r=Ur(wr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Dt,2);for(var Ir="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<Ir.length;Er++)Rt.set(Ir[Er],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,u,s,c){if(Ye.apply(this,arguments),Ke){if(!Ke)throw Error(o(198));var l=We;Ke=!1,We=null,Ge||(Ge=!0,He=l)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}}}if(Ge)throw e=He,Ge=!1,He=null,e}function Ar(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Dr(t,e,2,!1),n.add(r))}var Or="_reactListening"+Math.random().toString(36).slice(2);function Pr(e){e[Or]||(e[Or]=!0,u.forEach((function(t){Sr.has(t)||Rr(t,!1,e,null),Rr(t,!0,e,null)})))}function Rr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(i|=4),Dr(a,e,i,t),o.add(u))}function Dr(e,t,n,r){var i=Rt.get(t);switch(void 0===i?2:i){case 0:i=$t;break;case 1:i=Jt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!qe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=ni(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}!function(e,t,n){if(Fe)return e(t,n);Fe=!0;try{Me(e,t,n)}finally{Fe=!1,Ve()}}((function(){var r=a,i=Te(n),o=[];e:{var u=Pt.get(e);if(void 0!==u){var s=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":s=An;break;case"focusin":c="focus",s=kn;break;case"focusout":c="blur",s=kn;break;case"beforeblur":case"afterblur":s=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Pn;break;case Ct:case Nt:case At:s=wn;break;case Ot:s=Rn;break;case"scroll":s=vn;break;case"wheel":s=Ln;break;case"copy":case"cut":case"paste":s=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=On}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=je(p,h))&&l.push(Mr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=$e(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=mn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=On,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:ii(s),d=null==c?u:ii(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,ni(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Fr(d))p++;for(d=0,v=h;v;v=Fr(v))d++;for(;0<p-d;)l=Fr(l),p--;for(;0<d-p;)h=Fr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Fr(l),h=Fr(h)}l=null}else l=null;null!==s&&Vr(o,u,s,l,!1),null!==c&&null!==f&&Vr(o,f,c,l,!0)}if("select"===(s=(u=r?ii(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Zn;else if(Hn(u))if(er)y=cr;else{y=ur;var m=or}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=sr);switch(y&&(y=y(e,r))?Qn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ie(u,"number",u.value)),m=r?ii(r):window,e){case"focusin":(Hn(m)||"true"===m.contentEditable)&&(kr=m,wr=r,br=null);break;case"focusout":br=wr=kr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,_r(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":_r(o,n,i)}var g;if(Un)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Wn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(jn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Wn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Wn=!0)),0<(m=Ur(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Kn(n))&&(k.data=g))),(g=Vn?function(e,t){switch(e){case"compositionend":return Kn(t);case"keypress":return 32!==t.which?null:(Bn=!0,qn);case"textInput":return(e=t.data)===qn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Un&&zn(e,t)?(e=rn(),nn=tn=en=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Ur(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Nr(o,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ur(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=je(e,n))&&r.unshift(Mr(e,a,i)),null!=(a=je(e,t))&&r.push(Mr(e,a,i))),e=e.return}return r}function Fr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Vr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=je(n,a))&&o.unshift(Mr(n,s,u)):i||null!=(s=je(n,a))&&o.push(Mr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function jr(){}var qr=null,Br=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Kr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Wr="function"===typeof setTimeout?setTimeout:void 0,Gr="function"===typeof clearTimeout?clearTimeout:void 0;function Hr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var $r=0;var Jr=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Jr,Zr="__reactProps$"+Jr,ei="__reactContainer$"+Jr,ti="__reactEvents$"+Jr;function ni(e){var t=e[Xr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Xr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Yr(e);null!==e;){if(n=e[Xr])return n;e=Yr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Xr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var ui=[],si=-1;function ci(e){return{current:e}}function li(e){0>si||(e.current=ui[si],ui[si]=null,si--)}function fi(e,t){si++,ui[si]=e.current,e.current=t}var hi={},di=ci(hi),pi=ci(!1),vi=hi;function yi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==hi)throw Error(o(168));fi(di,t),fi(pi,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,H(t)||"Unknown",a));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,vi=di.current,fi(di,e),fi(pi,pi.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=wi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),fi(di,e)):li(pi),fi(pi,n)}var _i=null,Ii=null,Ei=a.unstable_runWithPriority,Ti=a.unstable_scheduleCallback,Si=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ni=a.unstable_requestPaint,Ai=a.unstable_now,Oi=a.unstable_getCurrentPriorityLevel,Pi=a.unstable_ImmediatePriority,Ri=a.unstable_UserBlockingPriority,Di=a.unstable_NormalPriority,Li=a.unstable_LowPriority,Mi=a.unstable_IdlePriority,Ui={},Fi=void 0!==Ni?Ni:function(){},Vi=null,ji=null,qi=!1,Bi=Ai(),zi=1e4>Bi?Ai:function(){return Ai()-Bi};function Ki(){switch(Oi()){case Pi:return 99;case Ri:return 98;case Di:return 97;case Li:return 96;case Mi:return 95;default:throw Error(o(332))}}function Wi(e){switch(e){case 99:return Pi;case 98:return Ri;case 97:return Di;case 96:return Li;case 95:return Mi;default:throw Error(o(332))}}function Gi(e,t){return e=Wi(e),Ei(e,t)}function Hi(e,t,n){return e=Wi(e),Ti(e,t,n)}function Qi(){if(null!==ji){var e=ji;ji=null,Si(e)}Yi()}function Yi(){if(!qi&&null!==Vi){qi=!0;var e=0;try{var t=Vi;Gi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Vi=null}catch(n){throw null!==Vi&&(Vi=Vi.slice(e+1)),Ti(Pi,Qi),n}finally{qi=!1}}}var $i=b.ReactCurrentBatchConfig;function Ji(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Xi=ci(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=Xi.current;li(Xi),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Uo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(o(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var ua=!1;function sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;ua=!1;var o=a.firstBaseUpdate,u=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var c=s,l=c.next;c.next=null,null===u?o=l:u.next=l,u=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==u&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,u=0,f=l=c=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(s=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,s);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(s="function"===typeof(p=v.payload)?p.call(d,h,s):p)||void 0===s)break e;h=i({},h,s);break e;case 2:ua=!0}}null!==o.callback&&(e.flags|=32,null===(s=a.effects)?a.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,u|=s;if(null===(o=o.next)){if(null===(s=a.shared.pending))break;o=s.next,s.next=null,a.lastBaseUpdate=s,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,qu|=u,e.lanes=u,e.memoizedState=h}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ya(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ma={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hs(),r=ds(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),ps(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ka(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=mi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?yi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function ba(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,sa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=mi(t)?vi:di.current,i.context=yi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ya(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ma.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var xa=Array.isArray;function _a(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ia(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ea(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Gs(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function u(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=$s(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=_a(e,t,n),r.return=e,r):((r=Hs(n.type,n.key,n.props,null,e.mode,r)).ref=_a(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Js(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Qs(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=$s(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Hs(t.type,t.key,t.props,null,e.mode,n)).ref=_a(e,null,t),n.return=e,n;case _:return(t=Js(t,e.mode,n)).return=e,t}if(xa(t)||B(t))return(t=Qs(t,e.mode,n,null)).return=e,t;Ia(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?n.type===I?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null}if(xa(n)||B(n))return null!==i?null:f(e,t,n,r,null);Ia(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return e=e.get(null===r.key?n:r.key)||null,r.type===I?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(xa(r)||B(r))return f(t,e=e.get(n)||null,r,i,null);Ia(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),c}function y(i,u,s,c){var l=B(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=a(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===I&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case x:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===I){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=_a(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===I?((r=Qs(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Hs(a.type,a.key,a.props,null,e.mode,s)).ref=_a(e,r,a),s.return=e,e=s)}return u(e);case _:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Js(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=$s(a,e.mode,s)).return=e,e=r),u(e);if(xa(a))return v(e,r,a,s);if(B(a))return y(e,r,a,s);if(l&&Ia(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,H(e.type)||"Component"))}return n(e,r)}}var Ta=Ea(!0),Sa=Ea(!1),Ca={},Na=ci(Ca),Aa=ci(Ca),Oa=ci(Ca);function Pa(e){if(e===Ca)throw Error(o(174));return e}function Ra(e,t){switch(fi(Oa,t),fi(Aa,e),fi(Na,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Na),fi(Na,t)}function Da(){li(Na),li(Aa),li(Oa)}function La(e){Pa(Oa.current);var t=Pa(Na.current),n=pe(t,e.type);t!==n&&(fi(Aa,e),fi(Na,n))}function Ma(e){Aa.current===e&&(li(Na),li(Aa))}var Ua=ci(0);function Fa(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Va=null,ja=null,qa=!1;function Ba(e,t){var n=Ks(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ka(e){if(qa){var t=ja;if(t){var n=t;if(!za(e,t)){if(!(t=Qr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,qa=!1,void(Va=e);Ba(Va,n)}Va=e,ja=Qr(t.firstChild)}else e.flags=-1025&e.flags|2,qa=!1,Va=e}}function Wa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Va=e}function Ga(e){if(e!==Va)return!1;if(!qa)return Wa(e),qa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Kr(t,e.memoizedProps))for(t=ja;t;)Ba(e,t),t=Qr(t.nextSibling);if(Wa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ja=Qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ja=null}}else ja=Va?Qr(e.stateNode.nextSibling):null;return!0}function Ha(){ja=Va=null,qa=!1}var Qa=[];function Ya(){for(var e=0;e<Qa.length;e++)Qa[e]._workInProgressVersionPrimary=null;Qa.length=0}var $a=b.ReactCurrentDispatcher,Ja=b.ReactCurrentBatchConfig,Xa=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Xa=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$a.current=null===e||null===e.memoizedState?Ro:Do,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,$a.current=Lo,e=n(r,i)}while(ro)}if($a.current=Po,t=null!==eo&&null!==eo.next,Xa=0,to=eo=Za=null,no=!1,t)throw Error(o(300));return e}function uo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function so(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.lane;if((Xa&l)===l)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,Za.lanes|=l,qu|=l}c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,lr(r,t.memoizedState)||(Uo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);lr(a,t.memoizedState)||(Uo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Xa&e)===e)&&(t._workInProgressVersionPrimary=r,Qa.push(t))),e)return n(t._source);throw Qa.push(t),Error(o(350))}function po(e,t,n,r){var i=Ru;if(null===i)throw Error(o(349));var a=t._getVersion,u=a(t._source),s=$a.current,c=s.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var y=Za;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(u,e)){e=n(t._source),lr(f,e)||(l(e),e=ds(y),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var s=31-Kt(o),c=1<<s;r[s]|=e,o&=~c}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=ds(y);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=Oo.bind(null,Za,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function vo(e,t,n){return po(so(),e,t,n)}function yo(e){var t=uo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Oo.bind(null,Za,e),[t.memoizedState,e]}function mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},uo().memoizedState=e}function ko(){return so().memoizedState}function wo(e,t,n,r){var i=uo();Za.flags|=e,i.memoizedState=mo(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var i=so();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void mo(t,n,a,r)}Za.flags|=e,i.memoizedState=mo(1|t,n,a,r)}function xo(e,t){return wo(516,4,e,t)}function _o(e,t){return bo(516,4,e,t)}function Io(e,t){return bo(4,2,e,t)}function Eo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,Eo.bind(null,t,e),n)}function So(){}function Co(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function No(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ao(e,t){var n=Ki();Gi(98>n?98:n,(function(){e(!0)})),Gi(97<n?97:n,(function(){var n=Ja.transition;Ja.transition=1;try{e(!1),t()}finally{Ja.transition=n}}))}function Oo(e,t,n){var r=hs(),i=ds(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,s=o(u,n);if(a.eagerReducer=o,a.eagerState=s,lr(s,u))return}catch(c){}ps(e,i,r)}}var Po={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Ro={readContext:oa,useCallback:function(e,t){return uo().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:xo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=uo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=uo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Oo.bind(null,Za,e),[r.memoizedState,e]},useRef:go,useState:yo,useDebugValue:So,useDeferredValue:function(e){var t=yo(e),n=t[0],r=t[1];return xo((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=yo(!1),t=e[0];return go(e=Ao.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=uo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(qa){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+($r++).toString(36))),Error(o(355))})),n=yo(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,mo(5,(function(){n("r:"+($r++).toString(36))}),void 0,null)),t}return yo(t="r:"+($r++).toString(36)),t},unstable_isNewReconciler:!1},Do={readContext:oa,useCallback:Co,useContext:oa,useEffect:_o,useImperativeHandle:To,useLayoutEffect:Io,useMemo:No,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:So,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return _o((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:Co,useContext:oa,useEffect:_o,useImperativeHandle:To,useLayoutEffect:Io,useMemo:No,useReducer:fo,useRef:ko,useState:function(){return fo(co)},useDebugValue:So,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return _o((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Mo=b.ReactCurrentOwner,Uo=!1;function Fo(e,t,n,r){t.child=null===e?Sa(t,null,n,r):Ta(t,e.child,n,r)}function Vo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Uo?(t.flags|=1,Fo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function jo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Ws(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Hs(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,qo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?au(e,t,a):(t.flags|=1,(e=Gs(o,r)).ref=t.ref,e.return=t,t.child=e)}function qo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Uo=!1,0===(a&i))return t.lanes=e.lanes,au(e,t,a);0!==(16384&e.flags)&&(Uo=!0)}return Ko(e,t,n,r,a)}function Bo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},xs(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},xs(t,e),null;t.memoizedState={baseLanes:0},xs(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xs(t,r);return Fo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ko(e,t,n,r,i){var a=mi(n)?vi:di.current;return a=yi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Uo?(t.flags|=1,Fo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Wo(e,t,n,r,i){if(mi(n)){var a=!0;bi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),ba(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=yi(t,c=mi(n)?vi:di.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&wa(t,o,r,c),ua=!1;var h=t.memoizedState;o.state=h,da(t,r,o,i),s=t.memoizedState,u!==r||h!==s||pi.current||ua?("function"===typeof l&&(ya(t,n,l,r),s=t.memoizedState),(u=ua||ga(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Ji(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=oa(s):s=yi(t,s=mi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&wa(t,o,r,s),ua=!1,h=t.memoizedState,o.state=h,da(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||pi.current||ua?("function"===typeof d&&(ya(t,n,d,r),p=t.memoizedState),(c=ua||ga(t,n,c,r,h,p,s))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Go(e,t,n,r,a,i)}function Go(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&xi(t,n,!1),au(e,t,a);r=t.stateNode,Mo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ta(t,e.child,null,a),t.child=Ta(t,null,u,a)):Fo(e,t,u,a),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function Ho(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Ra(e,t.containerInfo)}var Qo,Yo,$o,Jo={dehydrated:null,retryLane:0};function Xo(e,t,n){var r,i=t.pendingProps,a=Ua.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(Ua,1&a),null===e?(void 0!==i.fallback&&Ka(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,t.lanes=33554432,e):((n=Ys({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=tu(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Jo,i):(n=eu(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Ys(t,i,0,null),n=Qs(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function eu(e,t,n,r){var i=e.child;return e=i.sibling,n=Gs(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function tu(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Gs(o,u),null!==e?r=Gs(e,r):(r=Qs(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function nu(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function ru(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function iu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Fo(e,t,r.children,n),0!==(2&(r=Ua.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nu(e,n);else if(19===e.tag)nu(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Ua,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fa(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ru(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fa(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ru(t,!0,n,null,a,t.lastEffect);break;case"together":ru(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function au(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),qu|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Gs(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Gs(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ou(e,t){if(!qa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function uu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mi(t.type)&&gi(),null;case 3:return Da(),li(pi),li(di),Ya(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ga(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ma(t);var a=Pa(Oa.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Pa(Na.current),Ga(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[Xr]=t,r[Zr]=u,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Ar(Tr[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,u),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Ar("invalid",r);break;case"textarea":se(r,u),Ar("invalid",r)}for(var c in Ie(n,u),e=null,u)u.hasOwnProperty(c)&&(a=u[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):s.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Ar("scroll",r));switch(n){case"input":$(r),re(r,u,!0);break;case"textarea":$(r),le(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=jr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Xr]=t,e[Zr]=r,Qo(e,t),t.stateNode=e,c=Ee(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),a=r;break;case"iframe":case"object":case"embed":Ar("load",e),a=r;break;case"video":case"audio":for(a=0;a<Tr.length;a++)Ar(Tr[a],e);a=r;break;case"source":Ar("error",e),a=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),a=r;break;case"details":Ar("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Ar("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":se(e,r),a=ue(e,r),Ar("invalid",e);break;default:a=r}Ie(n,a);var l=a;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?xe(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&me(e,f):"children"===u?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?null!=f&&"onScroll"===u&&Ar("scroll",e):null!=f&&w(e,u,f,c))}switch(n){case"input":$(e),re(e,r,!1);break;case"textarea":$(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?oe(e,!!r.multiple,u,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=jr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)$o(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Pa(Oa.current),Pa(Na.current),Ga(t)?(r=t.stateNode,n=t.memoizedProps,r[Xr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Xr]=t,t.stateNode=r)}return null;case 13:return li(Ua),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ga(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ua.current)?0===Fu&&(Fu=3):(0!==Fu&&3!==Fu||(Fu=4),null===Ru||0===(134217727&qu)&&0===(134217727&Bu)||gs(Ru,Lu))),(r||n)&&(t.flags|=4),null);case 4:return Da(),null===e&&Pr(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Ua),null===(r=t.memoizedState))return null;if(u=0!==(64&t.flags),null===(c=r.rendering))if(u)ou(r,!1);else{if(0!==Fu||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Fa(e))){for(t.flags|=64,ou(r,!1),null!==(u=c.updateQueue)&&(t.updateQueue=u,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(u=n).flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Ua,1&Ua.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Gu&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432)}else{if(!u)if(null!==(e=Fa(c))){if(t.flags|=64,u=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ou(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!qa)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Gu&&1073741824!==n&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Ua.current,fi(Ua,u?1&t|2:1&t),n):null;case 23:case 24:return _s(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function su(e){switch(e.tag){case 1:mi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Da(),li(pi),li(di),Ya(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ma(e),null;case 13:return li(Ua),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Ua),null;case 4:return Da(),null;case 10:return ra(e),null;case 23:case 24:return _s(),null;default:return null}}function cu(e,t){try{var n="",r=t;do{n+=G(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function lu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Yo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Pa(Na.current);var o,u=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),u=[];break;case"option":a=ae(e,a),r=ae(e,r),u=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),u=[];break;case"textarea":a=ue(e,a),r=ue(e,r),u=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=jr)}for(f in Ie(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(s.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(u||(u=[]),u.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(u=u||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(u=u||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(s.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Ar("scroll",e),u||c===l||(u=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(u=u||[]).push(f,l))}n&&(u=u||[]).push("style",n);var f=u;(t.updateQueue=f)&&(t.flags|=4)}},$o=function(e,t,n,r){n!==r&&(t.flags|=4)};var fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$u||($u=!0,Ju=r),lu(0,t)},n}function du(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return lu(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Xu?Xu=new Set([this]):Xu.add(this),lu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var pu="function"===typeof WeakSet?WeakSet:Set;function vu(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){js(e,n)}else t.current=null}function yu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ji(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Hr(t.stateNode.containerInfo))}throw Error(o(163))}function mu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Us(n,e),Ms(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ji(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&xt(n)))))}throw Error(o(163))}function gu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ku(e,t){if(Ii&&"function"===typeof Ii.onCommitFiberUnmount)try{Ii.onCommitFiberUnmount(_i,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Us(t,n);else{r=t;try{i()}catch(a){js(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vu(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){js(t,a)}break;case 5:vu(t);break;case 4:Eu(e,t)}}function wu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function bu(e){return 5===e.tag||3===e.tag||4===e.tag}function xu(e){e:{for(var t=e.return;null!==t;){if(bu(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||bu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?_u(e,n,t):Iu(e,n,t)}function _u(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=jr));else if(4!==r&&null!==(e=e.child))for(_u(e,t,n),e=e.sibling;null!==e;)_u(e,t,n),e=e.sibling}function Iu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Iu(e,t,n),e=e.sibling;null!==e;)Iu(e,t,n),e=e.sibling}function Eu(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var u=e,s=i,c=s;;)if(ku(u,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(u=n,s=i.stateNode,8===u.nodeType?u.parentNode.removeChild(s):u.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ku(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Tu(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ee(e,i),t=Ee(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?xe(n,s):"dangerouslySetInnerHTML"===u?me(n,s):"children"===u?ge(n,s):w(n,u,s,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,xt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Wu=zi(),gu(t.child,!0)),void Su(t);case 19:return void Su(t);case 23:case 24:return void gu(t,null!==t.memoizedState)}throw Error(o(163))}function Su(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new pu),t.forEach((function(t){var r=Bs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cu(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Nu=Math.ceil,Au=b.ReactCurrentDispatcher,Ou=b.ReactCurrentOwner,Pu=0,Ru=null,Du=null,Lu=0,Mu=0,Uu=ci(0),Fu=0,Vu=null,ju=0,qu=0,Bu=0,zu=0,Ku=null,Wu=0,Gu=1/0;function Hu(){Gu=zi()+500}var Qu,Yu=null,$u=!1,Ju=null,Xu=null,Zu=!1,es=null,ts=90,ns=[],rs=[],is=null,as=0,os=null,us=-1,ss=0,cs=0,ls=null,fs=!1;function hs(){return 0!==(48&Pu)?zi():-1!==us?us:us=zi()}function ds(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Ki()?1:2;if(0===ss&&(ss=ju),0!==$i.transition){0!==cs&&(cs=null!==Ku?Ku.pendingLanes:0),e=ss;var t=4186112&~cs;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ki(),0!==(4&Pu)&&98===e?e=jt(12,ss):e=jt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ss),e}function ps(e,t,n){if(50<as)throw as=0,os=null,Error(o(185));if(null===(e=vs(e,t)))return null;zt(e,t,n),e===Ru&&(Bu|=t,4===Fu&&gs(e,Lu));var r=Ki();1===t?0!==(8&Pu)&&0===(48&Pu)?ks(e):(ys(e,n),0===Pu&&(Hu(),Qi())):(0===(4&Pu)||98!==r&&99!==r||(null===is?is=new Set([e]):is.add(e)),ys(e,n)),Ku=e}function vs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ys(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var s=31-Kt(u),c=1<<s,l=a[s];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ut(c);var f=Mt;a[s]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);u&=~c}if(r=Ft(e,e===Ru?Lu:0),t=Mt,0===r)null!==n&&(n!==Ui&&Si(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Ui&&Si(n)}15===t?(n=ks.bind(null,e),null===Vi?(Vi=[n],ji=Ti(Pi,Yi)):Vi.push(n),n=Ui):14===t?n=Hi(99,ks.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Hi(n,ms.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function ms(e){if(us=-1,cs=ss=0,0!==(48&Pu))throw Error(o(327));var t=e.callbackNode;if(Ls()&&e.callbackNode!==t)return null;var n=Ft(e,e===Ru?Lu:0);if(0===n)return null;var r=n,i=Pu;Pu|=16;var a=Ts();for(Ru===e&&Lu===r||(Hu(),Is(e,r));;)try{Ns();break}catch(s){Es(e,s)}if(na(),Au.current=a,Pu=i,null!==Du?r=0:(Ru=null,Lu=0,r=Fu),0!==(ju&Bu))Is(e,0);else if(0!==r){if(2===r&&(Pu|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(n=Vt(e))&&(r=Ss(e,n))),1===r)throw t=Vu,Is(e,0),gs(e,n),ys(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Ps(e);break;case 3:if(gs(e,n),(62914560&n)===n&&10<(r=Wu+500-zi())){if(0!==Ft(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Wr(Ps.bind(null,e),r);break}Ps(e);break;case 4:if(gs(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var u=31-Kt(n);a=1<<u,(u=r[u])>i&&(i=u),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Nu(n/1960))-n)){e.timeoutHandle=Wr(Ps.bind(null,e),n);break}Ps(e);break;default:throw Error(o(329))}}return ys(e,zi()),e.callbackNode===t?ms.bind(null,e):null}function gs(e,t){for(t&=~zu,t&=~Bu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kt(t),r=1<<n;e[n]=-1,t&=~r}}function ks(e){if(0!==(48&Pu))throw Error(o(327));if(Ls(),e===Ru&&0!==(e.expiredLanes&Lu)){var t=Lu,n=Ss(e,t);0!==(ju&Bu)&&(n=Ss(e,t=Ft(e,t)))}else n=Ss(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(Pu|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(t=Vt(e))&&(n=Ss(e,t))),1===n)throw n=Vu,Is(e,0),gs(e,t),ys(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ps(e),ys(e,zi()),null}function ws(e,t){var n=Pu;Pu|=1;try{return e(t)}finally{0===(Pu=n)&&(Hu(),Qi())}}function bs(e,t){var n=Pu;Pu&=-2,Pu|=8;try{return e(t)}finally{0===(Pu=n)&&(Hu(),Qi())}}function xs(e,t){fi(Uu,Mu),Mu|=t,ju|=t}function _s(){Mu=Uu.current,li(Uu)}function Is(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Gr(n)),null!==Du)for(n=Du.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Da(),li(pi),li(di),Ya();break;case 5:Ma(r);break;case 4:Da();break;case 13:case 19:li(Ua);break;case 10:ra(r);break;case 23:case 24:_s()}n=n.return}Ru=e,Du=Gs(e.current,null),Lu=Mu=ju=t,Fu=0,Vu=null,zu=Bu=qu=0}function Es(e,t){for(;;){var n=Du;try{if(na(),$a.current=Po,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Xa=0,to=eo=Za=null,ro=!1,Ou.current=null,null===n||null===n.return){Fu=1,Vu=t,Du=null;break}e:{var a=e,o=n.return,u=n,s=t;if(t=Lu,u.flags|=2048,u.firstEffect=u.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&u.mode)){var l=u.alternate;l?(u.updateQueue=l.updateQueue,u.memoizedState=l.memoizedState,u.lanes=l.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=0!==(1&Ua.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var y=h.updateQueue;if(null===y){var m=new Set;m.add(c),h.updateQueue=m}else y.add(c);if(0===(2&h.mode)){if(h.flags|=64,u.flags|=16384,u.flags&=-2981,1===u.tag)if(null===u.alternate)u.tag=17;else{var g=la(-1,1);g.tag=2,fa(u,g)}u.lanes|=1;break e}s=void 0,u=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fu,s=new Set,k.set(c,s)):void 0===(s=k.get(c))&&(s=new Set,k.set(c,s)),!s.has(u)){s.add(u);var w=qs.bind(null,a,c,u);c.then(w,w)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);s=Error((H(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Fu&&(Fu=2),s=cu(s,u),h=o;do{switch(h.tag){case 3:a=s,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hu(0,a,t));break e;case 1:a=s;var b=h.type,x=h.stateNode;if(0===(64&h.flags)&&("function"===typeof b.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Xu||!Xu.has(x)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,du(h,a,t));break e}}h=h.return}while(null!==h)}Os(n)}catch(_){t=_,Du===n&&null!==n&&(Du=n=n.return);continue}break}}function Ts(){var e=Au.current;return Au.current=Po,null===e?Po:e}function Ss(e,t){var n=Pu;Pu|=16;var r=Ts();for(Ru===e&&Lu===t||Is(e,t);;)try{Cs();break}catch(i){Es(e,i)}if(na(),Pu=n,Au.current=r,null!==Du)throw Error(o(261));return Ru=null,Lu=0,Fu}function Cs(){for(;null!==Du;)As(Du)}function Ns(){for(;null!==Du&&!Ci();)As(Du)}function As(e){var t=Qu(e.alternate,e,Mu);e.memoizedProps=e.pendingProps,null===t?Os(e):Du=t,Ou.current=null}function Os(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=uu(n,t,Mu)))return void(Du=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Mu)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=su(t)))return n.flags&=2047,void(Du=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Du=t);Du=t=e}while(null!==t);0===Fu&&(Fu=5)}function Ps(e){var t=Ki();return Gi(99,Rs.bind(null,e,t)),null}function Rs(e,t){do{Ls()}while(null!==es);if(0!==(48&Pu))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var u=e.eventTimes,s=e.expirationTimes;0<a;){var c=31-Kt(a),l=1<<c;i[c]=0,u[c]=-1,s[c]=-1,a&=~l}if(null!==is&&0===(24&r)&&is.has(e)&&is.delete(e),e===Ru&&(Du=Ru=null,Lu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Pu,Pu|=32,Ou.current=null,qr=Yt,mr(u=yr())){if("selectionStart"in u)s={start:u.selectionStart,end:u.selectionEnd};else e:if(s=(s=u.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch(T){s=null;break e}var f=0,h=-1,d=-1,p=0,v=0,y=u,m=null;t:for(;;){for(var g;y!==s||0!==a&&3!==y.nodeType||(h=f+a),y!==c||0!==l&&3!==y.nodeType||(d=f+l),3===y.nodeType&&(f+=y.nodeValue.length),null!==(g=y.firstChild);)m=y,y=g;for(;;){if(y===u)break t;if(m===s&&++p===a&&(h=f),m===c&&++v===l&&(d=f),null!==(g=y.nextSibling))break;m=(y=m).parentNode}y=g}s=-1===h||-1===d?null:{start:h,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;Br={focusedElem:u,selectionRange:s},Yt=!1,ls=null,fs=!1,Yu=r;do{try{Ds()}catch(T){if(null===Yu)throw Error(o(330));js(Yu,T),Yu=Yu.nextEffect}}while(null!==Yu);ls=null,Yu=r;do{try{for(u=e;null!==Yu;){var k=Yu.flags;if(16&k&&ge(Yu.stateNode,""),128&k){var w=Yu.alternate;if(null!==w){var b=w.ref;null!==b&&("function"===typeof b?b(null):b.current=null)}}switch(1038&k){case 2:xu(Yu),Yu.flags&=-3;break;case 6:xu(Yu),Yu.flags&=-3,Tu(Yu.alternate,Yu);break;case 1024:Yu.flags&=-1025;break;case 1028:Yu.flags&=-1025,Tu(Yu.alternate,Yu);break;case 4:Tu(Yu.alternate,Yu);break;case 8:Eu(u,s=Yu);var x=s.alternate;wu(s),null!==x&&wu(x)}Yu=Yu.nextEffect}}catch(T){if(null===Yu)throw Error(o(330));js(Yu,T),Yu=Yu.nextEffect}}while(null!==Yu);if(b=Br,w=yr(),k=b.focusedElem,u=b.selectionRange,w!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==u&&mr(k)&&(w=u.start,void 0===(b=u.end)&&(b=w),"selectionStart"in k?(k.selectionStart=w,k.selectionEnd=Math.min(b,k.value.length)):(b=(w=k.ownerDocument||document)&&w.defaultView||window).getSelection&&(b=b.getSelection(),s=k.textContent.length,x=Math.min(u.start,s),u=void 0===u.end?x:Math.min(u.end,s),!b.extend&&x>u&&(s=u,u=x,x=s),s=pr(k,x),a=pr(k,u),s&&a&&(1!==b.rangeCount||b.anchorNode!==s.node||b.anchorOffset!==s.offset||b.focusNode!==a.node||b.focusOffset!==a.offset)&&((w=w.createRange()).setStart(s.node,s.offset),b.removeAllRanges(),x>u?(b.addRange(w),b.extend(a.node,a.offset)):(w.setEnd(a.node,a.offset),b.addRange(w))))),w=[];for(b=k;b=b.parentNode;)1===b.nodeType&&w.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<w.length;k++)(b=w[k]).element.scrollLeft=b.left,b.element.scrollTop=b.top}Yt=!!qr,Br=qr=null,e.current=n,Yu=r;do{try{for(k=e;null!==Yu;){var _=Yu.flags;if(36&_&&mu(k,Yu.alternate,Yu),128&_){w=void 0;var I=Yu.ref;if(null!==I){var E=Yu.stateNode;Yu.tag,w=E,"function"===typeof I?I(w):I.current=w}}Yu=Yu.nextEffect}}catch(T){if(null===Yu)throw Error(o(330));js(Yu,T),Yu=Yu.nextEffect}}while(null!==Yu);Yu=null,Fi(),Pu=i}else e.current=n;if(Zu)Zu=!1,es=e,ts=t;else for(Yu=r;null!==Yu;)t=Yu.nextEffect,Yu.nextEffect=null,8&Yu.flags&&((_=Yu).sibling=null,_.stateNode=null),Yu=t;if(0===(r=e.pendingLanes)&&(Xu=null),1===r?e===os?as++:(as=0,os=e):as=0,n=n.stateNode,Ii&&"function"===typeof Ii.onCommitFiberRoot)try{Ii.onCommitFiberRoot(_i,n,void 0,64===(64&n.current.flags))}catch(T){}if(ys(e,zi()),$u)throw $u=!1,e=Ju,Ju=null,e;return 0!==(8&Pu)||Qi(),null}function Ds(){for(;null!==Yu;){var e=Yu.alternate;fs||null===ls||(0!==(8&Yu.flags)?et(Yu,ls)&&(fs=!0):13===Yu.tag&&Cu(e,Yu)&&et(Yu,ls)&&(fs=!0));var t=Yu.flags;0!==(256&t)&&yu(e,Yu),0===(512&t)||Zu||(Zu=!0,Hi(97,(function(){return Ls(),null}))),Yu=Yu.nextEffect}}function Ls(){if(90!==ts){var e=97<ts?97:ts;return ts=90,Gi(e,Fs)}return!1}function Ms(e,t){ns.push(t,e),Zu||(Zu=!0,Hi(97,(function(){return Ls(),null})))}function Us(e,t){rs.push(t,e),Zu||(Zu=!0,Hi(97,(function(){return Ls(),null})))}function Fs(){if(null===es)return!1;var e=es;if(es=null,0!==(48&Pu))throw Error(o(331));var t=Pu;Pu|=32;var n=rs;rs=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],u=i.destroy;if(i.destroy=void 0,"function"===typeof u)try{u()}catch(c){if(null===a)throw Error(o(330));js(a,c)}}for(n=ns,ns=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var s=i.create;i.destroy=s()}catch(c){if(null===a)throw Error(o(330));js(a,c)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Pu=t,Qi(),!0}function Vs(e,t,n){fa(e,t=hu(0,t=cu(n,t),1)),t=hs(),null!==(e=vs(e,1))&&(zt(e,1,t),ys(e,t))}function js(e,t){if(3===e.tag)Vs(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Vs(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r))){var i=du(n,e=cu(t,e),1);if(fa(n,i),i=hs(),null!==(n=vs(n,1)))zt(n,1,i),ys(n,i);else if("function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function qs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hs(),e.pingedLanes|=e.suspendedLanes&n,Ru===e&&(Lu&n)===n&&(4===Fu||3===Fu&&(62914560&Lu)===Lu&&500>zi()-Wu?Is(e,0):zu|=n),ys(e,t)}function Bs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Ki()?1:2:(0===ss&&(ss=ju),0===(t=qt(62914560&~ss))&&(t=4194304))),n=hs(),null!==(e=vs(e,t))&&(zt(e,t,n),ys(e,n))}function zs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(e,t,n,r){return new zs(e,t,n,r)}function Ws(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Gs(e,t){var n=e.alternate;return null===n?((n=Ks(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Hs(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Ws(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case I:return Qs(n.children,i,a,t);case M:u=8,i|=16;break;case E:u=8,i|=1;break;case T:return(e=Ks(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=a,e;case A:return(e=Ks(13,n,t,i)).type=A,e.elementType=A,e.lanes=a,e;case O:return(e=Ks(19,n,t,i)).elementType=O,e.lanes=a,e;case U:return Ys(n,i,a,t);case F:return(e=Ks(24,n,t,i)).elementType=F,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case C:u=9;break e;case N:u=11;break e;case P:u=14;break e;case R:u=16,r=null;break e;case D:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ks(u,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qs(e,t,n,r){return(e=Ks(7,e,r,t)).lanes=n,e}function Ys(e,t,n,r){return(e=Ks(23,e,r,t)).elementType=U,e.lanes=n,e}function $s(e,t,n){return(e=Ks(6,e,null,t)).lanes=n,e}function Js(e,t,n){return(t=Ks(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xs(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Bt(0),this.expirationTimes=Bt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bt(0),this.mutableSourceEagerHydrationData=null}function Zs(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=hs(),u=ds(i);e:if(n){t:{if($e(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(mi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(mi(c)){n=wi(n,c,s);break e}}n=s}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),ps(i,u,a),u}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Xs(e,t,null!=n&&!0===n.hydrate),t=Ks(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,sa(t),e[ei]=n.current,Pr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}bs((function(){ec(t,o,e,i)}))}return tc(o)}function uc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return Zs(e,t,null,n)}Qu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Uo=!0;else{if(0===(n&r)){switch(Uo=!1,t.tag){case 3:Ho(t),Ha();break;case 5:La(t);break;case 1:mi(t.type)&&bi(t);break;case 4:Ra(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi(Xi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Xo(e,t,n):(fi(Ua,1&Ua.current),null!==(t=au(e,t,n))?t.sibling:null);fi(Ua,1&Ua.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return iu(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Ua,Ua.current),r)break;return null;case 23:case 24:return t.lanes=0,Bo(e,t,n)}return au(e,t,n)}Uo=0!==(16384&e.flags)}else Uo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=yi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var a=!0;bi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,sa(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&ya(t,r,u,e),i.updater=ma,t.stateNode=i,i._reactInternals=t,ba(t,r,e,n),t=Go(null,t,r,!0,a,n)}else t.tag=0,Fo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Ws(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===P)return 14}return 2}(i),e=Ji(i,e),a){case 0:t=Ko(null,t,i,e,n);break e;case 1:t=Wo(null,t,i,e,n);break e;case 11:t=Vo(null,t,i,e,n);break e;case 14:t=jo(null,t,i,Ji(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 1:return r=t.type,i=t.pendingProps,Wo(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 3:if(Ho(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ha(),t=au(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(ja=Qr(t.stateNode.containerInfo.firstChild),Va=t,a=qa=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Qa.push(a);for(n=Sa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Fo(e,t,r,n),Ha();t=t.child}return t;case 5:return La(t),null===e&&Ka(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,Kr(r,i)?u=null:null!==a&&Kr(r,a)&&(t.flags|=16),zo(e,t),Fo(e,t,u,n),t.child;case 6:return null===e&&Ka(t),null;case 13:return Xo(e,t,n);case 4:return Ra(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ta(t,null,r,n):Fo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Vo(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(fi(Xi,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=lr(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!pi.current){t=au(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=la(-1,n&-n)).tag=2,fa(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ia(s.return,n),c.lanes|=n;break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Fo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Fo(e,t,r,n),t.child;case 14:return a=Ji(i=t.type,t.pendingProps),jo(e,t,i,a=Ji(i.type,a),r,n);case 15:return qo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ji(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mi(r)?(e=!0,bi(t)):e=!1,aa(t,n),ka(t,r,i),ba(t,r,i,n),Go(null,t,r,!0,e,n);case 19:return iu(e,t,n);case 23:case 24:return Bo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(ps(e,4,hs()),rc(e,4))},nt=function(e){13===e.tag&&(ps(e,67108864,hs()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hs(),n=ds(e);ps(e,n,t),rc(e,n)}},it=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));J(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Re=ws,De=function(e,t,n,r,i){var a=Pu;Pu|=4;try{return Gi(98,e.bind(null,t,n,r,i))}finally{0===(Pu=a)&&(Hu(),Qi())}},Le=function(){0===(49&Pu)&&(function(){if(null!==is){var e=is;is=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ys(e,zi())}))}Qi()}(),Ls())},Me=function(e,t){var n=Pu;Pu|=2;try{return e(t)}finally{0===(Pu=n)&&(Hu(),Qi())}};var sc={Events:[ri,ii,ai,Oe,Pe,Ls,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{_i=fc.inject(lc),Ii=fc}catch(ye){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sc,t.createPortal=uc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Pu;if(0!==(48&n))return e(t);Pu|=1;try{if(e)return Gi(99,e.bind(null,t))}finally{Pu=n,Qi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(bs((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=ws,t.unstable_createPortal=function(e,t){return uc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},372:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return b(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||b(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===y},t.isMemo=function(e){return b(e)===v},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===u},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===w||e.$$typeof===m)},t.typeOf=b},441:function(e,t,n){"use strict";e.exports=n(372)},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function m(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=y.prototype;var k=g.prototype=new m;k.constructor=g,r(k,y.prototype),k.isPureReactComponent=!0;var w={current:null},b=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,n){var r,a={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,r)&&!x.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:i,type:e,key:o,ref:u,props:a,_owner:w.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function S(e,t,n,r,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case i:case a:s=!0}}if(s)return o=o(s=e),e=""===r?"."+T(s,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),S(o,t,n,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+T(u=e[c],c);s+=S(u,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=S(u=u.value,t,n,l=r+T(u,c++),o);else if("object"===u)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function C(e,t,n){if(null==e)return e;var r=[],i=0;return S(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var A={current:null};function O(){var e=A.current;if(null===e)throw Error(d(321));return e}var P={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error(d(143));return e}},t.Component=y,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)b.call(t,l)&&!x.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:u,props:a,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return O().useCallback(e,t)},t.useContext=function(e,t){return O().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return O().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return O().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return O().useLayoutEffect(e,t)},t.useMemo=function(e,t){return O().useMemo(e,t)},t.useReducer=function(e,t,n){return O().useReducer(e,t,n)},t.useRef=function(e){return O().useRef(e)},t.useState=function(e){return O().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(O){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(O){return{type:"throw",arg:O}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var k={};s(k,a,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(N([])));b&&b!==n&&r.call(b,a)&&(k=b);var x=g.prototype=y.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return m.prototype=g,s(x,"constructor",g),s(g,"constructor",m),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},_(I.prototype),s(I.prototype,o,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new I(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(x),s(x,u,"Generator"),s(x,a,(function(){return this})),s(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,y=null,m=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,b=w.port2;w.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();k=e+g;try{y(!0,e)?b.postMessage(null):(v=!1,y=null)}catch(n){throw b.postMessage(null),n}}else v=!1},n=function(e){y=e,v||(v=!0,b.postMessage(null))},r=function(e,n){m=h((function(){e(t.unstable_now())}),n)},i=function(){d(m),m=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function _(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>E(o,n))void 0!==s&&0>E(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>E(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],S=[],C=1,N=null,A=3,O=!1,P=!1,R=!1;function D(e){for(var t=_(S);null!==t;){if(null===t.callback)I(S);else{if(!(t.startTime<=e))break;I(S),t.sortIndex=t.expirationTime,x(T,t)}t=_(S)}}function L(e){if(R=!1,D(e),!P)if(null!==_(T))P=!0,n(M);else{var t=_(S);null!==t&&r(L,t.startTime-e)}}function M(e,n){P=!1,R&&(R=!1,i()),O=!0;var a=A;try{for(D(n),N=_(T);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"===typeof o){N.callback=null,A=N.priorityLevel;var u=o(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?N.callback=u:N===_(T)&&I(T),D(n)}else I(T);N=_(T)}if(null!==N)var s=!0;else{var c=_(S);null!==c&&r(L,c.startTime-n),s=!1}return s}finally{N=null,A=a,O=!1}}var U=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){P||O||(P=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return _(T)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=U,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?u+o:u:o=u,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>u?(e.sortIndex=o,x(S,e),null===_(T)&&e===_(S)&&(R?i():R=!0,r(L,o-u))):(e.sortIndex=s,x(T,e),P||O||(P=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/crwn-clothing/",function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Le},SDK_VERSION:function(){return Dt},_DEFAULT_ENTRY_NAME:function(){return kt},_addComponent:function(){return _t},_addOrOverwriteComponent:function(){return It},_apps:function(){return bt},_clearComponents:function(){return Ct},_components:function(){return xt},_getProvider:function(){return Tt},_registerComponent:function(){return Et},_removeServiceInstance:function(){return St},deleteApp:function(){return Ft},getApp:function(){return Mt},getApps:function(){return Ut},initializeApp:function(){return Lt},onLog:function(){return qt},registerVersion:function(){return jt},setLogLevel:function(){return Bt}});var t=n(791),r=n(164);function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}var o=n(589),u=n.n(o);function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}function c(e){return"/"===e.charAt(0)}function l(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var f=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],a=e&&c(e),o=t&&c(t),u=a||o;if(e&&c(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var s=i[i.length-1];n="."===s||".."===s||""===s}else n=!1;for(var f=0,h=i.length;h>=0;h--){var d=i[h];"."===d?l(i,h):".."===d?(l(i,h),f++):f&&(l(i,h),f--)}if(!u)for(;f--;f)i.unshift("..");!u||""===i[0]||i[0]&&c(i[0])||i.unshift("");var p=i.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p},h="Invariant failed";function d(e,t){if(!e)throw new Error(h)}function p(e){return"/"===e.charAt(0)?e:"/"+e}function v(e){return"/"===e.charAt(0)?e.substr(1):e}function y(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function m(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function g(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function k(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=s({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=f(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function w(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var b=!("undefined"===typeof window||!window.document||!window.document.createElement);function x(e,t){t(window.confirm(e))}var _="popstate",I="hashchange";function E(){try{return window.history.state||{}}catch(e){return{}}}function T(e){void 0===e&&(e={}),b||d(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,a=i.forceRefresh,o=void 0!==a&&a,u=i.getUserConfirmation,c=void 0===u?x:u,l=i.keyLength,f=void 0===l?6:l,h=e.basename?m(p(e.basename)):"";function v(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return h&&(a=y(a,h)),k(a,r,n)}function T(){return Math.random().toString(36).substr(2,f)}var S=w();function C(e){s(j,e),j.length=t.length,S.notifyListeners(j.location,j.action)}function N(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||P(v(e.state))}function A(){P(v(E()))}var O=!1;function P(e){if(O)O=!1,C();else{S.confirmTransitionTo(e,"POP",c,(function(t){t?C({action:"POP",location:e}):function(e){var t=j.location,n=D.indexOf(t.key);-1===n&&(n=0);var r=D.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(O=!0,M(i))}(e)}))}}var R=v(E()),D=[R.key];function L(e){return h+g(e)}function M(e){t.go(e)}var U=0;function F(e){1===(U+=e)&&1===e?(window.addEventListener(_,N),r&&window.addEventListener(I,A)):0===U&&(window.removeEventListener(_,N),r&&window.removeEventListener(I,A))}var V=!1;var j={length:t.length,action:"POP",location:R,createHref:L,push:function(e,r){var i="PUSH",a=k(e,r,T(),j.location);S.confirmTransitionTo(a,i,c,(function(e){if(e){var r=L(a),u=a.key,s=a.state;if(n)if(t.pushState({key:u,state:s},null,r),o)window.location.href=r;else{var c=D.indexOf(j.location.key),l=D.slice(0,c+1);l.push(a.key),D=l,C({action:i,location:a})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",a=k(e,r,T(),j.location);S.confirmTransitionTo(a,i,c,(function(e){if(e){var r=L(a),u=a.key,s=a.state;if(n)if(t.replaceState({key:u,state:s},null,r),o)window.location.replace(r);else{var c=D.indexOf(j.location.key);-1!==c&&(D[c]=a.key),C({action:i,location:a})}else window.location.replace(r)}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=S.setPrompt(e);return V||(F(1),V=!0),function(){return V&&(V=!1,F(-1)),t()}},listen:function(e){var t=S.appendListener(e);return F(1),function(){F(-1),t()}}};return j}var S="hashchange",C={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+v(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:v,decodePath:p},slash:{encodePath:p,decodePath:p}};function N(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function A(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function O(e){window.location.replace(N(window.location.href)+"#"+e)}function P(e){void 0===e&&{},b||d(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?x:r,a=n.hashType,o=void 0===a?"slash":a,u=e.basename?m(p(e.basename)):"",c=C[o],l=c.encodePath,f=c.decodePath;function h(){var e=f(A());return u&&y(e,u),k(e)}var v=w();function _(e){s(j,e),j.length=t.length,v.notifyListeners(j.location,j.action)}var I=!1,E=null;function T(){var e,t,n=A(),r=l(n);if(n!==r)O(r);else{var a=h(),o=j.location;if(!I&&(a,o.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(E===g(a))return;null,function(e){if(I)!1,_();else{var t="POP";v.confirmTransitionTo(e,t,i,(function(n){n?_({action:t,location:e}):function(e){var t=j.location,n=L.lastIndexOf(g(t));-1===n&&0;var r=L.lastIndexOf(g(e));-1===r&&0;var i=n-r;i&&(!0,M(i))}(e)}))}}(a)}}var P=A(),R=l(P);P!==R&&O(R);var D=h(),L=[g(D)];function M(e){t.go(e)}var U=0;function F(e){1===(U+=e)&&1===e?window.addEventListener(S,T):0===U&&window.removeEventListener(S,T)}var V=!1;var j={length:t.length,action:"POP",location:D,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&N(window.location.href),n+"#"+l(u+g(e))},push:function(e,t){var n="PUSH",r=k(e,void 0,void 0,j.location);v.confirmTransitionTo(r,n,i,(function(e){if(e){var t=g(r),i=l(u+t);if(A()!==i){t,function(e){window.location.hash=e}(i);var a=L.lastIndexOf(g(j.location)),o=L.slice(0,a+1);o.push(t),o,_({action:n,location:r})}else _()}}))},replace:function(e,t){var n="REPLACE",r=k(e,void 0,void 0,j.location);v.confirmTransitionTo(r,n,i,(function(e){if(e){var t=g(r),i=l(u+t);A()!==i&&(t,O(i));var a=L.indexOf(g(j.location));-1!==a&&(L[a]=t),_({action:n,location:r})}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&!1;var t=v.setPrompt(e);return V||(F(1),!0),function(){return V&&(!1,F(-1)),t()}},listen:function(e){var t=v.appendListener(e);return F(1),function(){F(-1),t()}}};return j}function R(e,t,n){return Math.min(Math.max(e,t),n)}function D(e){void 0===e&&{};var t=e,n=t.getUserConfirmation,r=t.initialEntries,i=void 0===r?["/"]:r,a=t.initialIndex,o=void 0===a?0:a,u=t.keyLength,c=void 0===u?6:u,l=w();function f(e){s(m,e),m.length=m.entries.length,l.notifyListeners(m.location,m.action)}function h(){return Math.random().toString(36).substr(2,c)}var d=R(o,0,i.length-1),p=i.map((function(e){return k(e,void 0,"string"===typeof e?h():e.key||h())})),v=g;function y(e){var t=R(m.index+e,0,m.entries.length-1),r=m.entries[t];l.confirmTransitionTo(r,"POP",n,(function(e){e?f({action:"POP",location:r,index:t}):f()}))}var m={length:p.length,action:"POP",location:p[d],index:d,entries:p,createHref:v,push:function(e,t){var r="PUSH",i=k(e,t,h(),m.location);l.confirmTransitionTo(i,r,n,(function(e){if(e){var t=m.index+1,n=m.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),f({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=k(e,t,h(),m.location);l.confirmTransitionTo(i,r,n,(function(e){e&&(m.entries[m.index]=i,f({action:r,location:i}))}))},go:y,goBack:function(){y(-1)},goForward:function(){y(1)},canGo:function(e){var t=m.index+e;return t>=0&&t<m.entries.length},block:function(e){return void 0===e&&!1,l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return m}var L=n(151),M=n.n(L);n(441);function U(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var F=n(110),V=n.n(F),j=function(e){var t=u()();return t.Provider.displayName=e+".Provider",t.Consumer.displayName=e+".Consumer",t},q=j("Router"),B=function(e){function n(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}a(n,e),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=n.prototype;return r.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&this.unlisten()},r.render=function(){return t.createElement(q.Provider,{children:this.props.children||null,value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}})},n}(t.Component);t.Component;t.Component;var z={},K=0;function W(e,t){void 0===t&&(t={}),"string"===typeof t&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,u=void 0!==o&&o,s=n.sensitive,c=void 0!==s&&s;return[].concat(r).reduce((function(t,n){if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=z[n]||(z[n]={});if(r[e])return r[e];var i=[],a={regexp:M()(e,i,t),keys:i};return K<1e4&&(r[e]=a,K++),a}(n,{end:a,strict:u,sensitive:c}),i=r.regexp,o=r.keys,s=i.exec(e);if(!s)return null;var l=s[0],f=s.slice(1),h=e===l;return a&&!h?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:h,params:o.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var G=function(e){function n(){return e.apply(this,arguments)||this}return a(n,e),n.prototype.render=function(){var e=this;return t.createElement(q.Consumer,null,(function(n){n||d(!1);var r=e.props.location||n.location,i=s({},n,{location:r,match:e.props.computedMatch?e.props.computedMatch:e.props.path?W(r.pathname,e.props):n.match}),a=e.props,o=a.children,u=a.component,c=a.render;(Array.isArray(o)&&0===o.length&&(o=null),"function"===typeof o)&&(void 0===(o=o(i))&&(o=null));return t.createElement(q.Provider,{value:i},o&&!function(e){return 0===t.Children.count(e)}(o)?o:i.match?u?t.createElement(u,i):c?c(i):null:null)}))},n}(t.Component);function H(e){return"/"===e.charAt(0)?e:"/"+e}function Q(e,t){if(!e)return t;var n=H(e);return 0!==t.pathname.indexOf(n)?t:s({},t,{pathname:t.pathname.substr(n.length)})}function Y(e){return"string"===typeof e?e:g(e)}function $(e){return function(){d(!1)}}function J(){}t.Component;var X=function(e){function n(){return e.apply(this,arguments)||this}return a(n,e),n.prototype.render=function(){var e=this;return t.createElement(q.Consumer,null,(function(n){n||d(!1);var r,i,a=e.props.location||n.location;return t.Children.forEach(e.props.children,(function(e){if(null==i&&t.isValidElement(e)){r=e;var o=e.props.path||e.props.from;i=o?W(a.pathname,s({},e.props,{path:o})):n.match}})),i?t.cloneElement(r,{location:a,computedMatch:i}):null}))},n}(t.Component);var Z=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=T(t.props),t}return a(n,e),n.prototype.render=function(){return t.createElement(B,{history:this.history,children:this.props.children})},n}(t.Component);t.Component;var ee=function(e){function n(){return e.apply(this,arguments)||this}a(n,e);var r=n.prototype;return r.handleClick=function(e,t){(this.props.onClick&&this.props.onClick(e),e.defaultPrevented||0!==e.button||this.props.target&&"_self"!==this.props.target||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))||(e.preventDefault(),(this.props.replace?t.replace:t.push)(this.props.to))},r.render=function(){var e=this,n=this.props,r=n.innerRef,i=(n.replace,n.to),a=U(n,["innerRef","replace","to"]);return t.createElement(q.Consumer,null,(function(n){n||d(!1);var o="string"===typeof i?k(i,null,null,n.location):i,u=o?n.history.createHref(o):"";return t.createElement("a",s({},a,{onClick:function(t){return e.handleClick(t,n.history)},href:u,ref:r}))}))},n}(t.Component);function te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t,n){return t&&ne(e.prototype,t),n&&ne(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ie(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}function oe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ce(e,t){if(t&&("object"===ue(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return se(e)}function le(e){var t=oe();return function(){var n,r=ae(e);if(t){var i=ae(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ce(this,n)}}function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function de(e,t){if(e){if("string"===typeof e)return he(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?he(e,t):void 0}}function pe(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=de(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function ve(e){if(Array.isArray(e))return e}function ye(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function me(e,t){return ve(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||de(e,t)||ye()}function ge(e,t,n){return ge=oe()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&i(a,n.prototype),a},ge.apply(null,arguments)}function ke(e){var t="function"===typeof Map?new Map:void 0;return ke=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ge(e,arguments,ae(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i(n,e)},ke(e)}var we=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},be={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(we(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},xe=function(e){return function(e){var t=we(e);return be.encodeByteArray(t,!0)}(e).replace(/\./g,"")},_e=function(e){try{return be.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ie(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&Ee(n)&&(e[n]=Ie(e[n],t[n]));return e}function Ee(e){return"__proto__"!==e}var Te=function(){function e(){var t=this;te(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return re(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Se(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[xe(JSON.stringify({alg:"none",type:"JWT"})),xe(JSON.stringify(a)),""].join(".")}function Ce(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ne(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ce())}function Ae(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Oe(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Pe(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Re(){var e=Ce();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function De(){return"object"===typeof indexedDB}var Le=function(e){ie(n,e);var t=le(n);function n(e,r,i){var a;return te(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(se(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(se(a),Me.prototype.create),a}return re(n)}(ke(Error)),Me=function(){function e(t,n,r){te(this,e),this.service=t,this.serviceName=n,this.errors=r}return re(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Ue(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Le(n,a,t);return o}}]),e}();function Ue(e,t){return e.replace(Fe,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Fe=/\{\$([^}]+)}/g;function Ve(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function je(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(qe(u)&&qe(s)){if(!je(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function qe(e){return null!==e&&"object"===typeof e}function Be(e){for(var t=[],n=function(){var e=me(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function ze(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=me(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Ke(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function We(e,t){var n=new Ge(e,t);return n.subscribe.bind(n)}var Ge=function(){function e(t,n){var r=this;te(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return re(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=pe(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=He),void 0===r.error&&(r.error=He),void 0===r.complete&&(r.complete=He);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function He(){}function Qe(e){return e&&e._delegate?e._delegate:e}function Ye(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function $e(e){return function(e){if(Array.isArray(e))return he(e)}(e)||Ye(e)||de(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function Xe(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Je(a,r,i,o,u,"next",e)}function u(e){Je(a,r,i,o,u,"throw",e)}o(void 0)}))}}var Ze=n(757),et=n.n(Ze),tt=function(){function e(t,n,r){te(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return re(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),nt="[DEFAULT]",rt=function(){function e(t,n){te(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return re(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Te;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:nt})}catch(s){}var t,n=pe(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=me(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Xe(Ze.mark((function e(){var t;return Ze.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat($e(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),$e(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=pe(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=me(i.value,2),s=u[0],c=u[1],l=this.normalizeInstanceIdentifier(s);r===l&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=pe(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(ky){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===nt?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(ky){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt;return this.component?this.component.multipleInstances?e:nt:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var it,at,ot=function(){function e(t){te(this,e),this.name=t,this.providers=new Map}return re(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new rt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ut=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(at||(at={}));var st,ct,lt={debug:at.DEBUG,verbose:at.VERBOSE,info:at.INFO,warn:at.WARN,error:at.ERROR,silent:at.SILENT},ft=at.INFO,ht=(fe(it={},at.DEBUG,"log"),fe(it,at.VERBOSE,"log"),fe(it,at.INFO,"info"),fe(it,at.WARN,"warn"),fe(it,at.ERROR,"error"),it),dt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ht[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},pt=function(){function e(t){te(this,e),this.name=t,this._logLevel=ft,this._logHandler=dt,this._userLogHandler=null,ut.push(this)}return re(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in at))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?lt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,at.DEBUG].concat(t)),this._logHandler.apply(this,[this,at.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,at.VERBOSE].concat(t)),this._logHandler.apply(this,[this,at.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,at.INFO].concat(t)),this._logHandler.apply(this,[this,at.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,at.WARN].concat(t)),this._logHandler.apply(this,[this,at.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,at.ERROR].concat(t)),this._logHandler.apply(this,[this,at.ERROR].concat(t))}}]),e}();var vt=function(){function e(t){te(this,e),this.container=t}return re(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var yt="@firebase/app",mt="0.7.17",gt=new pt("@firebase/app"),kt="[DEFAULT]",wt=(fe(st={},yt,"fire-core"),fe(st,"@firebase/app-compat","fire-core-compat"),fe(st,"@firebase/analytics","fire-analytics"),fe(st,"@firebase/analytics-compat","fire-analytics-compat"),fe(st,"@firebase/app-check","fire-app-check"),fe(st,"@firebase/app-check-compat","fire-app-check-compat"),fe(st,"@firebase/auth","fire-auth"),fe(st,"@firebase/auth-compat","fire-auth-compat"),fe(st,"@firebase/database","fire-rtdb"),fe(st,"@firebase/database-compat","fire-rtdb-compat"),fe(st,"@firebase/functions","fire-fn"),fe(st,"@firebase/functions-compat","fire-fn-compat"),fe(st,"@firebase/installations","fire-iid"),fe(st,"@firebase/installations-compat","fire-iid-compat"),fe(st,"@firebase/messaging","fire-fcm"),fe(st,"@firebase/messaging-compat","fire-fcm-compat"),fe(st,"@firebase/performance","fire-perf"),fe(st,"@firebase/performance-compat","fire-perf-compat"),fe(st,"@firebase/remote-config","fire-rc"),fe(st,"@firebase/remote-config-compat","fire-rc-compat"),fe(st,"@firebase/storage","fire-gcs"),fe(st,"@firebase/storage-compat","fire-gcs-compat"),fe(st,"@firebase/firestore","fire-fst"),fe(st,"@firebase/firestore-compat","fire-fst-compat"),fe(st,"fire-js","fire-js"),fe(st,"firebase","fire-js-all"),st),bt=new Map,xt=new Map;function _t(e,t){try{e.container.addComponent(t)}catch(n){gt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function It(e,t){e.container.addOrOverwriteComponent(t)}function Et(e){var t=e.name;if(xt.has(t))return gt.debug("There were multiple attempts to register component ".concat(t,".")),!1;xt.set(t,e);var n,r=pe(bt.values());try{for(r.s();!(n=r.n()).done;){_t(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Tt(e,t){return e.container.getProvider(t)}function St(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:kt;Tt(e,t).clearInstance(n)}function Ct(){xt.clear()}var Nt,At,Ot=(fe(ct={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),fe(ct,"bad-app-name","Illegal App name: '{$appName}"),fe(ct,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),fe(ct,"app-deleted","Firebase App named '{$appName}' already deleted"),fe(ct,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),fe(ct,"invalid-log-argument","First argument to `onLog` must be null or a function."),ct),Pt=new Me("app","Firebase",Ot),Rt=function(){function e(t,n,r){var i=this;te(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new tt("app",(function(){return i}),"PUBLIC"))}return re(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Pt.create("app-deleted",{appName:this._name})}}]),e}(),Dt="9.6.7";function Lt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:kt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Pt.create("bad-app-name",{appName:String(i)});var a=bt.get(i);if(a){if(je(e,a.options)&&je(r,a.config))return a;throw Pt.create("duplicate-app",{appName:i})}var o,u=new ot(i),s=pe(xt.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Rt(e,r,u);return bt.set(i,l),l}function Mt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt,t=bt.get(e);if(!t)throw Pt.create("no-app",{appName:e});return t}function Ut(){return Array.from(bt.values())}function Ft(e){return Vt.apply(this,arguments)}function Vt(){return Vt=Xe(Ze.mark((function e(t){var n;return Ze.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!bt.has(n)){e.next=6;break}return bt.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),Vt.apply(this,arguments)}function jt(e,t,n){var r,i=null!==(r=wt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void gt.warn(u.join(" "))}Et(new tt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function qt(e,t){if(null!==e&&"function"!==typeof e)throw Pt.create("invalid-log-argument");!function(e,t){var n,r=pe(ut);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=lt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:at[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Bt(e){var t;t=e,ut.forEach((function(e){e.setLogLevel(t)}))}Nt="",Et(new tt("platform-logger",(function(e){return new vt(e)}),"PRIVATE")),jt(yt,mt,Nt),jt(yt,mt,"esm2017"),jt("fire-js","");var zt=function(){function e(t,n){var r=this;te(this,e),this._delegate=t,this.firebase=n,_t(t,new tt("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return re(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Ft(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kt;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kt;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){_t(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){It(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Kt=(fe(At={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),fe(At,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),At),Wt=new Me("app-compat","Firebase",Kt);var Gt=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Lt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Ve(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:jt,setLogLevel:Bt,onLog:qt,apps:null,SDK_VERSION:Dt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Et(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Wt.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Ie(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Ve(n,e=e||kt))throw Wt.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(zt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ie(n,e)},createSubscribe:We,ErrorFactory:Me,deepExtend:Ie}),n}(),Ht=new pt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Ht.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Qt=self.firebase.SDK_VERSION;Qt&&Qt.indexOf("LITE")>=0&&Ht.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Yt=Gt;!function(e){jt("@firebase/app-compat","0.1.18",e)}();function $t(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ae(e)););return e}function Jt(){return Jt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=$t(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Jt.apply(this,arguments)}Yt.registerVersion("firebase","9.6.7","app-compat");var Xt,Zt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},en={},tn=tn||{},nn=Zt||self;function rn(){}function an(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function on(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var un="closure_uid_"+(1e9*Math.random()>>>0),sn=0;function cn(e,t,n){return e.call.apply(e.bind,arguments)}function ln(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function fn(e,t,n){return(fn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?cn:ln).apply(null,arguments)}function hn(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function dn(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function pn(){this.s=this.s,this.o=this.o}var vn={};pn.prototype.s=!1,pn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,un)&&e[un]||(e[un]=++sn)}(this);delete vn[e]}},pn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var yn=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},mn=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function gn(e){return Array.prototype.concat.apply([],arguments)}function kn(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function wn(e){return/^[\s\xa0]*$/.test(e)}var bn,xn=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function _n(e,t){return-1!=e.indexOf(t)}function In(e,t){return e<t?-1:e>t?1:0}e:{var En=nn.navigator;if(En){var Tn=En.userAgent;if(Tn){bn=Tn;break e}}bn=""}function Sn(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Cn(e){var t={};for(var n in e)t[n]=e[n];return t}var Nn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function An(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Nn.length;a++)n=Nn[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function On(e){return On[" "](e),e}On[" "]=rn;var Pn,Rn=_n(bn,"Opera"),Dn=_n(bn,"Trident")||_n(bn,"MSIE"),Ln=_n(bn,"Edge"),Mn=Ln||Dn,Un=_n(bn,"Gecko")&&!(_n(bn.toLowerCase(),"webkit")&&!_n(bn,"Edge"))&&!(_n(bn,"Trident")||_n(bn,"MSIE"))&&!_n(bn,"Edge"),Fn=_n(bn.toLowerCase(),"webkit")&&!_n(bn,"Edge");function Vn(){var e=nn.document;return e?e.documentMode:void 0}e:{var jn="",qn=function(){var e=bn;return Un?/rv:([^\);]+)(\)|;)/.exec(e):Ln?/Edge\/([\d\.]+)/.exec(e):Dn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Fn?/WebKit\/(\S+)/.exec(e):Rn?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(qn&&(jn=qn?qn[1]:""),Dn){var Bn=Vn();if(null!=Bn&&Bn>parseFloat(jn)){Pn=String(Bn);break e}}Pn=jn}var zn,Kn={};function Wn(){return function(e){var t=Kn;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=xn(String(Pn)).split("."),n=xn("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=In(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||In(0==a[2].length,0==o[2].length)||In(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(nn.document&&Dn){var Gn=Vn();zn=Gn||(parseInt(Pn,10)||void 0)}else zn=void 0;var Hn=zn,Qn=function(){if(!nn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{nn.addEventListener("test",rn,t),nn.removeEventListener("test",rn,t)}catch(n){}return e}();function Yn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function $n(e,t){if(Yn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Un){e:{try{On(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Jn[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&$n.Z.h.call(this)}}Yn.prototype.h=function(){this.defaultPrevented=!0},dn($n,Yn);var Jn={2:"touch",3:"pen",4:"mouse"};$n.prototype.h=function(){$n.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Xn="closure_listenable_"+(1e6*Math.random()|0),Zn=0;function er(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Zn,this.ca=this.fa=!1}function tr(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function nr(e){this.src=e,this.g={},this.h=0}function rr(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=yn(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(tr(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ir(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}nr.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=ir(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new er(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var ar="closure_lm_"+(1e6*Math.random()|0),or={};function ur(e,t,n,r,i){if(r&&r.once)return cr(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)ur(e,t[a],n,r,i);return null}return n=yr(n),e&&e[Xn]?e.N(t,n,on(r)?!!r.capture:!!r,i):sr(e,t,n,!1,r,i)}function sr(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=on(i)?!!i.capture:!!i,u=pr(e);if(u||(e[ar]=u=new nr(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=dr;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Qn||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(hr(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function cr(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)cr(e,t[a],n,r,i);return null}return n=yr(n),e&&e[Xn]?e.O(t,n,on(r)?!!r.capture:!!r,i):sr(e,t,n,!0,r,i)}function lr(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)lr(e,t[a],n,r,i);else r=on(r)?!!r.capture:!!r,n=yr(n),e&&e[Xn]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ir(a=e.g[t],n,r,i))&&(tr(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=pr(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ir(t,n,r,i)),(n=-1<e?t[e]:null)&&fr(n))}function fr(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Xn])rr(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(hr(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=pr(t))?(rr(n,e),0==n.h&&(n.src=null,t[ar]=null)):tr(e)}}}function hr(e){return e in or?or[e]:or[e]="on"+e}function dr(e,t){if(e.ca)e=!0;else{t=new $n(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&fr(e),e=n.call(r,t)}return e}function pr(e){return(e=e[ar])instanceof nr?e:null}var vr="__closure_events_fn_"+(1e9*Math.random()>>>0);function yr(e){return"function"===typeof e?e:(e[vr]||(e[vr]=function(t){return e.handleEvent(t)}),e[vr])}function mr(){pn.call(this),this.i=new nr(this),this.P=this,this.I=null}function gr(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Yn(t,e);else if(t instanceof Yn)t.target=t.target||e;else{var i=t;An(t=new Yn(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=kr(o,r,!0,t)&&i}if(i=kr(o=t.g=e,r,!0,t)&&i,i=kr(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=kr(o=t.g=n[a],r,!1,t)&&i}function kr(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&rr(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}dn(mr,pn),mr.prototype[Xn]=!0,mr.prototype.removeEventListener=function(e,t,n,r){lr(this,e,t,n,r)},mr.prototype.M=function(){if(mr.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)tr(n[r]);delete t.g[e],t.h--}}this.I=null},mr.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},mr.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var wr=nn.JSON.stringify;function br(){var e=Nr,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var xr,_r=function(){function e(){te(this,e),this.h=this.g=null}return re(e,[{key:"add",value:function(e,t){var n=Ir.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Ir=new(function(){function e(t,n){te(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return re(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Er}),(function(e){return e.reset()})),Er=function(){function e(){te(this,e),this.next=this.g=this.h=null}return re(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Tr(e){nn.setTimeout((function(){throw e}),0)}function Sr(e,t){xr||function(){var e=nn.Promise.resolve(void 0);xr=function(){e.then(Ar)}}(),Cr||(xr(),Cr=!0),Nr.add(e,t)}var Cr=!1,Nr=new _r;function Ar(){for(var e;e=br();){try{e.h.call(e.g)}catch(n){Tr(n)}var t=Ir;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Cr=!1}function Or(e,t){mr.call(this),this.h=e||1,this.g=t||nn,this.j=fn(this.kb,this),this.l=Date.now()}function Pr(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Rr(e,t,n){if("function"===typeof e)n&&(e=fn(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=fn(e.handleEvent,e)}return 2147483647<Number(t)?-1:nn.setTimeout(e,t||0)}function Dr(e){e.g=Rr((function(){e.g=null,e.i&&(e.i=!1,Dr(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}dn(Or,mr),(Xt=Or.prototype).da=!1,Xt.S=null,Xt.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),gr(this,"tick"),this.da&&(Pr(this),this.start()))}},Xt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xt.M=function(){Or.Z.M.call(this),Pr(this),delete this.g};var Lr=function(e){ie(n,e);var t=le(n);function n(e,r){var i;return te(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return re(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Dr(this)}},{key:"M",value:function(){Jt(ae(n.prototype),"M",this).call(this),this.g&&(nn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(pn);function Mr(e){pn.call(this),this.h=e,this.g={}}dn(Mr,pn);var Ur=[];function Fr(e,t,n,r){Array.isArray(n)||(n&&(Ur[0]=n.toString()),n=Ur);for(var i=0;i<n.length;i++){var a=ur(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Vr(e){Sn(e.g,(function(e,t){this.g.hasOwnProperty(t)&&fr(e)}),e),e.g={}}function jr(){this.g=!0}function qr(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return wr(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Mr.prototype.M=function(){Mr.Z.M.call(this),Vr(this)},Mr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},jr.prototype.Aa=function(){this.g=!1},jr.prototype.info=function(){};var Br={},zr=null;function Kr(){return zr=zr||new mr}function Wr(e){Yn.call(this,Br.Ma,e)}function Gr(e){var t=Kr();gr(t,new Wr(t,e))}function Hr(e,t){Yn.call(this,Br.STAT_EVENT,e),this.stat=t}function Qr(e){var t=Kr();gr(t,new Hr(t,e))}function Yr(e,t){Yn.call(this,Br.Na,e),this.size=t}function $r(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return nn.setTimeout((function(){e()}),t)}Br.Ma="serverreachability",dn(Wr,Yn),Br.STAT_EVENT="statevent",dn(Hr,Yn),Br.Na="timingevent",dn(Yr,Yn);var Jr={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Xr={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Zr(){}function ei(e){return e.h||(e.h=e.i())}function ti(){}Zr.prototype.h=null;var ni,ri={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ii(){Yn.call(this,"d")}function ai(){Yn.call(this,"c")}function oi(){}function ui(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Mr(this),this.P=ci,e=Mn?125:void 0,this.W=new Or(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new si}function si(){this.i=null,this.g="",this.h=!1}dn(ii,Yn),dn(ai,Yn),dn(oi,Zr),oi.prototype.g=function(){return new XMLHttpRequest},oi.prototype.i=function(){return{}},ni=new oi;var ci=45e3,li={},fi={};function hi(e,t,n){e.K=1,e.v=Li(Ni(t)),e.s=n,e.U=!0,di(e,null)}function di(e,t){e.F=Date.now(),mi(e),e.A=Ni(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Qi(n.h,"t",r),e.C=0,n=e.l.H,e.h=new si,e.g=$a(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Lr(fn(e.Ia,e,e.g),e.O)),Fr(e.V,e.g,"readystatechange",e.gb),t=e.H?Cn(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Gr(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function pi(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function vi(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=yi(e,n))==fi){4==t&&(e.o=4,Qr(14),i=!1),qr(e.j,e.m,null,"[Incomplete Response]");break}if(r==li){e.o=4,Qr(15),qr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}qr(e.j,e.m,r,null),xi(e,r)}pi(e)&&r!=fi&&r!=li&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Qr(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ba(t),t.L=!0,Qr(11))):(qr(e.j,e.m,n,"[Invalid Chunked Response]"),bi(e),wi(e))}function yi(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?fi:(n=Number(t.substring(n,r)),isNaN(n)?li:(r+=1)+n>t.length?fi:(t=t.substr(r,n),e.C=r+n,t))}function mi(e){e.Y=Date.now()+e.P,gi(e,e.P)}function gi(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=$r(fn(e.eb,e),t)}function ki(e){e.B&&(nn.clearTimeout(e.B),e.B=null)}function wi(e){0==e.l.G||e.I||Wa(e.l,e)}function bi(e){ki(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Pr(e.W),Vr(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function xi(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||na(n.i,e)))if(n.I=e.N,!e.J&&na(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Ka(n),Ra(n)}qa(n),Qr(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=$r(fn(n.ab,n),6e3));if(1>=ta(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Ha(n,11)}else if((e.J||n.g==e)&&Ka(n),!wn(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(_n(l,"spdy")||_n(l,"quic")||_n(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(ra(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Di(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Ya(r,r.H?r.la:null,r.W),d.J){ia(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(ki(p),mi(p)),r.g=d}else ja(r);0<n.l.length&&Ma(n)}else"stop"!=a[0]&&"close"!=a[0]||Ha(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Ha(n,7):Pa(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Gr(4)}catch(a){}}function _i(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(an(e)||"string"===typeof e)mn(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(an(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(an(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Ii(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Ii)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Ei(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Ti(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Ti(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Ti(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Xt=ui.prototype).setTimeout=function(e){this.P=e},Xt.gb=function(e){e=e.target;var t=this.L;t&&3==Sa(e)?t.l():this.Ia(e)},Xt.Ia=function(e){try{if(e==this.g)e:{var t=Sa(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Mn||this.g&&(this.h.h||this.g.ga()||Ca(this.g)))){this.I||4!=t||7==n||Gr(8==n||0>=r?3:2),ki(this);var i=this.g.ba();this.N=i;t:if(pi(this)){var a=Ca(this.g);e="";var o=a.length,u=4==Sa(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){bi(this),wi(this);var s="";break t}this.h.i=new nn.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!wn(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Qr(12),bi(this),wi(this);break e}qr(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,xi(this,i)}this.U?(vi(this,t,s),Mn&&this.i&&3==t&&(Fr(this.V,this.W,"tick",this.fb),this.W.start())):(qr(this.j,this.m,s,null),xi(this,s)),4==t&&bi(this),this.i&&!this.I&&(4==t?Wa(this.l,this):(this.i=!1,mi(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Qr(12)):(this.o=0,Qr(13)),bi(this),wi(this)}}}catch(t){}},Xt.fb=function(){if(this.g){var e=Sa(this.g),t=this.g.ga();this.C<t.length&&(ki(this),vi(this,e,t),this.i&&4!=e&&mi(this))}},Xt.cancel=function(){this.I=!0,bi(this)},Xt.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Gr(3),Qr(17)),bi(this),this.o=2,wi(this)):gi(this,this.Y-e)},(Xt=Ii.prototype).R=function(){Ei(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Xt.T=function(){return Ei(this),this.g.concat()},Xt.get=function(e,t){return Ti(this.h,e)?this.h[e]:t},Xt.set=function(e,t){Ti(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Xt.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Si=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ci(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Ci){this.g=void 0!==t?t:e.g,Ai(this,e.j),this.s=e.s,Oi(this,e.i),Pi(this,e.m),this.l=e.l,t=e.h;var n=new Ki;n.i=t.i,t.g&&(n.g=new Ii(t.g),n.h=t.h),Ri(this,n),this.o=e.o}else e&&(n=String(e).match(Si))?(this.g=!!t,Ai(this,n[1]||"",!0),this.s=Mi(n[2]||""),Oi(this,n[3]||"",!0),Pi(this,n[4]),this.l=Mi(n[5]||"",!0),Ri(this,n[6]||"",!0),this.o=Mi(n[7]||"")):(this.g=!!t,this.h=new Ki(null,this.g))}function Ni(e){return new Ci(e)}function Ai(e,t,n){e.j=n?Mi(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Oi(e,t,n){e.i=n?Mi(t,!0):t}function Pi(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ri(e,t,n){t instanceof Ki?(e.h=t,function(e,t){t&&!e.j&&(Wi(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Gi(this,t),Qi(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Ui(t,Bi)),e.h=new Ki(t,e.g))}function Di(e,t,n){e.h.set(t,n)}function Li(e){return Di(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Mi(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ui(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Fi),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Fi(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ci.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ui(t,Vi,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ui(t,Vi,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ui(n,"/"==n.charAt(0)?qi:ji,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ui(n,zi)),e.join("")};var Vi=/[#\/\?@]/g,ji=/[#\?:]/g,qi=/[#\?]/g,Bi=/[#\?@]/g,zi=/#/g;function Ki(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Wi(e){e.g||(e.g=new Ii,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Gi(e,t){Wi(e),t=Yi(e,t),Ti(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Ti((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Ei(e)))}function Hi(e,t){return Wi(e),t=Yi(e,t),Ti(e.g.h,t)}function Qi(e,t,n){Gi(e,t),0<n.length&&(e.i=null,e.g.set(Yi(e,t),kn(n)),e.h+=n.length)}function Yi(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Xt=Ki.prototype).add=function(e,t){Wi(this),this.i=null,e=Yi(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Xt.forEach=function(e,t){Wi(this),this.g.forEach((function(n,r){mn(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Xt.T=function(){Wi(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Xt.R=function(e){Wi(this);var t=[];if("string"===typeof e)Hi(this,e)&&(t=gn(t,this.g.get(Yi(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=gn(t,e[n])}return t},Xt.set=function(e,t){return Wi(this),this.i=null,Hi(this,e=Yi(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Xt.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Xt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var $i=re((function e(t,n){te(this,e),this.h=t,this.g=n}));function Ji(e){this.l=e||Zi,nn.PerformanceNavigationTiming?e=0<(e=nn.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(nn.g&&nn.g.Ea&&nn.g.Ea()&&nn.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Xi,Zi=10;function ea(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ta(e){return e.h?1:e.g?e.g.size:0}function na(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ra(e,t){e.g?e.g.add(t):e.h=t}function ia(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function aa(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=pe(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return kn(e.i)}function oa(){}function ua(){this.g=new oa}function sa(e,t,n){var r=n||"";try{_i(e,(function(e,n){var i=e;on(e)&&(i=wr(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ca(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function la(e){this.l=e.$b||null,this.j=e.ib||!1}function fa(e,t){mr.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=ha,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ji.prototype.cancel=function(){if(this.i=aa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=pe(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},oa.prototype.stringify=function(e){return nn.JSON.stringify(e,void 0)},oa.prototype.parse=function(e){return nn.JSON.parse(e,void 0)},dn(la,Zr),la.prototype.g=function(){return new fa(this.l,this.j)},la.prototype.i=(Xi={},function(){return Xi}),dn(fa,mr);var ha=0;function da(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function pa(e){e.readyState=4,e.l=null,e.j=null,e.A=null,va(e)}function va(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Xt=fa.prototype).open=function(e,t){if(this.readyState!=ha)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,va(this)},Xt.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||nn).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Xt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,pa(this)),this.readyState=ha},Xt.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,va(this)),this.g&&(this.readyState=3,va(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof nn.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;da(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Xt.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?pa(this):va(this),3==this.readyState&&da(this)}},Xt.Ua=function(e){this.g&&(this.response=this.responseText=e,pa(this))},Xt.Ta=function(e){this.g&&(this.response=e,pa(this))},Xt.ha=function(){this.g&&pa(this)},Xt.setRequestHeader=function(e,t){this.v.append(e,t)},Xt.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Xt.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(fa.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ya=nn.JSON.parse;function ma(e){mr.call(this),this.headers=new Ii,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ga,this.K=this.L=!1}dn(ma,mr);var ga="",ka=/^https?$/i,wa=["POST","PUT"];function ba(e){return"content-type"==e.toLowerCase()}function xa(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,_a(e),Ea(e)}function _a(e){e.D||(e.D=!0,gr(e,"complete"),gr(e,"error"))}function Ia(e){if(e.h&&"undefined"!=typeof tn&&(!e.C[1]||4!=Sa(e)||2!=e.ba()))if(e.v&&4==Sa(e))Rr(e.Fa,0,e);else if(gr(e,"readystatechange"),4==Sa(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Si)[1]||null;if(!a&&nn.self&&nn.self.location){var o=nn.self.location.protocol;a=o.substr(0,o.length-1)}i=!ka.test(a?a.toLowerCase():"")}t=i}if(t)gr(e,"complete"),gr(e,"success");else{e.m=6;try{var u=2<Sa(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",_a(e)}}finally{Ea(e)}}}function Ea(e,t){if(e.g){Ta(e);var n=e.g,r=e.C[0]?rn:null;e.g=null,e.C=null,t||gr(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Ta(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(nn.clearTimeout(e.A),e.A=null)}function Sa(e){return e.g?e.g.readyState:0}function Ca(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case ga:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Na(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Sn(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Di(e,t,n))}function Aa(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Oa(e){this.za=0,this.l=[],this.h=new jr,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Aa("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Aa("baseRetryDelayMs",5e3,e),this.$a=Aa("retryDelaySeedMs",1e4,e),this.Ya=Aa("forwardChannelMaxRetries",2,e),this.ra=Aa("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Ji(e&&e.concurrentRequestLimit),this.Ca=new ua,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Pa(e){if(Da(e),3==e.G){var t=e.V++,n=Ni(e.F);Di(n,"SID",e.J),Di(n,"RID",t),Di(n,"TYPE","terminate"),Fa(e,n),(t=new ui(e,e.h,t,void 0)).K=2,t.v=Li(Ni(n)),n=!1,nn.navigator&&nn.navigator.sendBeacon&&(n=nn.navigator.sendBeacon(t.v.toString(),"")),!n&&nn.Image&&((new Image).src=t.v,n=!0),n||(t.g=$a(t.l,null),t.g.ea(t.v)),t.F=Date.now(),mi(t)}Qa(e)}function Ra(e){e.g&&(Ba(e),e.g.cancel(),e.g=null)}function Da(e){Ra(e),e.u&&(nn.clearTimeout(e.u),e.u=null),Ka(e),e.i.cancel(),e.m&&("number"===typeof e.m&&nn.clearTimeout(e.m),e.m=null)}function La(e,t){e.l.push(new $i(e.Za++,t)),3==e.G&&Ma(e)}function Ma(e){ea(e.i)||e.m||(e.m=!0,Sr(e.Ha,e),e.C=0)}function Ua(e,t){var n;n=t?t.m:e.V++;var r=Ni(e.F);Di(r,"SID",e.J),Di(r,"RID",n),Di(r,"AID",e.U),Fa(e,r),e.o&&e.s&&Na(r,e.o,e.s),n=new ui(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Va(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),ra(e.i,n),hi(n,r,t)}function Fa(e,t){e.j&&_i({},(function(e,n){Di(t,n,e)}))}function Va(e,t,n){n=Math.min(e.l.length,n);var r=e.j?fn(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{sa(l,o,"req"+c+"_")}catch(Eo){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function ja(e){e.g||e.u||(e.Y=1,Sr(e.Ga,e),e.A=0)}function qa(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=$r(fn(e.Ga,e),Ga(e,e.A)),e.A++,!0)}function Ba(e){null!=e.B&&(nn.clearTimeout(e.B),e.B=null)}function za(e){e.g=new ui(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Ni(e.oa);Di(t,"RID","rpc"),Di(t,"SID",e.J),Di(t,"CI",e.N?"0":"1"),Di(t,"AID",e.U),Fa(e,t),Di(t,"TYPE","xmlhttp"),e.o&&e.s&&Na(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Li(Ni(t)),n.s=null,n.U=!0,di(n,e)}function Ka(e){null!=e.v&&(nn.clearTimeout(e.v),e.v=null)}function Wa(e,t){var n=null;if(e.g==t){Ka(e),Ba(e),e.g=null;var r=2}else{if(!na(e.i,t))return;n=t.D,ia(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;gr(r=Kr(),new Yr(r,n,t,i)),Ma(e)}else ja(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(ta(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=$r(fn(e.Ha,e,t),Ga(e,e.C)),e.C++,!0))}(e,t)||2==r&&qa(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ha(e,5);break;case 4:Ha(e,10);break;case 3:Ha(e,6);break;default:Ha(e,2)}}function Ga(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Ha(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=fn(e.jb,e);n||(n=new Ci("//www.google.com/images/cleardot.gif"),nn.location&&"http"==nn.location.protocol||Ai(n,"https"),Li(n)),function(e,t){var n=new jr;if(nn.Image){var r=new Image;r.onload=hn(ca,n,r,"TestLoadImage: loaded",!0,t),r.onerror=hn(ca,n,r,"TestLoadImage: error",!1,t),r.onabort=hn(ca,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=hn(ca,n,r,"TestLoadImage: timeout",!1,t),nn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Qr(2);e.G=0,e.j&&e.j.va(t),Qa(e),Da(e)}function Qa(e){e.G=0,e.I=-1,e.j&&(0==aa(e.i).length&&0==e.l.length||(e.i.i.length=0,kn(e.l),e.l.length=0),e.j.ua())}function Ya(e,t,n){var r=function(e){return e instanceof Ci?Ni(e):new Ci(e,void 0)}(n);if(""!=r.i)t&&Oi(r,t+"."+r.i),Pi(r,r.m);else{var i=nn.location;r=function(e,t,n,r){var i=new Ci(null,void 0);return e&&Ai(i,e),t&&Oi(i,t),n&&Pi(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Sn(e.aa,(function(e,t){Di(r,t,e)})),t=e.D,n=e.sa,t&&n&&Di(r,t,n),Di(r,"VER",e.ma),Fa(e,r),r}function $a(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new ma(new la({ib:!0})):new ma(e.qa)).L=e.H,t}function Ja(){}function Xa(){if(Dn&&!(10<=Number(Hn)))throw Error("Environmental error: no available transport.")}function Za(e,t){mr.call(this),this.g=new Oa(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!wn(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!wn(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new no(this)}function eo(e){ii.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function to(){ai.call(this),this.status=1}function no(e){this.g=e}(Xt=ma.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ni.g(),this.C=this.u?ei(this.u):ei(ni),this.g.onreadystatechange=fn(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void xa(this,a)}e=n||"";var i=new Ii(this.headers);r&&_i(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=ba,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=nn.FormData&&e instanceof nn.FormData,!(0<=yn(wa,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ta(this),0<this.B&&((this.K=function(e){return Dn&&Wn()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=fn(this.pa,this)):this.A=Rr(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){xa(this,a)}},Xt.pa=function(){"undefined"!=typeof tn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,gr(this,"timeout"),this.abort(8))},Xt.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,gr(this,"complete"),gr(this,"abort"),Ea(this))},Xt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ea(this,!0)),ma.Z.M.call(this)},Xt.Fa=function(){this.s||(this.F||this.v||this.l?Ia(this):this.cb())},Xt.cb=function(){Ia(this)},Xt.ba=function(){try{return 2<Sa(this)?this.g.status:-1}catch(Xi){return-1}},Xt.ga=function(){try{return this.g?this.g.responseText:""}catch(Xi){return""}},Xt.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ya(t)}},Xt.Da=function(){return this.m},Xt.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Xt=Oa.prototype).ma=8,Xt.G=1,Xt.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Xt.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new ui(this,this.h,e,void 0),n=this.s;if(this.P&&(n?An(n=Cn(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Va(this,t,r),Di(i=Ni(this.F),"RID",e),Di(i,"CVER",22),this.D&&Di(i,"X-HTTP-Session-Id",this.D),Fa(this,i),this.o&&n&&Na(i,this.o,n),ra(this.i,t),this.Ra&&Di(i,"TYPE","init"),this.ja?(Di(i,"$req",r),Di(i,"SID","null"),t.$=!0,hi(t,i,null)):hi(t,i,r),this.G=2}}else 3==this.G&&(e?Ua(this,e):0==this.l.length||ea(this.i)||Ua(this))},Xt.Ga=function(){if(this.u=null,za(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=$r(fn(this.bb,this),e)}},Xt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Qr(10),Ra(this),za(this))},Xt.ab=function(){null!=this.v&&(this.v=null,Ra(this),qa(this),Qr(19))},Xt.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Qr(2)):(this.h.info("Failed to ping google.com"),Qr(1))},(Xt=Ja.prototype).xa=function(){},Xt.wa=function(){},Xt.va=function(){},Xt.ua=function(){},Xt.Oa=function(){},Xa.prototype.g=function(e,t){return new Za(e,t)},dn(Za,mr),Za.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Sr(fn(e.hb,e,t))),Qr(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Ya(e,null,e.W),Ma(e)},Za.prototype.close=function(){Pa(this.g)},Za.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,La(this.g,t)}else this.v?((t={}).__data__=wr(e),La(this.g,t)):La(this.g,e)},Za.prototype.M=function(){this.g.j=null,delete this.j,Pa(this.g),delete this.g,Za.Z.M.call(this)},dn(eo,ii),dn(to,ai),dn(no,Ja),no.prototype.xa=function(){gr(this.g,"a")},no.prototype.wa=function(e){gr(this.g,new eo(e))},no.prototype.va=function(e){gr(this.g,new to(e))},no.prototype.ua=function(){gr(this.g,"b")},Xa.prototype.createWebChannel=Xa.prototype.g,Za.prototype.send=Za.prototype.u,Za.prototype.open=Za.prototype.m,Za.prototype.close=Za.prototype.close,Jr.NO_ERROR=0,Jr.TIMEOUT=8,Jr.HTTP_ERROR=6,Xr.COMPLETE="complete",ti.EventType=ri,ri.OPEN="a",ri.CLOSE="b",ri.ERROR="c",ri.MESSAGE="d",mr.prototype.listen=mr.prototype.N,ma.prototype.listenOnce=ma.prototype.O,ma.prototype.getLastError=ma.prototype.La,ma.prototype.getLastErrorCode=ma.prototype.Da,ma.prototype.getStatus=ma.prototype.ba,ma.prototype.getResponseJson=ma.prototype.Qa,ma.prototype.getResponseText=ma.prototype.ga,ma.prototype.send=ma.prototype.ea;var ro=en.createWebChannelTransport=function(){return new Xa},io=en.getStatEventTarget=function(){return Kr()},ao=en.ErrorCode=Jr,oo=en.EventType=Xr,uo=en.Event=Br,so=en.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},co=en.FetchXmlHttpFactory=la,lo=en.WebChannel=ti,fo=en.XhrIo=ma,ho="@firebase/firestore",po=function(){function e(t){te(this,e),this.uid=t}return re(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();po.UNAUTHENTICATED=new po(null),po.GOOGLE_CREDENTIALS=new po("google-credentials-uid"),po.FIRST_PARTY=new po("first-party-uid"),po.MOCK_USER=new po("mock-user");var vo="9.6.7",yo=new pt("@firebase/firestore");function mo(){return yo.logLevel}function go(e){if(yo.logLevel<=at.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(bo);yo.debug.apply(yo,["Firestore (".concat(vo,"): ").concat(e)].concat($e(i)))}}function ko(e){if(yo.logLevel<=at.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(bo);yo.error.apply(yo,["Firestore (".concat(vo,"): ").concat(e)].concat($e(i)))}}function wo(e){if(yo.logLevel<=at.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(bo);yo.warn.apply(yo,["Firestore (".concat(vo,"): ").concat(e)].concat($e(i)))}}function bo(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function xo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(vo,") INTERNAL ASSERTION FAILED: ")+e;throw ko(t),new Error(t)}function _o(e,t){e||xo()}function Io(e,t){return e}var Eo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},To=function(e){ie(n,e);var t=le(n);function n(e,r){var i;return te(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return re(n)}(Le),So=re((function e(){var t=this;te(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Co=re((function e(t,n){te(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),No=function(){function e(){te(this,e)}return re(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(po.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Ao=function(){function e(t){te(this,e),this.token=t,this.changeListener=null}return re(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Oo=function(){function e(t){te(this,e),this.t=t,this.currentUser=po.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return re(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new So;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new So,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Xe(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){go("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(go("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new So)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(go("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(_o("string"==typeof n.accessToken),new Co(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return _o(null===e||"string"==typeof e),new po(e)}}]),e}(),Po=re((function e(t,n,r){te(this,e),this.type="FirstParty",this.user=po.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Ro=function(){function e(t,n,r){te(this,e),this.h=t,this.l=n,this.m=r}return re(e,[{key:"getToken",value:function(){return Promise.resolve(new Po(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(po.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Do=re((function e(t){te(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Lo=function(){function e(t){te(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return re(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&go("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,go("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){go("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):go("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(_o("string"==typeof t.token),e.p=t.token,new Do(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Mo=function(){function e(t,n){var r=this;te(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return re(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Uo(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Mo.A=-1;var Fo=function(){function e(){te(this,e)}return re(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Uo(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Vo(e,t){return e<t?-1:e>t?1:0}function jo(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function qo(e){return e+"\0"}var Bo=function(){function e(t,n){if(te(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new To(Eo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new To(Eo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new To(Eo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new To(Eo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return re(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Vo(this.nanoseconds,e.nanoseconds):Vo(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),zo=function(){function e(t){te(this,e),this.timestamp=t}return re(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Bo(0,0))}}]),e}();function Ko(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Wo(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Go(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Ho=function(){function e(t,n,r){te(this,e),void 0===n?n=0:n>t.length&&xo(),void 0===r?r=t.length-n:r>t.length-n&&xo(),this.segments=t,this.offset=n,this.len=r}return re(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Qo=function(e){ie(n,e);var t=le(n);function n(){return te(this,n),t.apply(this,arguments)}return re(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new To(Eo.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,$e(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ho),Yo=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$o=function(e){ie(n,e);var t=le(n);function n(){return te(this,n),t.apply(this,arguments)}return re(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Yo.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new To(Eo.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new To(Eo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new To(Eo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new To(Eo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ho),Jo=function(){function e(t){te(this,e),this.fields=t,t.sort($o.comparator)}return re(e,[{key:"covers",value:function(e){var t,n=pe(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return jo(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Xo=function(e){function t(e){te(this,t),this.binaryString=e}return re(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Vo(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Xo.EMPTY_BYTE_STRING=new Xo("");var Zo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eu(e){if(_o(!!e),"string"==typeof e){var t=0,n=Zo.exec(e);if(_o(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:tu(e.seconds),nanos:tu(e.nanos)}}function tu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function nu(e){return"string"==typeof e?Xo.fromBase64String(e):Xo.fromUint8Array(e)}function ru(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function iu(e){var t=e.mapValue.fields.__previous_value__;return ru(t)?iu(t):t}function au(e){var t=eu(e.mapValue.fields.__local_write_time__.timestampValue);return new Bo(t.seconds,t.nanos)}var ou=re((function e(t,n,r,i,a,o,u,s){te(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),uu=function(){function e(t,n){te(this,e),this.projectId=t,this.database=n||"(default)"}return re(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function su(e){return null==e}function cu(e){return 0===e&&1/e==-1/0}function lu(e){return"number"==typeof e&&Number.isInteger(e)&&!cu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var fu=function(){function e(t){te(this,e),this.path=t}return re(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Qo.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Qo.fromString(t))}},{key:"fromName",value:function(t){return new e(Qo.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Qo.emptyPath())}},{key:"comparator",value:function(e,t){return Qo.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Qo(t.slice()))}}]),e}(),hu={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function du(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ru(e)?4:10:xo()}function pu(e,t){if(e===t)return!0;var n=du(e);if(n!==du(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return au(e).isEqual(au(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=eu(e.timestampValue),r=eu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return nu(e.bytesValue).isEqual(nu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return tu(e.geoPointValue.latitude)===tu(t.geoPointValue.latitude)&&tu(e.geoPointValue.longitude)===tu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return tu(e.integerValue)===tu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=tu(e.doubleValue),r=tu(t.doubleValue);return n===r?cu(n)===cu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return jo(e.arrayValue.values||[],t.arrayValue.values||[],pu);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ko(n)!==Ko(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!pu(n[i],r[i])))return!1;return!0}(e,t);default:return xo()}}function vu(e,t){return void 0!==(e.values||[]).find((function(e){return pu(e,t)}))}function yu(e,t){if(e===t)return 0;var n=du(e),r=du(t);if(n!==r)return Vo(n,r);switch(n){case 0:return 0;case 1:return Vo(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=tu(e.integerValue||e.doubleValue),r=tu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return mu(e.timestampValue,t.timestampValue);case 4:return mu(au(e),au(t));case 5:return Vo(e.stringValue,t.stringValue);case 6:return function(e,t){var n=nu(e),r=nu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Vo(n[i],r[i]);if(0!==a)return a}return Vo(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Vo(tu(e.latitude),tu(t.latitude));return 0!==n?n:Vo(tu(e.longitude),tu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=yu(n[i],r[i]);if(a)return a}return Vo(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Vo(r[o],a[o]);if(0!==u)return u;var s=yu(n[r[o]],i[a[o]]);if(0!==s)return s}return Vo(r.length,a.length)}(e.mapValue,t.mapValue);default:throw xo()}}function mu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Vo(e,t);var n=eu(e),r=eu(t),i=Vo(n.seconds,r.seconds);return 0!==i?i:Vo(n.nanos,r.nanos)}function gu(e){return ku(e)}function ku(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=eu(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?nu(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,fu.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=pe(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=ku(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=pe(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(ku(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):xo();var t,n}function wu(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function bu(e){return!!e&&"integerValue"in e}function xu(e){return!!e&&"arrayValue"in e}function _u(e){return!!e&&"nullValue"in e}function Iu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Eu(e){return!!e&&"mapValue"in e}function Tu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Wo(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Tu(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Tu(e.arrayValue.values[r]);return n}return Object.assign({},e)}var Su=function(){function e(t){te(this,e),this.value=t}return re(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Eu(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tu(t)}},{key:"setAll",value:function(e){var t=this,n=$o.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Tu(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Eu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return pu(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Eu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Wo(t,(function(t,n){return e[t]=n}));var r,i=pe(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Tu(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Cu(e){var t=[];return Wo(e.fields,(function(e,n){var r=new $o([e]);if(Eu(n)){var i=Cu(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=pe(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Jo(t)}var Nu=function(){function e(t,n,r,i,a,o){te(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return re(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Su.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Su.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,zo.min(),zo.min(),Su.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,zo.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,zo.min(),Su.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,zo.min(),Su.empty(),2)}}]),e}(),Au=re((function e(t,n,r,i){te(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));Au.UNKNOWN_ID=-1;var Ou=re((function e(t,n){te(this,e),this.fieldPath=t,this.kind=n})),Pu=function(){function e(t,n){te(this,e),this.sequenceNumber=t,this.offset=n}return re(e,null,[{key:"empty",value:function(){return new e(0,Ru.min())}}]),e}(),Ru=function(){function e(t,n,r){te(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return re(e,null,[{key:"min",value:function(){return new e(zo.min(),fu.empty(),-1)}}]),e}(),Du=re((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;te(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null}));function Lu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Du(e,t,n,r,i,a,o)}function Mu(e){var t=Io(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+gu(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),su(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return gu(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return gu(e)})).join(",")),t.P=n}return t.P}function Uu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!$u(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!pu(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Xu(e.startAt,t.startAt)&&Xu(e.endAt,t.endAt)}function Fu(e){return fu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Vu=function(e){ie(n,e);var t=le(n);function n(e,r,i){var a;return te(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return re(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.V(yu(t,this.value)):null!==t&&du(this.value)===du(t)&&this.V(yu(t,this.value))}},{key:"V",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return xo()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.v(e,t,r):new ju(e,t,r):"array-contains"===t?new Ku(e,r):"in"===t?new Wu(e,r):"not-in"===t?new Gu(e,r):"array-contains-any"===t?new Hu(e,r):new n(e,t,r)}},{key:"v",value:function(e,t,n){return"in"===t?new qu(e,n):new Bu(e,n)}}]),n}(function(){return re((function e(){te(this,e)}))}()),ju=function(e){ie(n,e);var t=le(n);function n(e,r,i){var a;return te(this,n),(a=t.call(this,e,r,i)).key=fu.fromName(i.referenceValue),a}return re(n,[{key:"matches",value:function(e){var t=fu.comparator(e.key,this.key);return this.V(t)}}]),n}(Vu),qu=function(e){ie(n,e);var t=le(n);function n(e,r){var i;return te(this,n),(i=t.call(this,e,"in",r)).keys=zu("in",r),i}return re(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Vu),Bu=function(e){ie(n,e);var t=le(n);function n(e,r){var i;return te(this,n),(i=t.call(this,e,"not-in",r)).keys=zu("not-in",r),i}return re(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Vu);function zu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return fu.fromName(e.referenceValue)}))}var Ku=function(e){ie(n,e);var t=le(n);function n(e,r){return te(this,n),t.call(this,e,"array-contains",r)}return re(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return xu(t)&&vu(t.arrayValue,this.value)}}]),n}(Vu),Wu=function(e){ie(n,e);var t=le(n);function n(e,r){return te(this,n),t.call(this,e,"in",r)}return re(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&vu(this.value.arrayValue,t)}}]),n}(Vu),Gu=function(e){ie(n,e);var t=le(n);function n(e,r){return te(this,n),t.call(this,e,"not-in",r)}return re(n,[{key:"matches",value:function(e){if(vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!vu(this.value.arrayValue,t)}}]),n}(Vu),Hu=function(e){ie(n,e);var t=le(n);function n(e,r){return te(this,n),t.call(this,e,"array-contains-any",r)}return re(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!xu(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return vu(t.value.arrayValue,e)}))}}]),n}(Vu),Qu=re((function e(t,n){te(this,e),this.position=t,this.inclusive=n})),Yu=re((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";te(this,e),this.field=t,this.dir=n}));function $u(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Ju(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?fu.comparator(fu.fromName(o.referenceValue),n.key):yu(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Xu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!pu(e.position[n],t.position[n]))return!1;return!0}var Zu=re((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;te(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt}));function es(e,t,n,r,i,a,o,u){return new Zu(e,t,n,r,i,a,o,u)}function ts(e){return new Zu(e)}function ns(e){return!su(e.limit)&&"F"===e.limitType}function rs(e){return!su(e.limit)&&"L"===e.limitType}function is(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function as(e){var t,n=pe(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function os(e){return null!==e.collectionGroup}function us(e){var t=Io(e);if(null===t.D){t.D=[];var n=as(t),r=is(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new Yu(n)),t.D.push(new Yu($o.keyField(),"asc"));else{var i,a=!1,o=pe(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Yu($o.keyField(),s))}}}return t.D}function ss(e){var t=Io(e);if(!t.C)if("F"===t.limitType)t.C=Lu(t.path,t.collectionGroup,us(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=pe(us(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Yu(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Qu(t.endAt.position,!t.endAt.inclusive):null,s=t.startAt?new Qu(t.startAt.position,!t.startAt.inclusive):null;t.C=Lu(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function cs(e,t,n){return new Zu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ls(e,t){return Uu(ss(e),ss(t))&&e.limitType===t.limitType}function fs(e){return"".concat(Mu(ss(e)),"|lt:").concat(e.limitType)}function hs(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(gu(t.value));var t})).join(", "),"]")),su(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return gu(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return gu(e)})).join(",")),"Target(".concat(t,")")}(ss(e)),"; limitType=").concat(e.limitType,")")}function ds(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):fu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=pe(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=pe(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Ju(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,us(e),t))&&!(e.endAt&&!function(e,t,n){var r=Ju(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,us(e),t))}(e,t)}function ps(e){return function(t,n){var r,i=!1,a=pe(us(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=vs(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function vs(e,t,n){var r=e.field.isKeyField()?fu.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?yu(r,i):xo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return xo()}}function ys(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cu(t)?"-0":t}}function ms(e){return{integerValue:""+e}}function gs(e,t){return lu(t)?ms(t):ys(e,t)}var ks=re((function e(){te(this,e),this._=void 0}));function ws(e,t,n){return e instanceof _s?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Is?Es(e,t):e instanceof Ts?Ss(e,t):function(e,t){var n=xs(e,t),r=Ns(n)+Ns(e.k);return bu(n)&&bu(e.k)?ms(r):ys(e.O,r)}(e,t)}function bs(e,t,n){return e instanceof Is?Es(e,t):e instanceof Ts?Ss(e,t):n}function xs(e,t){return e instanceof Cs?bu(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var _s=function(e){ie(n,e);var t=le(n);function n(){return te(this,n),t.apply(this,arguments)}return re(n)}(ks),Is=function(e){ie(n,e);var t=le(n);function n(e){var r;return te(this,n),(r=t.call(this)).elements=e,r}return re(n)}(ks);function Es(e,t){var n,r=As(t),i=pe(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return pu(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Ts=function(e){ie(n,e);var t=le(n);function n(e){var r;return te(this,n),(r=t.call(this)).elements=e,r}return re(n)}(ks);function Ss(e,t){var n,r=As(t),i=pe(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!pu(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Cs=function(e){ie(n,e);var t=le(n);function n(e,r){var i;return te(this,n),(i=t.call(this)).O=e,i.k=r,i}return re(n)}(ks);function Ns(e){return tu(e.integerValue||e.doubleValue)}function As(e){return xu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Os=re((function e(t,n){te(this,e),this.field=t,this.transform=n}));var Ps=re((function e(t,n){te(this,e),this.version=t,this.transformResults=n})),Rs=function(){function e(t,n){te(this,e),this.updateTime=t,this.exists=n}return re(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Ds(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Ls=re((function e(){te(this,e)}));function Ms(e,t,n){e instanceof qs?function(e,t,n){var r=e.value.clone(),i=Ks(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Bs?function(e,t,n){if(Ds(e.precondition,t)){var r=Ks(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(zs(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Us(e,t,n){e instanceof qs?function(e,t,n){if(Ds(e.precondition,t)){var r=e.value.clone(),i=Ws(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(js(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Bs?function(e,t,n){if(Ds(e.precondition,t)){var r=Ws(e.fieldTransforms,n,t),i=t.data;i.setAll(zs(e)),i.setAll(r),t.convertToFoundDocument(js(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Ds(e.precondition,t)&&t.convertToNoDocument(zo.min())}(e,t)}function Fs(e,t){var n,r=null,i=pe(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=xs(a.transform,o||null);null!=u&&(null==r&&(r=Su.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Vs(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&jo(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Is&&t instanceof Is||e instanceof Ts&&t instanceof Ts?jo(e.elements,t.elements,pu):e instanceof Cs&&t instanceof Cs?pu(e.k,t.k):e instanceof _s&&t instanceof _s}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function js(e){return e.isFoundDocument()?e.version:zo.min()}var qs=function(e){ie(n,e);var t=le(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return te(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return re(n)}(Ls),Bs=function(e){ie(n,e);var t=le(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return te(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return re(n)}(Ls);function zs(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Ks(e,t,n){var r=new Map;_o(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,bs(o,u,n[i]))}return r}function Ws(e,t,n){var r,i=new Map,a=pe(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,ws(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Gs,Hs,Qs=function(e){ie(n,e);var t=le(n);function n(e,r){var i;return te(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return re(n)}(Ls),Ys=function(e){ie(n,e);var t=le(n);function n(e,r){var i;return te(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return re(n)}(Ls),$s=re((function e(t){te(this,e),this.count=t}));function Js(e){switch(e){default:return xo();case Eo.CANCELLED:case Eo.UNKNOWN:case Eo.DEADLINE_EXCEEDED:case Eo.RESOURCE_EXHAUSTED:case Eo.INTERNAL:case Eo.UNAVAILABLE:case Eo.UNAUTHENTICATED:return!1;case Eo.INVALID_ARGUMENT:case Eo.NOT_FOUND:case Eo.ALREADY_EXISTS:case Eo.PERMISSION_DENIED:case Eo.FAILED_PRECONDITION:case Eo.ABORTED:case Eo.OUT_OF_RANGE:case Eo.UNIMPLEMENTED:case Eo.DATA_LOSS:return!0}}function Xs(e){if(void 0===e)return ko("GRPC error has no .code"),Eo.UNKNOWN;switch(e){case Gs.OK:return Eo.OK;case Gs.CANCELLED:return Eo.CANCELLED;case Gs.UNKNOWN:return Eo.UNKNOWN;case Gs.DEADLINE_EXCEEDED:return Eo.DEADLINE_EXCEEDED;case Gs.RESOURCE_EXHAUSTED:return Eo.RESOURCE_EXHAUSTED;case Gs.INTERNAL:return Eo.INTERNAL;case Gs.UNAVAILABLE:return Eo.UNAVAILABLE;case Gs.UNAUTHENTICATED:return Eo.UNAUTHENTICATED;case Gs.INVALID_ARGUMENT:return Eo.INVALID_ARGUMENT;case Gs.NOT_FOUND:return Eo.NOT_FOUND;case Gs.ALREADY_EXISTS:return Eo.ALREADY_EXISTS;case Gs.PERMISSION_DENIED:return Eo.PERMISSION_DENIED;case Gs.FAILED_PRECONDITION:return Eo.FAILED_PRECONDITION;case Gs.ABORTED:return Eo.ABORTED;case Gs.OUT_OF_RANGE:return Eo.OUT_OF_RANGE;case Gs.UNIMPLEMENTED:return Eo.UNIMPLEMENTED;case Gs.DATA_LOSS:return Eo.DATA_LOSS;default:return xo()}}(Hs=Gs||(Gs={}))[Hs.OK=0]="OK",Hs[Hs.CANCELLED=1]="CANCELLED",Hs[Hs.UNKNOWN=2]="UNKNOWN",Hs[Hs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Hs[Hs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Hs[Hs.NOT_FOUND=5]="NOT_FOUND",Hs[Hs.ALREADY_EXISTS=6]="ALREADY_EXISTS",Hs[Hs.PERMISSION_DENIED=7]="PERMISSION_DENIED",Hs[Hs.UNAUTHENTICATED=16]="UNAUTHENTICATED",Hs[Hs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Hs[Hs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Hs[Hs.ABORTED=10]="ABORTED",Hs[Hs.OUT_OF_RANGE=11]="OUT_OF_RANGE",Hs[Hs.UNIMPLEMENTED=12]="UNIMPLEMENTED",Hs[Hs.INTERNAL=13]="INTERNAL",Hs[Hs.UNAVAILABLE=14]="UNAVAILABLE",Hs[Hs.DATA_LOSS=15]="DATA_LOSS";var Zs=function(){function e(t,n){te(this,e),this.comparator=t,this.root=n||tc.EMPTY}return re(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,tc.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,tc.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new ec(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new ec(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new ec(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new ec(this.root,e,this.comparator,!0)}}]),e}(),ec=function(){function e(t,n,r,i){te(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return re(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),tc=function(){function e(t,n,r,i,a){te(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return re(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw xo();if(this.right.isRed())throw xo();var e=this.left.check();if(e!==this.right.check())throw xo();return e+(this.isRed()?0:1)}}]),e}();tc.EMPTY=null,tc.RED=!0,tc.BLACK=!1,tc.EMPTY=new(function(){function e(){te(this,e),this.size=0}return re(e,[{key:"key",get:function(){throw xo()}},{key:"value",get:function(){throw xo()}},{key:"color",get:function(){throw xo()}},{key:"left",get:function(){throw xo()}},{key:"right",get:function(){throw xo()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new tc(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var nc=function(){function e(t){te(this,e),this.comparator=t,this.data=new Zs(this.comparator)}return re(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new rc(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new rc(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),rc=function(){function e(t){te(this,e),this.iter=t}return re(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function ic(e){return e.hasNext()?e.getNext():void 0}var ac=new Zs(fu.comparator);function oc(){return ac}var uc=new Zs(fu.comparator);function sc(){return uc}var cc=new Zs(fu.comparator),lc=new nc(fu.comparator);function fc(){for(var e=lc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var hc=new nc(Vo);function dc(){return hc}var pc=function(){function e(t,n,r,i,a){te(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return re(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,vc.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(zo.min(),r,dc(),oc(),fc())}}]),e}(),vc=function(){function e(t,n,r,i,a){te(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return re(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Xo.EMPTY_BYTE_STRING,n,fc(),fc(),fc())}}]),e}(),yc=re((function e(t,n,r,i){te(this,e),this.M=t,this.removedTargetIds=n,this.key=r,this.$=i})),mc=re((function e(t,n){te(this,e),this.targetId=t,this.F=n})),gc=re((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xo.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;te(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),kc=function(){function e(){te(this,e),this.B=0,this.L=xc(),this.U=Xo.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return re(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=fc(),t=fc(),n=fc();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:xo()}})),new vc(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=xc()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),wc=function(){function e(t){te(this,e),this.nt=t,this.st=new Map,this.it=oc(),this.rt=bc(),this.ot=new nc(Vo)}return re(e,[{key:"ct",value:function(e){var t,n=pe(e.M);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.$&&e.$.isFoundDocument()?this.ut(r,e.$):this.at(r,e.key,e.$)}}catch(u){n.e(u)}finally{n.f()}var i,a=pe(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.at(o,e.key,e.$)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:xo()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.F.count,r=this.wt(t);if(r){var i=r.target;if(Fu(i))if(0===n){var a=new fu(i.path);this.at(t,a,Nu.newNoDocument(a,zo.min()))}else _o(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Fu(a.target)){var o=new fu(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.at(i,o,Nu.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=fc();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new pc(e,n,this.ot,this.it,r);return this.it=oc(),this.rt=bc(),this.ot=new nc(Vo),i}},{key:"ut",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Et(t.key).add(e))}}},{key:"at",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Et(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new kc,this.st.set(e,t)),t}},{key:"Et",value:function(e){var t=this.rt.get(e);return t||(t=new nc(Vo),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||go("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Tt(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new kc),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.at(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function bc(){return new Zs(fu.comparator)}function xc(){return new Zs(fu.comparator)}var _c={asc:"ASCENDING",desc:"DESCENDING"},Ic={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ec=re((function e(t,n){te(this,e),this.databaseId=t,this.N=n}));function Tc(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Sc(e,t){return e.N?t.toBase64():t.toUint8Array()}function Cc(e,t){return Tc(e,t.toTimestamp())}function Nc(e){return _o(!!e),zo.fromTimestamp(function(e){var t=eu(e);return new Bo(t.seconds,t.nanos)}(e))}function Ac(e,t){return function(e){return new Qo(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Oc(e){var t=Qo.fromString(e);return _o(el(t)),t}function Pc(e,t){return Ac(e.databaseId,t.path)}function Rc(e,t){var n=Oc(t);if(n.get(1)!==e.databaseId.projectId)throw new To(Eo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new To(Eo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new fu(Uc(n))}function Dc(e,t){return Ac(e.databaseId,t)}function Lc(e){var t=Oc(e);return 4===t.length?Qo.emptyPath():Uc(t)}function Mc(e){return new Qo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Uc(e){return _o(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Fc(e,t,n){return{name:Pc(e,t),fields:n.value.mapValue.fields}}function Vc(e,t,n){var r=Rc(e,t.name),i=Nc(t.updateTime),a=new Su({mapValue:{fields:t.fields}}),o=Nu.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function jc(e,t){return"found"in t?function(e,t){_o(!!t.found),t.found.name,t.found.updateTime;var n=Rc(e,t.found.name),r=Nc(t.found.updateTime),i=new Su({mapValue:{fields:t.found.fields}});return Nu.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){_o(!!t.missing),_o(!!t.readTime);var n=Rc(e,t.missing),r=Nc(t.readTime);return Nu.newNoDocument(n,r)}(e,t):xo()}function qc(e,t){var n;if(t instanceof qs)n={update:Fc(e,t.key,t.value)};else if(t instanceof Qs)n={delete:Pc(e,t.key)};else if(t instanceof Bs)n={update:Fc(e,t.key,t.data),updateMask:Zc(t.fieldMask)};else{if(!(t instanceof Ys))return xo();n={verify:Pc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof _s)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Is)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ts)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Cs)return{fieldPath:t.field.canonicalString(),increment:n.k};throw xo()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Cc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:xo()}(e,t.precondition)),n}function Bc(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Rs.updateTime(Nc(e.updateTime)):void 0!==e.exists?Rs.exists(e.exists):Rs.none()}(t.currentDocument):Rs.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)_o("REQUEST_TIME"===t.setToServerValue),n=new _s;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Is(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Ts(i)}else"increment"in t?n=new Cs(e,t.increment):xo();var a=$o.fromServerFormat(t.fieldPath);return new Os(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Rc(e,t.update.name),a=new Su({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Jo(t.map((function(e){return $o.fromServerFormat(e)})))}(t.updateMask);return new Bs(i,a,o,n,r)}return new qs(i,a,n,r)}if(t.delete){var u=Rc(e,t.delete);return new Qs(u,n)}if(t.verify){var s=Rc(e,t.verify);return new Ys(s,n)}return xo()}function zc(e,t){return{documents:[Dc(e,t.path)]}}function Kc(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Dc(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Dc(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Iu(e.value))return{unaryFilter:{field:Yc(e.field),op:"IS_NAN"}};if(_u(e.value))return{unaryFilter:{field:Yc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Iu(e.value))return{unaryFilter:{field:Yc(e.field),op:"IS_NOT_NAN"}};if(_u(e.value))return{unaryFilter:{field:Yc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yc(e.field),op:Qc(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Yc(e.field),direction:Hc(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||su(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Wc(e){var t=Lc(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){_o(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Gc(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Yu($c(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return su(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Qu(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Qu(n,t)}(n.endAt)),es(t,i,u,o,s,"F",c,l)}function Gc(e){return e?void 0!==e.unaryFilter?[Xc(e)]:void 0!==e.fieldFilter?[Jc(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Gc(e)})).reduce((function(e,t){return e.concat(t)})):xo():[]}function Hc(e){return _c[e]}function Qc(e){return Ic[e]}function Yc(e){return{fieldPath:e.canonicalString()}}function $c(e){return $o.fromServerFormat(e.fieldPath)}function Jc(e){return Vu.create($c(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xo()}}(e.fieldFilter.op),e.fieldFilter.value)}function Xc(e){switch(e.unaryFilter.op){case"IS_NAN":var t=$c(e.unaryFilter.field);return Vu.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=$c(e.unaryFilter.field);return Vu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=$c(e.unaryFilter.field);return Vu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=$c(e.unaryFilter.field);return Vu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return xo()}}function Zc(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function el(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function tl(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=rl(t)),t=nl(e.get(n),t);return rl(t)}function nl(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function rl(e){return e+"\x01\x01"}function il(e){var t=e.length;if(_o(t>=2),2===t)return _o("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Qo.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&xo(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:xo()}a=o+2}return new Qo(r)}var al=re((function e(t,n){te(this,e),this.seconds=t,this.nanoseconds=n})),ol=re((function e(t,n,r){te(this,e),this.ownerId=t,this.allowTabSynchronization=n,this.leaseTimestampMs=r}));ol.store="owner",ol.key="owner";var ul=re((function e(t,n,r){te(this,e),this.userId=t,this.lastAcknowledgedBatchId=n,this.lastStreamToken=r}));ul.store="mutationQueues",ul.keyPath="userId";var sl=re((function e(t,n,r,i,a){te(this,e),this.userId=t,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}));sl.store="mutations",sl.keyPath="batchId",sl.userMutationsIndex="userMutationsIndex",sl.userMutationsKeyPath=["userId","batchId"];var cl=function(){function e(){te(this,e)}return re(e,null,[{key:"prefixForUser",value:function(e){return[e]}},{key:"prefixForPath",value:function(e,t){return[e,tl(t)]}},{key:"key",value:function(e,t,n){return[e,tl(t),n]}}]),e}();cl.store="documentMutations",cl.PLACEHOLDER=new cl;var ll=re((function e(t,n){te(this,e),this.path=t,this.readTime=n})),fl=re((function e(t,n){te(this,e),this.path=t,this.version=n})),hl=re((function e(t,n,r,i,a,o){te(this,e),this.unknownDocument=t,this.noDocument=n,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=o}));hl.store="remoteDocuments",hl.readTimeIndex="readTimeIndex",hl.readTimeIndexPath="readTime",hl.collectionReadTimeIndex="collectionReadTimeIndex",hl.collectionReadTimeIndexPath=["parentPath","readTime"];var dl=re((function e(t){te(this,e),this.byteSize=t}));dl.store="remoteDocumentGlobal",dl.key="remoteDocumentGlobalKey";var pl=re((function e(t,n,r,i,a,o,u){te(this,e),this.targetId=t,this.canonicalId=n,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=o,this.query=u}));pl.store="targets",pl.keyPath="targetId",pl.queryTargetsIndexName="queryTargetsIndex",pl.queryTargetsKeyPath=["canonicalId","targetId"];var vl=re((function e(t,n,r){te(this,e),this.targetId=t,this.path=n,this.sequenceNumber=r}));vl.store="targetDocuments",vl.keyPath=["targetId","path"],vl.documentTargetsIndex="documentTargetsIndex",vl.documentTargetsKeyPath=["path","targetId"];var yl=re((function e(t,n,r,i){te(this,e),this.highestTargetId=t,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=r,this.targetCount=i}));yl.key="targetGlobalKey",yl.store="targetGlobal";var ml=re((function e(t,n){te(this,e),this.collectionId=t,this.parent=n}));ml.store="collectionParents",ml.keyPath=["collectionId","parent"];var gl=re((function e(t,n,r,i){te(this,e),this.clientId=t,this.updateTimeMs=n,this.networkEnabled=r,this.inForeground=i}));gl.store="clientMetadata",gl.keyPath="clientId";var kl=re((function e(t,n,r){te(this,e),this.bundleId=t,this.createTime=n,this.version=r}));kl.store="bundles",kl.keyPath="bundleId";var wl=re((function e(t,n,r){te(this,e),this.name=t,this.readTime=n,this.bundledQuery=r}));wl.store="namedQueries",wl.keyPath="name";var bl=re((function e(t,n,r){te(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r}));bl.store="indexConfiguration",bl.keyPath="indexId",bl.collectionGroupIndex="collectionGroupIndex",bl.collectionGroupIndexPath="collectionGroup";var xl=re((function e(t,n,r,i,a,o){te(this,e),this.indexId=t,this.uid=n,this.sequenceNumber=r,this.readTime=i,this.documentKey=a,this.largestBatchId=o}));xl.store="indexState",xl.keyPath=["indexId","uid"],xl.sequenceNumberIndex="sequenceNumberIndex",xl.sequenceNumberIndexPath=["uid","sequenceNumber"];var _l=re((function e(t,n,r,i,a){te(this,e),this.indexId=t,this.uid=n,this.arrayValue=r,this.directionalValue=i,this.documentKey=a}));_l.store="indexEntries",_l.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],_l.documentKeyIndex="documentKeyIndex",_l.documentKeyIndexPath=["indexId","uid","documentKey"];var Il=re((function e(t,n,r,i,a,o){te(this,e),this.userId=t,this.collectionPath=n,this.documentId=r,this.collectionGroup=i,this.largestBatchId=a,this.overlayMutation=o}));Il.store="documentOverlays",Il.keyPath=["userId","collectionPath","documentId"],Il.collectionPathOverlayIndex="collectionPathOverlayIndex",Il.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],Il.collectionGroupOverlayIndex="collectionGroupOverlayIndex",Il.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];var El=[ul.store,sl.store,cl.store,hl.store,pl.store,ol.store,yl.store,vl.store].concat([gl.store]).concat([dl.store]).concat([ml.store]).concat([kl.store,wl.store]),Tl=[].concat($e(El),[Il.store]),Sl=[].concat($e(Tl),[bl.store,xl.store,_l.store]),Cl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Nl=function(){function e(){te(this,e),this.onCommittedListeners=[]}return re(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),Al=function(){function e(t){var n=this;te(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return re(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&xo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=pe(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Ol=function(){function e(t,n){var r=this;te(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new So,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new Dl(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=Vl(e.target.error);r.At.reject(new Dl(t,n))}}return re(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(go("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"Pt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Ml(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Dl(n,t)}}}]),e}(),Pl=function(){function e(t,n,r){te(this,e),this.name=t,this.version=n,this.bt=r,12.2===e.vt(Ce())&&ko("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return re(e,[{key:"xt",value:function(){var e=Xe(et().mark((function e(t){var n=this;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return go("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Dl(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new To(Eo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new To(Eo.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Dl(t,n))},i.onupgradeneeded=function(e){go("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.bt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){go("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Ot&&(this.db.onversionchange=function(e){return n.Ot(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mt",value:function(e){this.Ot=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Xe(et().mark((function e(t,n,r,i){var a,o,u,s,c=this;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(et().mark((function e(){var n,o;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.xt(t);case 2:return c.db=e.sent,n=Ol.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.Pt(),e})).catch((function(e){return n.abort(e),Al.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,go("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return go("SimpleDb","Removing database:",e),Ul(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"Vt",value:function(){if(!De())return!1;if(e.St())return!0;var t=Ce(),n=e.vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/crwn-clothing",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"Nt",value:function(e,t){return e.store(t)}},{key:"vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Rl=function(){function e(t){te(this,e),this.$t=t,this.Ft=!1,this.Bt=null}return re(e,[{key:"isDone",get:function(){return this.Ft}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.$t=e}},{key:"done",value:function(){this.Ft=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return Ul(this.$t.delete())}}]),e}(),Dl=function(e){ie(n,e);var t=le(n);function n(e,r){var i;return te(this,n),(i=t.call(this,Eo.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return re(n)}(To);function Ll(e){return"IndexedDbTransactionError"===e.name}var Ml=function(){function e(t){te(this,e),this.store=t}return re(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(go("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(go("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ul(n)}},{key:"add",value:function(e){return go("SimpleDb","ADD",this.store.name,e,e),Ul(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Ul(this.store.get(e)).next((function(n){return void 0===n&&(n=null),go("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return go("SimpleDb","DELETE",this.store.name,e),Ul(this.store.delete(e))}},{key:"count",value:function(){return go("SimpleDb","COUNT",this.store.name),Ul(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Al((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){go("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Qt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"Wt",value:function(e){var t=this.cursor({});return new Al((function(n,r){t.onerror=function(e){var t=Vl(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new Al((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Rl(i),o=t(i.primaryKey,i.value,a);if(o instanceof Al){var u=o.catch((function(e){return a.done(),Al.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return Al.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Ul(e){return new Al((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Vl(e.target.error);n(t)}}))}var Fl=!1;function Vl(e){var t=Pl.vt(Ce());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new To("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Fl||(Fl=!0,setTimeout((function(){throw r}),0)),r}}return e}var jl=function(e){ie(n,e);var t=le(n);function n(e,r){var i;return te(this,n),(i=t.call(this)).zt=e,i.currentSequenceNumber=r,i}return re(n)}(Nl);function ql(e,t){var n=Io(e);return Pl.Nt(n.zt,t)}var Bl=function(){function e(t,n,r,i){te(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return re(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Ms(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=pe(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Us(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=pe(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Us(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(zo.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),fc())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&jo(this.mutations,e.mutations,(function(e,t){return Vs(e,t)}))&&jo(this.baseMutations,e.baseMutations,(function(e,t){return Vs(e,t)}))}}]),e}(),zl=function(){function e(t,n,r,i){te(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return re(e,null,[{key:"from",value:function(t,n,r){_o(t.mutations.length===r.length);for(var i=cc,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Kl=function(){function e(t,n){te(this,e),this.largestBatchId=t,this.mutation=n}return re(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Wl=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:zo.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:zo.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Xo.EMPTY_BYTE_STRING;te(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return re(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Gl=re((function e(t){te(this,e),this.Ht=t}));function Hl(e,t){var n;if(t.document)n=Vc(e.Ht,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=fu.fromSegments(t.noDocument.path),i=Xl(t.noDocument.readTime);n=Nu.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return xo();var a=fu.fromSegments(t.unknownDocument.path),o=Xl(t.unknownDocument.version);n=Nu.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime($l(t.readTime)),n}function Ql(e,t){var n=Yl(t.readTime),r=t.key.path.popLast().toArray();if(t.isFoundDocument()){var i=function(e,t){return{name:Pc(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Tc(e,t.version.toTimestamp())}}(e.Ht,t),a=t.hasCommittedMutations;return new hl(null,null,i,a,n,r)}if(t.isNoDocument()){var o=t.key.path.toArray(),u=Jl(t.version),s=t.hasCommittedMutations;return new hl(null,new ll(o,u),null,s,n,r)}if(t.isUnknownDocument()){var c=t.key.path.toArray(),l=Jl(t.version);return new hl(new fl(c,l),null,null,!0,n,r)}return xo()}function Yl(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function $l(e){var t=new Bo(e[0],e[1]);return zo.fromTimestamp(t)}function Jl(e){var t=e.toTimestamp();return new al(t.seconds,t.nanoseconds)}function Xl(e){var t=new Bo(e.seconds,e.nanoseconds);return zo.fromTimestamp(t)}function Zl(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Bc(e.Ht,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Bc(e.Ht,t)})),u=Bo.fromMillis(t.localWriteTimeMs);return new Bl(t.batchId,u,n,o)}function ef(e){var t,n,r=Xl(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Xl(e.lastLimboFreeSnapshotVersion):zo.min();return void 0!==e.query.documents?(_o(1===(n=e.query).documents.length),t=ss(ts(Lc(n.documents[0])))):t=function(e){return ss(Wc(e))}(e.query),new Wl(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Xo.fromBase64String(e.resumeToken))}function tf(e,t){var n,r=Jl(t.snapshotVersion),i=Jl(t.lastLimboFreeSnapshotVersion);n=Fu(t.target)?zc(e.Ht,t.target):Kc(e.Ht,t.target);var a=t.resumeToken.toBase64();return new pl(t.targetId,Mu(t.target),r,a,t.sequenceNumber,i,n)}function nf(e){var t=Wc({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?cs(t,t.limit,"L"):t}function rf(e,t){return new Kl(t.largestBatchId,Bc(e.Ht,t.overlayMutation))}function af(e,t){var n=t.path.lastSegment();return[e,tl(t.path.popLast()),n]}var of=function(){function e(){te(this,e)}return re(e,[{key:"getBundleMetadata",value:function(e,t){return uf(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Xl(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return uf(e).put({bundleId:(n=t).id,createTime:Jl(Nc(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return sf(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:nf(t.bundledQuery),readTime:Xl(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return sf(e).put(function(e){return{name:e.name,readTime:Jl(Nc(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function uf(e){return ql(e,kl.store)}function sf(e){return ql(e,wl.store)}var cf=function(){function e(t,n){te(this,e),this.O=t,this.userId=n}return re(e,[{key:"getOverlay",value:function(e,t){var n=this;return lf(e).get(af(this.userId,t)).next((function(e){return e?rf(n.O,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n){var a=new Kl(t,n);i.push(r.Yt(e,a))})),Al.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(tl(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(lf(e).Gt(Il.collectionPathOverlayIndex,i))})),Al.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=new Map,a=tl(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return lf(e).qt(Il.collectionPathOverlayIndex,o).next((function(e){var t,n=pe(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=rf(r.O,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=new Map,u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return lf(e).Qt({index:Il.collectionGroupOverlayIndex,range:u},(function(e,t,n){var u=rf(a.O,t);o.size<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Yt",value:function(e,t){return lf(e).put(function(e,t,n){var r=me(af(t,n.mutation.key),3),i=(r[0],r[1]),a=r[2];return new Il(t,i,a,n.mutation.key.getCollectionGroup(),n.largestBatchId,qc(e.Ht,n.mutation))}(this.O,this.userId,t))}}],[{key:"Jt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function lf(e){return ql(e,Il.store)}var ff=function(){function e(){te(this,e)}return re(e,[{key:"Xt",value:function(e,t){this.Zt(e,t),t.te()}},{key:"Zt",value:function(e,t){if("nullValue"in e)this.ee(t,5);else if("booleanValue"in e)this.ee(t,10),t.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(t,15),t.ne(tu(e.integerValue));else if("doubleValue"in e){var n=tu(e.doubleValue);isNaN(n)?this.ee(t,13):(this.ee(t,15),cu(n)?t.ne(0):t.ne(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ee(t,20),"string"==typeof r?t.se(r):(t.se("".concat(r.seconds||"")),t.ne(r.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,t),this.re(t);else if("bytesValue"in e)this.ee(t,30),t.oe(nu(e.bytesValue)),this.re(t);else if("referenceValue"in e)this.ce(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ee(t,45),t.ne(i.latitude||0),t.ne(i.longitude||0)}else"mapValue"in e?pu(e,hu)?this.ee(t,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,t),this.re(t)):"arrayValue"in e?(this.ae(e.arrayValue,t),this.re(t)):xo()}},{key:"ie",value:function(e,t){this.ee(t,25),this.he(e,t)}},{key:"he",value:function(e,t){t.se(e)}},{key:"ue",value:function(e,t){var n=e.fields||{};this.ee(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.ie(a,t),this.Zt(n[a],t)}}},{key:"ae",value:function(e,t){var n=e.values||[];this.ee(t,50);var r,i=pe(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.Zt(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ce",value:function(e,t){var n=this;this.ee(t,37),fu.fromName(e).path.forEach((function(e){n.ee(t,60),n.he(e,t)}))}},{key:"ee",value:function(e,t){e.ne(t)}},{key:"re",value:function(e){e.ne(2)}}]),e}();function hf(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function df(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=hf(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}ff.le=new ff;var pf=function(){function e(){te(this,e),this.buffer=new Uint8Array(1024),this.position=0}return re(e,[{key:"fe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.de(n.value),n=t.next();this._e()}},{key:"we",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.me(n.value),n=t.next();this.ge()}},{key:"ye",value:function(e){var t,n=pe(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.de(i);else if(i<2048)this.de(960|i>>>6),this.de(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.de(480|i>>>12),this.de(128|63&i>>>6),this.de(128|63&i);else{var a=r.codePointAt(0);this.de(240|a>>>18),this.de(128|63&a>>>12),this.de(128|63&a>>>6),this.de(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this._e()}},{key:"pe",value:function(e){var t,n=pe(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.me(i);else if(i<2048)this.me(960|i>>>6),this.me(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.me(480|i>>>12),this.me(128|63&i>>>6),this.me(128|63&i);else{var a=r.codePointAt(0);this.me(240|a>>>18),this.me(128|63&a>>>12),this.me(128|63&a>>>6),this.me(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ge()}},{key:"Ie",value:function(e){var t=this.Ee(e),n=df(t);this.Te(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ae",value:function(e){var t=this.Ee(e),n=df(t);this.Te(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Re",value:function(){this.Pe(255),this.Pe(255)}},{key:"be",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Te(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Ve",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"de",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"me",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"_e",value:function(){this.Pe(0),this.Pe(1)}},{key:"ge",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Te(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Te(1),this.buffer[this.position++]=~e}},{key:"Te",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),vf=function(){function e(t){te(this,e),this.Se=t}return re(e,[{key:"oe",value:function(e){this.Se.fe(e)}},{key:"se",value:function(e){this.Se.ye(e)}},{key:"ne",value:function(e){this.Se.Ie(e)}},{key:"te",value:function(){this.Se.Re()}}]),e}(),yf=function(){function e(t){te(this,e),this.Se=t}return re(e,[{key:"oe",value:function(e){this.Se.we(e)}},{key:"se",value:function(e){this.Se.pe(e)}},{key:"ne",value:function(e){this.Se.Ae(e)}},{key:"te",value:function(){this.Se.be()}}]),e}(),mf=function(){function e(){te(this,e),this.Se=new pf,this.De=new vf(this.Se),this.Ce=new yf(this.Se)}return re(e,[{key:"seed",value:function(e){this.Se.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.De:this.Ce}},{key:"Ve",value:function(){return this.Se.Ve()}},{key:"reset",value:function(){this.Se.reset()}}]),e}(),gf=re((function e(t,n,r,i){te(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}));function kf(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=fu.comparator(e.documentKey,t.documentKey))?n:0!==(n=wf(e.arrayValue,t.arrayValue))?n:wf(e.directionalValue,t.directionalValue)}function wf(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var bf=function(){function e(){te(this,e),this.xe=new xf}return re(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.xe.add(t),Al.resolve()}},{key:"getCollectionParents",value:function(e,t){return Al.resolve(this.xe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Al.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Al.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t,n){return Al.resolve(fc())}},{key:"getFieldIndex",value:function(e,t){return Al.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return Al.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Al.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return Al.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Al.resolve()}}]),e}(),xf=function(){function e(){te(this,e),this.index={}}return re(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new nc(Qo.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new nc(Qo.comparator)).toArray()}}]),e}(),_f=function(){function e(t){te(this,e),this.user=t,this.ke=new xf,this.uid=t.uid||""}return re(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.ke.add(t)}));var a={collectionId:r,parent:tl(i)};return If(e).put(a)}return Al.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[qo(t),""],!1,!0);return If(e).qt(r).next((function(e){var r,i=pe(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(il(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=Tf(e),r=function(e){return new bl(e.indexId,e.collectionGroup,e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]})))}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Tf(e),r=Sf(e),i=Ef(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t,n){return Al.resolve(fc())}},{key:"getFieldIndex",value:function(e,t){return Al.resolve(null)}},{key:"Oe",value:function(e,t){var n,r=new mf,i=pe(function(e){return e.fields.filter((function(e){return 2!==e.kind}))}(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);ff.le.Xt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Ve()}},{key:"Me",value:function(e){var t=new mf;return ff.le.Xt(e,t.Ne(0)),t.Ve()}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Tf(e),i=Sf(e);return(t?r.qt(bl.collectionGroupIndex,IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return Al.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Pu(t.sequenceNumber,new Ru(Xl(t.readTime),new fu(il(t.documentKey)),t.largestBatchId)):Pu.empty(),r=e.fields.map((function(e){var t=me(e,2),n=t[0],r=t[1];return new Ou($o.fromServerFormat(n),r)}));return new Au(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){return e.indexState.sequenceNumber-t.indexState.sequenceNumber})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Tf(e),a=Sf(e);return this.$e(e).next((function(e){return i.qt(bl.collectionGroupIndex,IDBKeyRange.bound(t,t)).next((function(t){return Al.forEach(t,(function(t){return a.put(function(e,t,n,r){return new xl(e,t.uid||"",n,Jl(r.readTime),tl(r.documentKey.path),r.largestBatchId)}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Al.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Al.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Al.forEach(a,(function(r){return n.Fe(e,t,r).next((function(t){var a=n.Be(i,r);return t.isEqual(a)?Al.resolve():n.Le(e,i,t,a)}))}))}))}))}},{key:"Ue",value:function(e,t,n){return Ef(e).put(new _l(n.indexId,this.uid,n.arrayValue,n.directionalValue,tl(t.key.path)))}},{key:"qe",value:function(e,t,n){return Ef(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,tl(t.key.path)])}},{key:"Fe",value:function(e,t,n){var r=Ef(e),i=new nc(kf);return r.Qt({index:_l.documentKeyIndex,range:IDBKeyRange.only([n.indexId,this.uid,tl(t.path)])},(function(e,r){i=i.add(new gf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"Be",value:function(e,t){var n=new nc(kf),r=this.Oe(t,e);if(null==r)return n;var i=function(e){return e.fields.find((function(e){return 2===e.kind}))}(t);if(null!=i){var a=e.data.field(i.fieldPath);if(xu(a)){var o,u=pe(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new gf(t.indexId,e.key,this.Me(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new gf(t.indexId,e.key,new Uint8Array,r));return n}},{key:"Le",value:function(e,t,n,r){var i=this;go("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var a=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=ic(a),s=ic(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=ic(o)):l?(i(u),u=ic(a)):(u=ic(a),s=ic(o))}}(n,r,kf,(function(n){a.push(i.Ue(e,t,n))}),(function(n){a.push(i.qe(e,t,n))})),Al.waitFor(a)}},{key:"$e",value:function(e){var t=1;return Sf(e).Qt({index:xl.sequenceNumberIndex,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}}]),e}();function If(e){return ql(e,ml.store)}function Ef(e){return ql(e,_l.store)}function Tf(e){return ql(e,bl.store)}function Sf(e){return ql(e,xl.store)}var Cf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Nf=function(){function e(t,n,r){te(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return re(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Af(e,t,n){var r=e.store(sl.store),i=e.store(cl.store),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Qt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){_o(1===u)})));var c,l=[],f=pe(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=cl.key(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Al.waitFor(a).next((function(){return l}))}function Of(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw xo();t=e.noDocument}return JSON.stringify(t).length}Nf.DEFAULT_COLLECTION_PERCENTILE=10,Nf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nf.DEFAULT=new Nf(41943040,Nf.DEFAULT_COLLECTION_PERCENTILE,Nf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nf.DISABLED=new Nf(-1,0,0);var Pf=function(){function e(t,n,r,i){te(this,e),this.userId=t,this.O=n,this.indexManager=r,this.referenceDelegate=i,this.Ke={}}return re(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Df(e).Qt({index:sl.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Lf(e),o=Df(e);return o.add({}).next((function(u){_o("number"==typeof u);var s,c=new Bl(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return qc(e.Ht,t)})),i=n.mutations.map((function(t){return qc(e.Ht,t)}));return new sl(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.O,i.userId,c),f=[],h=new nc((function(e,t){return Vo(e.canonicalString(),t.canonicalString())})),d=pe(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=cl.key(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,cl.PLACEHOLDER))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Ke[u]=c.keys()})),Al.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Df(e).get(t).next((function(e){return e?(_o(e.userId===n.userId),Zl(n.O,e)):null}))}},{key:"Ge",value:function(e,t){var n=this;return this.Ke[t]?Al.resolve(this.Ke[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Ke[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Df(e).Qt({index:sl.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(_o(t.batchId>=r),a=Zl(n.O,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Df(e).Qt({index:sl.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Df(e).qt(sl.userMutationsIndex,n).next((function(e){return e.map((function(e){return Zl(t.O,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=cl.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Lf(e).Qt({range:i},(function(r,i,o){var u=me(r,3),s=u[0],c=u[1],l=u[2],f=il(c);if(s===n.userId&&t.path.isEqual(f))return Df(e).get(l).next((function(e){if(!e)throw xo();_o(e.userId===n.userId),a.push(Zl(n.O,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new nc(Vo),i=[];return t.forEach((function(t){var a=cl.prefixForPath(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Lf(e).Qt({range:o},(function(e,i,a){var o=me(e,3),u=o[0],s=o[1],c=o[2],l=il(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Al.waitFor(i).next((function(){return n.je(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=cl.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new nc(Vo);return Lf(e).Qt({range:o},(function(e,t,a){var o=me(e,3),s=o[0],c=o[1],l=o[2],f=il(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.je(e,u)}))}},{key:"je",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Df(e).get(t).next((function(e){if(null===e)throw xo();_o(e.userId===n.userId),r.push(Zl(n.O,e))})))})),Al.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Af(e.zt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Qe(t.batchId)})),Al.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Qe",value:function(e){delete this.Ke[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Al.resolve();var r=IDBKeyRange.lowerBound(cl.prefixForUser(t.userId)),i=[];return Lf(e).Qt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=il(e[1]);i.push(a)}else r.done()})).next((function(){_o(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Rf(e,this.userId,t)}},{key:"We",value:function(e){var t=this;return Mf(e).get(this.userId).next((function(e){return e||new ul(t.userId,-1,"")}))}}],[{key:"Jt",value:function(t,n,r,i){return _o(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Rf(e,t,n){var r=cl.prefixForPath(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Lf(e).Qt({range:a,jt:!0},(function(e,n,r){var a=me(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Df(e){return ql(e,sl.store)}function Lf(e){return ql(e,cl.store)}function Mf(e){return ql(e,ul.store)}var Uf=function(){function e(t){te(this,e),this.ze=t}return re(e,[{key:"next",value:function(){return this.ze+=2,this.ze}}],[{key:"He",value:function(){return new e(0)}},{key:"Je",value:function(){return new e(-1)}}]),e}(),Ff=function(){function e(t,n){te(this,e),this.referenceDelegate=t,this.O=n}return re(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Ye(e).next((function(n){var r=new Uf(n.highestTargetId);return n.highestTargetId=r.next(),t.Xe(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Ye(e).next((function(e){return zo.fromTimestamp(new Bo(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Ye(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Ye(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Xe(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Ze(e,t).next((function(){return n.Ye(e).next((function(r){return r.targetCount+=1,n.tn(t,r),n.Xe(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Ze(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Vf(e).delete(t.targetId)})).next((function(){return n.Ye(e)})).next((function(t){return _o(t.targetCount>0),t.targetCount-=1,n.Xe(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Vf(e).Qt((function(o,u){var s=ef(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Al.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Vf(e).Qt((function(e,n){var r=ef(n);t(r)}))}},{key:"Ye",value:function(e){return jf(e).get(yl.key).next((function(e){return _o(null!==e),e}))}},{key:"Xe",value:function(e,t){return jf(e).put(yl.key,t)}},{key:"Ze",value:function(e,t){return Vf(e).put(tf(this.O,t))}},{key:"tn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Ye(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Mu(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Vf(e).Qt({range:r,index:pl.queryTargetsIndexName},(function(e,n,r){var a=ef(n);Uu(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=qf(e);return t.forEach((function(t){var o=tl(t.path);i.push(a.put(new vl(n,o))),i.push(r.referenceDelegate.addReference(e,n,t))})),Al.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=qf(e);return Al.forEach(t,(function(t){var a=tl(t.path);return Al.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=qf(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=qf(e),i=fc();return r.Qt({range:n,jt:!0},(function(e,t,n){var r=il(e[1]),a=new fu(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=tl(t.path),r=IDBKeyRange.bound([n],[qo(n)],!1,!0),i=0;return qf(e).Qt({index:vl.documentTargetsIndex,jt:!0,range:r},(function(e,t,n){var r=me(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Tt",value:function(e,t){return Vf(e).get(t).next((function(e){return e?ef(e):null}))}}]),e}();function Vf(e){return ql(e,pl.store)}function jf(e){return ql(e,yl.store)}function qf(e){return ql(e,vl.store)}function Bf(e){return zf.apply(this,arguments)}function zf(){return zf=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Eo.FAILED_PRECONDITION&&t.message===Cl){e.next=2;break}throw t;case 2:go("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),zf.apply(this,arguments)}function Kf(e,t){var n=me(e,2),r=n[0],i=n[1],a=me(t,2),o=a[0],u=a[1],s=Vo(r,o);return 0===s?Vo(i,u):s}var Wf=function(){function e(t){te(this,e),this.en=t,this.buffer=new nc(Kf),this.nn=0}return re(e,[{key:"sn",value:function(){return++this.nn}},{key:"rn",value:function(e){var t=[e,this.sn()];if(this.buffer.size<this.en)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Kf(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Gf=function(){function e(t,n){te(this,e),this.garbageCollector=t,this.asyncQueue=n,this.on=!1,this.cn=null}return re(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.un(e)}},{key:"stop",value:function(){this.cn&&(this.cn.cancel(),this.cn=null)}},{key:"started",get:function(){return null!==this.cn}},{key:"un",value:function(e){var t=this,n=this.on?3e5:6e4;go("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.cn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,Xe(et().mark((function n(){return et().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.cn=null,t.on=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Ll(n.t0)){n.next=12;break}go("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Bf(n.t0);case 14:return n.next=16,t.un(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),Hf=function(){function e(t,n){te(this,e),this.an=t,this.params=n}return re(e,[{key:"calculateTargetCount",value:function(e,t){return this.an.hn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Al.resolve(Mo.A);var r=new Wf(t);return this.an.forEachTarget(e,(function(e){return r.rn(e.sequenceNumber)})).next((function(){return n.an.ln(e,(function(e){return r.rn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.an.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.an.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(go("LruGarbageCollector","Garbage collection skipped; disabled"),Al.resolve(Cf)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(go("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Cf):n.fn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.an.getCacheSize(e)}},{key:"fn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(go("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),mo()<=at.DEBUG&&go("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Al.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Qf=function(){function e(t,n){te(this,e),this.db=t,this.garbageCollector=function(e,t){return new Hf(e,t)}(this,n)}return re(e,[{key:"hn",value:function(e){var t=this.dn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"dn",value:function(e){var t=0;return this.ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"ln",value:function(e,t){return this._n(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Yf(e,n)}},{key:"removeReference",value:function(e,t,n){return Yf(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Yf(e,t)}},{key:"wn",value:function(e,t){return function(e,t){var n=!1;return Mf(e).Wt((function(r){return Rf(e,r,t).next((function(e){return e&&(n=!0),Al.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this._n(e,(function(o,u){if(u<=t){var s=n.wn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,zo.min()),qf(e).delete([0,tl(o.path)])}))}));i.push(s)}})).next((function(){return Al.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Yf(e,t)}},{key:"_n",value:function(e,t){var n,r=qf(e),i=Mo.A;return r.Qt({index:vl.documentTargetsIndex},(function(e,r){var a=me(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Mo.A&&t(new fu(il(n)),i),i=s,n=u):i=Mo.A})).next((function(){i!==Mo.A&&t(new fu(il(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Yf(e,t){return qf(e).put(function(e,t){return new vl(0,tl(e.path),t)}(t,e.currentSequenceNumber))}var $f=function(){function e(t,n){te(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return re(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=pe(n);try{for(i.s();!(r=i.n()).done;){var a=me(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}},{key:"forEach",value:function(e){Wo(this.inner,(function(t,n){var r,i=pe(n);try{for(i.s();!(r=i.n()).done;){var a=me(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Go(this.inner)}}]),e}(),Jf=function(){function e(){te(this,e),this.changes=new $f((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return re(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Nu.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Al.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Xf=function(){function e(t){te(this,e),this.O=t}return re(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return th(e).put(nh(t),n)}},{key:"removeEntry",value:function(e,t){var n=th(e),r=nh(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.mn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this;return th(e).get(nh(t)).next((function(e){return n.gn(t,e)}))}},{key:"yn",value:function(e,t){var n=this;return th(e).get(nh(t)).next((function(e){return{document:n.gn(t,e),size:Of(e)}}))}},{key:"getEntries",value:function(e,t){var n=this,r=oc();return this.pn(e,t,(function(e,t){var i=n.gn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"In",value:function(e,t){var n=this,r=oc(),i=new Zs(fu.comparator);return this.pn(e,t,(function(e,t){var a=n.gn(e,t);r=r.insert(e,a),i=i.insert(e,Of(t))})).next((function(){return{documents:r,En:i}}))}},{key:"pn",value:function(e,t,n){if(t.isEmpty())return Al.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),a=i.getNext();return th(e).Qt({range:r},(function(e,t,r){for(var o=fu.fromSegments(e);a&&fu.comparator(a,o)<0;)n(a,null),a=i.getNext();a&&a.isEqual(o)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.Ut(a.path.toArray()):r.done()})).next((function(){for(;a;)n(a,null),a=i.hasNext()?i.getNext():null}))}},{key:"getAll",value:function(e,t,n){var r=this,i=oc(),a=t.length+1,o={};if(n.isEqual(zo.min())){var u=t.toArray();o.range=IDBKeyRange.lowerBound(u)}else{var s=t.toArray(),c=Yl(n);o.range=IDBKeyRange.lowerBound([s,c],!0),o.index=hl.collectionReadTimeIndex}return th(e).Qt(o,(function(e,n,o){if(e.length===a){var u=r.gn(fu.fromSegments(e),n);t.isPrefixOf(u.key.path)?i=i.insert(u.key,u):o.done()}})).next((function(){return i}))}},{key:"newChangeBuffer",value:function(e){return new Zf(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return eh(e).get(dl.key).next((function(e){return _o(!!e),e}))}},{key:"mn",value:function(e,t){return eh(e).put(dl.key,t)}},{key:"gn",value:function(e,t){if(t){var n=Hl(this.O,t);if(!n.isNoDocument()||!n.version.isEqual(zo.min()))return n}return Nu.newInvalidDocument(e)}}]),e}(),Zf=function(e){ie(n,e);var t=le(n);function n(e,r){var i;return te(this,n),(i=t.call(this)).Tn=e,i.trackRemovals=r,i.An=new $f((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return re(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new nc((function(e,t){return Vo(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.An.get(a);if(o.isValidDocument()){var s=Ql(t.Tn.O,o);i=i.add(a.path.popLast());var c=Of(s);r+=c-u,n.push(t.Tn.addEntry(e,a,s))}else if(r-=u,t.trackRemovals){var l=Ql(t.Tn.O,o.convertToNoDocument(zo.min()));n.push(t.Tn.addEntry(e,a,l))}else n.push(t.Tn.removeEntry(e,a))})),i.forEach((function(r){n.push(t.Tn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Tn.updateMetadata(e,r)),Al.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Tn.yn(e,t).next((function(e){return n.An.set(t,e.size),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Tn.In(e,t).next((function(e){var t=e.documents;return e.En.forEach((function(e,t){n.An.set(e,t)})),t}))}}]),n}(Jf);function eh(e){return ql(e,dl.store)}function th(e){return ql(e,hl.store)}function nh(e){return e.path.toArray()}var rh=function(){function e(t){te(this,e),this.O=t}return re(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new Ol("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(ol.store)}(e),function(e){e.createObjectStore(ul.store,{keyPath:ul.keyPath}),e.createObjectStore(sl.store,{keyPath:sl.keyPath,autoIncrement:!0}).createIndex(sl.userMutationsIndex,sl.userMutationsKeyPath,{unique:!0}),e.createObjectStore(cl.store)}(e),ih(e),function(e){e.createObjectStore(hl.store)}(e));var o=Al.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(vl.store),e.deleteObjectStore(pl.store),e.deleteObjectStore(yl.store)}(e),ih(e)),o=o.next((function(){return function(e){var t=e.store(yl.store),n=new yl(0,0,zo.min().toTimestamp(),0);return t.put(yl.key,n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store(sl.store).qt().next((function(n){e.deleteObjectStore(sl.store),e.createObjectStore(sl.store,{keyPath:sl.keyPath,autoIncrement:!0}).createIndex(sl.userMutationsIndex,sl.userMutationsKeyPath,{unique:!0});var r=t.store(sl.store),i=n.map((function(e){return r.put(e)}));return Al.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore(gl.store,{keyPath:gl.keyPath})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Rn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore(dl.store)}(e),i.Pn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.bn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.vn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(hl.store);t.createIndex(hl.readTimeIndex,hl.readTimeIndexPath,{unique:!1}),t.createIndex(hl.collectionReadTimeIndex,hl.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(o=o.next((function(){return i.Vn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore(kl.store,{keyPath:kl.keyPath})}(e),function(e){e.createObjectStore(wl.store,{keyPath:wl.keyPath})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore(Il.store,{keyPath:Il.keyPath});t.createIndex(Il.collectionPathOverlayIndex,Il.collectionPathOverlayIndexPath,{unique:!1}),t.createIndex(Il.collectionGroupOverlayIndex,Il.collectionGroupOverlayIndexPath,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){!function(e){e.createObjectStore(bl.store,{keyPath:bl.keyPath,autoIncrement:!0}).createIndex(bl.collectionGroupIndex,bl.collectionGroupIndexPath,{unique:!1}),e.createObjectStore(xl.store,{keyPath:xl.keyPath}).createIndex(xl.sequenceNumberIndex,xl.sequenceNumberIndexPath,{unique:!1}),e.createObjectStore(_l.store,{keyPath:_l.keyPath}).createIndex(_l.documentKeyIndex,_l.documentKeyIndexPath,{unique:!1})}(e)}))),o}},{key:"Pn",value:function(e){var t=0;return e.store(hl.store).Qt((function(e,n){t+=Of(n)})).next((function(){var n=new dl(t);return e.store(dl.store).put(dl.key,n)}))}},{key:"Rn",value:function(e){var t=this,n=e.store(ul.store),r=e.store(sl.store);return n.qt().next((function(n){return Al.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt(sl.userMutationsIndex,i).next((function(r){return Al.forEach(r,(function(r){_o(r.userId===n.userId);var i=Zl(t.O,r);return Af(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"bn",value:function(e){var t=e.store(vl.store),n=e.store(hl.store);return e.store(yl.store).get(yl.key).next((function(e){var r=[];return n.Qt((function(n,i){var a=new Qo(n),o=function(e){return[0,tl(e)]}(a);r.push(t.get(o).next((function(n){return n?Al.resolve():function(n){return t.put(new vl(0,tl(n),e.highestListenSequenceNumber))}(a)})))})).next((function(){return Al.waitFor(r)}))}))}},{key:"vn",value:function(e,t){e.createObjectStore(ml.store,{keyPath:ml.keyPath});var n=t.store(ml.store),r=new xf,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:tl(i)})}};return t.store(hl.store).Qt({jt:!0},(function(e,t){var n=new Qo(e);return i(n.popLast())})).next((function(){return t.store(cl.store).Qt({jt:!0},(function(e,t){var n=me(e,3),r=(n[0],n[1]),a=(n[2],il(r));return i(a.popLast())}))}))}},{key:"Vn",value:function(e){var t=this,n=e.store(pl.store);return n.Qt((function(e,r){var i=ef(r),a=tf(t.O,i);return n.put(a)}))}}]),e}();function ih(e){e.createObjectStore(vl.store,{keyPath:vl.keyPath}).createIndex(vl.documentTargetsIndex,vl.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(pl.store,{keyPath:pl.keyPath}).createIndex(pl.queryTargetsIndexName,pl.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(yl.store)}var ah="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",oh=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:12;if(te(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Sn=a,this.window=o,this.document=u,this.Dn=c,this.Cn=l,this.schemaVersion=f,this.Nn=null,this.xn=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kn=null,this.inForeground=!1,this.On=null,this.Mn=null,this.$n=Number.NEGATIVE_INFINITY,this.Fn=function(e){return Promise.resolve()},!e.Vt())throw new To(Eo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Qf(this,i),this.Bn=n+"main",this.O=new Gl(s),this.Ln=new Pl(this.Bn,this.schemaVersion,new rh(this.O)),this.Un=new Ff(this.referenceDelegate,this.O),this.qn=function(e){return new Xf(e)}(this.O),this.Kn=new of,this.window&&this.window.localStorage?this.Gn=this.window.localStorage:(this.Gn=null,!1===l&&ko("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return re(e,[{key:"start",value:function(){var e=this;return this.jn().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new To(Eo.FAILED_PRECONDITION,ah);return e.Qn(),e.Wn(),e.zn(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Un.getHighestSequenceNumber(t)}))})).then((function(t){e.Nn=new Mo(t,e.Dn)})).then((function(){e.xn=!0})).catch((function(t){return e.Ln&&e.Ln.close(),Promise.reject(t)}))}},{key:"Hn",value:function(e){var t=this;return this.Fn=function(){var n=Xe(et().mark((function n(r){return et().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ln.Mt(function(){var t=Xe(et().mark((function t(n){return et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Sn.enqueueAndForget(Xe(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.jn();case 4:case"end":return e.stop()}}),e)})))))}},{key:"jn",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return sh(t).put(new gl(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.Jn(t).next((function(t){t||(e.isPrimary=!1,e.Sn.enqueueRetryable((function(){return e.Fn(!1)})))}))})).next((function(){return e.Yn(t)})).next((function(n){return e.isPrimary&&!n?e.Xn(t).next((function(){return!1})):!!n&&e.Zn(t).next((function(){return!0}))}))})).catch((function(t){if(Ll(t))return go("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return go("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Sn.enqueueRetryable((function(){return e.Fn(t)})),e.isPrimary=t}))}},{key:"Jn",value:function(e){var t=this;return uh(e).get(ol.key).next((function(e){return Al.resolve(t.ts(e))}))}},{key:"es",value:function(e){return sh(e).delete(this.clientId)}},{key:"ns",value:function(){var e=Xe(et().mark((function e(){var t,n,r,i,a=this;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.ss(this.$n,18e5)){e.next=6;break}return this.$n=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=ql(e,gl.store);return t.qt().next((function(e){var n=a.rs(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Al.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Gn){n=pe(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Gn.removeItem(this.os(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"zn",value:function(){var e=this;this.Mn=this.Sn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.jn().then((function(){return e.ns()})).then((function(){return e.zn()}))}))}},{key:"ts",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Yn",value:function(e){var t=this;return this.Cn?Al.resolve(!0):uh(e).get(ol.key).next((function(n){if(null!==n&&t.ss(n.leaseTimestampMs,5e3)&&!t.cs(n.ownerId)){if(t.ts(n)&&t.networkEnabled)return!0;if(!t.ts(n)){if(!n.allowTabSynchronization)throw new To(Eo.FAILED_PRECONDITION,ah);return!1}}return!(!t.networkEnabled||!t.inForeground)||sh(e).qt().next((function(e){return void 0===t.rs(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&go("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Xe(et().mark((function e(){var t=this;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.xn=!1,this.us(),this.Mn&&(this.Mn.cancel(),this.Mn=null),this.hs(),this.ls(),e.next=7,this.Ln.runTransaction("shutdown","readwrite",[ol.store,gl.store],(function(e){var n=new jl(e,Mo.A);return t.Xn(n).next((function(){return t.es(n)}))}));case 7:this.Ln.close(),this.fs();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"rs",value:function(e,t){var n=this;return e.filter((function(e){return n.ss(e.updateTimeMs,t)&&!n.cs(e.clientId)}))}},{key:"ds",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return sh(t).qt().next((function(t){return e.rs(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.xn}},{key:"getMutationQueue",value:function(e,t){return Pf.Jt(e,this.O,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Un}},{key:"getRemoteDocumentCache",value:function(){return this.qn}},{key:"getIndexManager",value:function(e){return new _f(e)}},{key:"getDocumentOverlayCache",value:function(e){return cf.Jt(this.O,e)}},{key:"getBundleCache",value:function(){return this.Kn}},{key:"runTransaction",value:function(e,t,n){var r=this;go("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=13===(i=this.schemaVersion)?Sl:12===i?Tl:11===i?El:void xo();return this.Ln.runTransaction(e,o,u,(function(i){return a=new jl(i,r.Nn?r.Nn.next():Mo.A),"readwrite-primary"===t?r.Jn(a).next((function(e){return!!e||r.Yn(a)})).next((function(t){if(!t)throw ko("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Sn.enqueueRetryable((function(){return r.Fn(!1)})),new To(Eo.FAILED_PRECONDITION,Cl);return n(a)})).next((function(e){return r.Zn(a).next((function(){return e}))})):r._s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"_s",value:function(e){var t=this;return uh(e).get(ol.key).next((function(e){if(null!==e&&t.ss(e.leaseTimestampMs,5e3)&&!t.cs(e.ownerId)&&!t.ts(e)&&!(t.Cn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new To(Eo.FAILED_PRECONDITION,ah)}))}},{key:"Zn",value:function(e){var t=new ol(this.clientId,this.allowTabSynchronization,Date.now());return uh(e).put(ol.key,t)}},{key:"Xn",value:function(e){var t=this,n=uh(e);return n.get(ol.key).next((function(e){return t.ts(e)?(go("IndexedDbPersistence","Releasing primary lease."),n.delete(ol.key)):Al.resolve()}))}},{key:"ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(ko("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"Qn",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.On=function(){e.Sn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.jn()}))},this.document.addEventListener("visibilitychange",this.On),this.inForeground="visible"===this.document.visibilityState)}},{key:"hs",value:function(){this.On&&(this.document.removeEventListener("visibilitychange",this.On),this.On=null)}},{key:"Wn",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.kn=function(){t.us(),!Ae()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Sn.enterRestrictedMode(!0),t.Sn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.kn))}},{key:"ls",value:function(){this.kn&&(this.window.removeEventListener("pagehide",this.kn),this.kn=null)}},{key:"cs",value:function(e){var t;try{var n=null!==(null===(t=this.Gn)||void 0===t?void 0:t.getItem(this.os(e)));return go("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return ko("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"us",value:function(){if(this.Gn)try{this.Gn.setItem(this.os(this.clientId),String(Date.now()))}catch(dn){ko("Failed to set zombie client id.",dn)}}},{key:"fs",value:function(){if(this.Gn)try{this.Gn.removeItem(this.os(this.clientId))}catch(dn){}}},{key:"os",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"Vt",value:function(){return Pl.Vt()}}]),e}();function uh(e){return ql(e,ol.store)}function sh(e){return ql(e,gl.store)}function ch(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var lh=re((function e(t,n){te(this,e),this.progress=t,this.ws=n})),fh=function(){function e(t,n,r){te(this,e),this.qn=t,this.gs=n,this.indexManager=r}return re(e,[{key:"ys",value:function(e,t){var n=this;return this.gs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.ps(e,t,r)}))}},{key:"ps",value:function(e,t,n){return this.qn.getEntry(e,t).next((function(e){var t,r=pe(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"Is",value:function(e,t){e.forEach((function(e,n){var r,i=pe(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Es",value:function(e,t){var n=this;return this.qn.getEntries(e,t).next((function(t){return n.Ts(e,t).next((function(){return t}))}))}},{key:"Ts",value:function(e,t){var n=this;return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.Is(t,e)}))}},{key:"As",value:function(e,t,n){return function(e){return fu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Rs(e,t.path):os(t)?this.Ps(e,t,n):this.bs(e,t,n)}},{key:"Rs",value:function(e,t){return this.ys(e,new fu(t)).next((function(e){var t=sc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ps",value:function(e,t,n){var r=this,i=t.collectionGroup,a=sc();return this.indexManager.getCollectionParents(e,i).next((function(o){return Al.forEach(o,(function(o){var u=function(e,t){return new Zu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.bs(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"bs",value:function(e,t,n){var r,i=this;return this.qn.getAll(e,t.path,n).next((function(n){return r=n,i.gs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=pe(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=pe(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=Nu.newInvalidDocument(s),r=r.insert(s,c)),Us(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){ds(t,n)||(r=r.remove(e))})),r}))}}]),e}(),hh=function(){function e(t,n,r,i){te(this,e),this.targetId=t,this.fromCache=n,this.vs=r,this.Vs=i}return re(e,null,[{key:"Ss",value:function(t,n){var r,i=fc(),a=fc(),o=pe(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),dh=function(){function e(){te(this,e)}return re(e,[{key:"Ds",value:function(e){this.Cs=e}},{key:"As",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(zo.min())?this.Ns(e,t):this.Cs.Es(e,r).next((function(a){var o=i.xs(t,a);return(ns(t)||rs(t))&&i.ks(t.limitType,o,r,n)?i.Ns(e,t):(mo()<=at.DEBUG&&go("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),hs(t)),i.Cs.As(e,t,n).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"xs",value:function(e,t){var n=new nc(ps(e));return t.forEach((function(t,r){ds(e,r)&&(n=n.add(r))})),n}},{key:"ks",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ns",value:function(e,t){return mo()<=at.DEBUG&&go("QueryEngine","Using full collection scan to execute query:",hs(t)),this.Cs.As(e,t,zo.min())}}]),e}(),ph=function(){function e(t,n,r,i){te(this,e),this.persistence=t,this.Os=n,this.O=i,this.Ms=new Zs(Vo),this.$s=new $f((function(e){return Mu(e)}),Uu),this.Fs=zo.min(),this.Bs=t.getRemoteDocumentCache(),this.Un=t.getTargetCache(),this.Kn=t.getBundleCache(),this.Ls(r)}return re(e,[{key:"Ls",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new fh(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ms)}))}}]),e}();function vh(e,t,n,r){return new ph(e,t,n,r)}function yh(e,t){return mh.apply(this,arguments)}function mh(){return mh=Xe(et().mark((function e(t,n){var r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Io(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.gs.getAllMutationBatches(e).next((function(i){return t=i,r.Ls(n),r.gs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=fc(),s=pe(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=pe(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=pe(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=pe(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.Us.Es(e,u).next((function(e){return{qs:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),mh.apply(this,arguments)}function gh(e,t){var n=Io(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Al.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);_o(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.gs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.gs.performConsistencyCheck(e)})).next((function(){return n.Us.Es(e,r)}))}))}function kh(e){var t=Io(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Un.getLastRemoteSnapshotVersion(e)}))}function wh(e,t){var n=Io(e),r=t.snapshotVersion,i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.Ms;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Un.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Un.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Xo.EMPTY_BYTE_STRING,zo.min()).withLastLimboFreeSnapshotVersion(zo.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Un.updateTargetData(e,c))}}));var u=oc();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(bh(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(zo.min())){var s=n.Un.getLastRemoteSnapshotVersion(e).next((function(t){return n.Un.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return Al.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.Us.Ts(e,u)})).next((function(){return u}))})).then((function(e){return n.Ms=i,e}))}function bh(e,t,n){var r=fc();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=oc();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(zo.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):go("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function xh(e,t){var n=Io(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.gs.getNextMutationBatchAfterBatchId(e,t)}))}function _h(e,t){var n=Io(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Un.getTargetData(e,t).next((function(i){return i?(r=i,Al.resolve(r)):n.Un.allocateTargetId(e).next((function(i){return r=new Wl(t,i,0,e.currentSequenceNumber),n.Un.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.$s.set(t,e.targetId)),e}))}function Ih(e,t,n){return Eh.apply(this,arguments)}function Eh(){return Eh=Xe(et().mark((function e(t,n,r){var i,a,o;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Io(t),a=i.Ms.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Ll(e.t1)){e.next=12;break}throw e.t1;case 12:go("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ms=i.Ms.remove(n),i.$s.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Eh.apply(this,arguments)}function Th(e,t,n){var r=Io(e),i=zo.min(),a=fc();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Io(e),i=r.$s.get(n);return void 0!==i?Al.resolve(r.Ms.get(i)):r.Un.getTargetData(t,n)}(r,e,ss(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Un.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Os.As(e,t,n?i:zo.min(),n?a:fc())})).next((function(e){return{documents:e,Ks:a}}))}))}function Sh(e,t){var n=Io(e),r=Io(n.Un),i=n.Ms.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Tt(e,t).next((function(e){return e?e.target:null}))}))}function Ch(e){var t=Io(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=Io(e),i=oc(),a=Yl(n),o=th(t),u=IDBKeyRange.lowerBound(a,!0);return o.Qt({index:hl.readTimeIndex,range:u},(function(e,t){var n=Hl(r.O,t);i=i.insert(n.key,n),a=t.readTime})).next((function(){return{ws:i,readTime:$l(a)}}))}(t.Bs,e,t.Fs)})).then((function(e){var n=e.ws,r=e.readTime;return t.Fs=r,n}))}function Nh(e){return Ah.apply(this,arguments)}function Ah(){return Ah=Xe(et().mark((function e(t){var n;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Io(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=th(e),n=zo.min();return t.Qt({index:hl.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=$l(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){n.Fs=e})));case 2:case"end":return e.stop()}}),e)}))),Ah.apply(this,arguments)}function Oh(e,t,n,r){return Ph.apply(this,arguments)}function Ph(){return Ph=Xe(et().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Io(t),o=fc(),u=oc(),s=pe(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Gs(l.metadata.name),l.document&&(o=o.add(f)),(h=n.js(l)).setReadTime(n.Qs(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Bs.newChangeBuffer({trackRemovals:!0}),e.next=7,_h(a,function(e){return ss(ts(Qo.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return bh(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Un.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Un.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.Us.Ts(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),Ph.apply(this,arguments)}function Rh(e,t){return Dh.apply(this,arguments)}function Dh(){return Dh=Xe(et().mark((function e(t,n){var r,i,a,o=arguments;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:fc(),e.next=3,_h(t,ss(nf(n.bundledQuery)));case 3:return i=e.sent,a=Io(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Nc(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Kn.saveNamedQuery(e,n);var o=i.withResumeToken(Xo.EMPTY_BYTE_STRING,t);return a.Ms=a.Ms.insert(o.targetId,o),a.Un.updateTargetData(e,o).next((function(){return a.Un.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Un.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Kn.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Dh.apply(this,arguments)}var Lh=function(){function e(t){te(this,e),this.O=t,this.Ws=new Map,this.zs=new Map}return re(e,[{key:"getBundleMetadata",value:function(e,t){return Al.resolve(this.Ws.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Ws.set(t.id,{id:(n=t).id,version:n.version,createTime:Nc(n.createTime)}),Al.resolve()}},{key:"getNamedQuery",value:function(e,t){return Al.resolve(this.zs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.zs.set(t.name,function(e){return{name:e.name,query:nf(e.bundledQuery),readTime:Nc(e.readTime)}}(t)),Al.resolve()}}]),e}(),Mh=function(){function e(){te(this,e),this.overlays=new Zs(fu.comparator),this.Hs=new Map}return re(e,[{key:"getOverlay",value:function(e,t){return Al.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n){r.Yt(e,t,n)})),Al.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Hs.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Hs.delete(n)),Al.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=new Map,i=t.length+1,a=new fu(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Al.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Zs((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=new Map,i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=new Map,c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(t,e)})),!(s.size>=r)););return Al.resolve(s)}},{key:"Yt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);null!==r&&this.Hs.get(r.largestBatchId).delete(n.key),this.overlays=this.overlays.insert(n.key,new Kl(t,n));var i=this.Hs.get(t);void 0===i&&(i=new Set,this.Hs.set(t,i)),i.add(n.key)}}}]),e}(),Uh=function(){function e(){te(this,e),this.Js=new nc(Fh.Ys),this.Xs=new nc(Fh.Zs)}return re(e,[{key:"isEmpty",value:function(){return this.Js.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Fh(e,t);this.Js=this.Js.add(n),this.Xs=this.Xs.add(n)}},{key:"ti",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ei(new Fh(e,t))}},{key:"ni",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"si",value:function(e){var t=this,n=new fu(new Qo([])),r=new Fh(n,e),i=new Fh(n,e+1),a=[];return this.Xs.forEachInRange([r,i],(function(e){t.ei(e),a.push(e.key)})),a}},{key:"ii",value:function(){var e=this;this.Js.forEach((function(t){return e.ei(t)}))}},{key:"ei",value:function(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}},{key:"ri",value:function(e){var t=new fu(new Qo([])),n=new Fh(t,e),r=new Fh(t,e+1),i=fc();return this.Xs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Fh(e,0),n=this.Js.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Fh=function(){function e(t,n){te(this,e),this.key=t,this.oi=n}return re(e,null,[{key:"Ys",value:function(e,t){return fu.comparator(e.key,t.key)||Vo(e.oi,t.oi)}},{key:"Zs",value:function(e,t){return Vo(e.oi,t.oi)||fu.comparator(e.key,t.key)}}]),e}(),Vh=function(){function e(t,n){te(this,e),this.indexManager=t,this.referenceDelegate=n,this.gs=[],this.ci=1,this.ui=new nc(Fh.Ys)}return re(e,[{key:"checkEmpty",value:function(e){return Al.resolve(0===this.gs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ci;this.ci++,this.gs.length>0&&this.gs[this.gs.length-1];var a=new Bl(i,t,n,r);this.gs.push(a);var o,u=pe(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ui=this.ui.add(new Fh(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Al.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Al.resolve(this.ai(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.hi(n),i=r<0?0:r;return Al.resolve(this.gs.length>i?this.gs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Al.resolve(0===this.gs.length?-1:this.ci-1)}},{key:"getAllMutationBatches",value:function(e){return Al.resolve(this.gs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Fh(t,0),i=new Fh(t,Number.POSITIVE_INFINITY),a=[];return this.ui.forEachInRange([r,i],(function(e){var t=n.ai(e.oi);a.push(t)})),Al.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new nc(Vo);return t.forEach((function(e){var t=new Fh(e,0),i=new Fh(e,Number.POSITIVE_INFINITY);n.ui.forEachInRange([t,i],(function(e){r=r.add(e.oi)}))})),Al.resolve(this.li(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;fu.isDocumentKey(i)||(i=i.child(""));var a=new Fh(new fu(i),0),o=new nc(Vo);return this.ui.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.oi)),!0)}),a),Al.resolve(this.li(o))}},{key:"li",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ai(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;_o(0===this.fi(t.batchId,"removed")),this.gs.shift();var r=this.ui;return Al.forEach(t.mutations,(function(i){var a=new Fh(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ui=r}))}},{key:"Qe",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Fh(t,0),r=this.ui.firstAfterOrEqual(n);return Al.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.gs.length,Al.resolve()}},{key:"fi",value:function(e,t){return this.hi(e)}},{key:"hi",value:function(e){return 0===this.gs.length?0:e-this.gs[0].batchId}},{key:"ai",value:function(e){var t=this.hi(e);return t<0||t>=this.gs.length?null:this.gs[t]}}]),e}(),jh=function(){function e(t){te(this,e),this.di=t,this.docs=new Zs(fu.comparator),this.size=0}return re(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.di(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Al.resolve(n?n.document.mutableCopy():Nu.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=oc();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Nu.newInvalidDocument(e))})),Al.resolve(r)}},{key:"getAll",value:function(e,t,n){for(var r=oc(),i=new fu(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||s.readTime.compareTo(n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Al.resolve(r)}},{key:"_i",value:function(e,t){return Al.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new qh(this)}},{key:"getSize",value:function(e){return Al.resolve(this.size)}}]),e}(),qh=function(e){ie(n,e);var t=le(n);function n(e){var r;return te(this,n),(r=t.call(this)).Tn=e,r}return re(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Tn.addEntry(e,i)):t.Tn.removeEntry(r)})),Al.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Tn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Tn.getEntries(e,t)}}]),n}(Jf),Bh=function(){function e(t){te(this,e),this.persistence=t,this.wi=new $f((function(e){return Mu(e)}),Uu),this.lastRemoteSnapshotVersion=zo.min(),this.highestTargetId=0,this.mi=0,this.gi=new Uh,this.targetCount=0,this.yi=Uf.He()}return re(e,[{key:"forEachTarget",value:function(e,t){return this.wi.forEach((function(e,n){return t(n)})),Al.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Al.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Al.resolve(this.mi)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.yi.next(),Al.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.mi&&(this.mi=t),Al.resolve()}},{key:"Ze",value:function(e){this.wi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.yi=new Uf(t),this.highestTargetId=t),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Ze(t),this.targetCount+=1,Al.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Ze(t),Al.resolve()}},{key:"removeTargetData",value:function(e,t){return this.wi.delete(t.target),this.gi.si(t.targetId),this.targetCount-=1,Al.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.wi.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.wi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Al.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Al.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.wi.get(t)||null;return Al.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.gi.ti(t,n),Al.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.gi.ni(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Al.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.gi.si(t),Al.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.gi.ri(t);return Al.resolve(n)}},{key:"containsKey",value:function(e,t){return Al.resolve(this.gi.containsKey(t))}}]),e}(),zh=function(){function e(t,n){var r=this;te(this,e),this.pi={},this.overlays={},this.Nn=new Mo(0),this.xn=!1,this.xn=!0,this.referenceDelegate=t(this),this.Un=new Bh(this),this.indexManager=new bf,this.qn=new jh((function(e){return r.referenceDelegate.Ii(e)})),this.O=new Gl(n),this.Kn=new Lh(this.O)}return re(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.xn=!1,Promise.resolve()}},{key:"started",get:function(){return this.xn}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Mh,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.pi[e.toKey()];return n||(n=new Vh(t,this.referenceDelegate),this.pi[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Un}},{key:"getRemoteDocumentCache",value:function(){return this.qn}},{key:"getBundleCache",value:function(){return this.Kn}},{key:"runTransaction",value:function(e,t,n){var r=this;go("MemoryPersistence","Starting transaction:",e);var i=new Kh(this.Nn.next());return this.referenceDelegate.Ei(),n(i).next((function(e){return r.referenceDelegate.Ti(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ai",value:function(e,t){return Al.or(Object.values(this.pi).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Kh=function(e){ie(n,e);var t=le(n);function n(e){var r;return te(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return re(n)}(Nl),Wh=function(){function e(t){te(this,e),this.persistence=t,this.Ri=new Uh,this.Pi=null}return re(e,[{key:"vi",get:function(){if(this.Pi)return this.Pi;throw xo()}},{key:"addReference",value:function(e,t,n){return this.Ri.addReference(n,t),this.vi.delete(n.toString()),Al.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Ri.removeReference(n,t),this.vi.add(n.toString()),Al.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.vi.add(t.toString()),Al.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Ri.si(t.targetId).forEach((function(e){return n.vi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.vi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ei",value:function(){this.Pi=new Set}},{key:"Ti",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Al.forEach(this.vi,(function(r){var i=fu.fromPath(r);return t.Vi(e,i).next((function(e){e||n.removeEntry(i,zo.min())}))})).next((function(){return t.Pi=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Vi(e,t).next((function(e){e?n.vi.delete(t.toString()):n.vi.add(t.toString())}))}},{key:"Ii",value:function(e){return 0}},{key:"Vi",value:function(e,t){var n=this;return Al.or([function(){return Al.resolve(n.Ri.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ai(e,t)}])}}],[{key:"bi",value:function(t){return new e(t)}}]),e}();function Gh(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Hh(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Qh(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Yh=function(){function e(t,n,r,i){te(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return re(e,[{key:"Di",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Si",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new To(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(ko("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),$h=function(){function e(t,n,r){te(this,e),this.targetId=t,this.state=n,this.error=r}return re(e,[{key:"Di",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Si",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new To(i.error.code,i.error.message))),a?new e(t,i.state,r):(ko("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Jh=function(){function e(t,n){te(this,e),this.clientId=t,this.activeTargetIds=n}return re(e,null,[{key:"Si",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=dc(),o=0;i&&o<r.activeTargetIds.length;++o)i=lu(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(ko("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Xh=function(){function e(t,n){te(this,e),this.clientId=t,this.onlineState=n}return re(e,null,[{key:"Si",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(ko("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Zh=function(){function e(){te(this,e),this.activeTargetIds=dc()}return re(e,[{key:"Ci",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ni",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Di",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),ed=function(){function e(t,n,r,i,a){te(this,e),this.window=t,this.Sn=n,this.persistenceKey=r,this.xi=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ki=this.Oi.bind(this),this.Mi=new Zs(Vo),this.started=!1,this.$i=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Fi=Gh(this.persistenceKey,this.xi),this.Bi=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Mi=this.Mi.insert(this.xi,new Zh),this.Li=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Ui=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.qi=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Ki=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Gi=function(e){return"firestore_bundle_loaded_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ki)}return re(e,[{key:"start",value:function(){var e=Xe(et().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.ds();case 2:t=e.sent,n=pe(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.xi){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Gh(this.persistenceKey,i)))&&(o=Jh.Si(i,a))&&(this.Mi=this.Mi.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.ji(),(u=this.storage.getItem(this.Ki))&&(s=this.Qi(u))&&this.Wi(s),c=pe(this.$i);try{for(c.s();!(l=c.n()).done;)f=l.value,this.Oi(f)}catch(d){c.e(d)}finally{c.f()}this.$i=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Bi,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.zi(this.Mi)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.Mi.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Hi(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Hi(e,t,n),this.Ji(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Qh(this.persistenceKey,e));if(n){var r=$h.Si(e,n);r&&(t=r.state)}}return this.Yi.Ci(e),this.ji(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Yi.Ni(e),this.ji()}},{key:"isLocalQueryTarget",value:function(e){return this.Yi.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Qh(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Xi(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ji(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Zi(e)}},{key:"notifyBundleLoaded",value:function(){this.tr()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ki),this.removeItem(this.Fi),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return go("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){go("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){go("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"Oi",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(go("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Fi)return void ko("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Sn.enqueueRetryable(Xe(et().mark((function e(){var r,i,a,o,u,s;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.Li.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.er(n.key),e.abrupt("return",t.nr(r,null));case 6:if(!(i=t.sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.nr(i.clientId,i));case 9:e.next=39;break;case 11:if(!t.Ui.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.ir(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.rr(a));case 16:e.next=39;break;case 18:if(!t.qi.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.cr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.ur(o));case 23:e.next=39;break;case 25:if(n.key!==t.Ki){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.Qi(n.newValue))){e.next=30;break}return e.abrupt("return",t.Wi(u));case 30:e.next=39;break;case 32:if(n.key!==t.Bi){e.next=37;break}s=function(e){var t=Mo.A;if(null!=e)try{var n=JSON.parse(e);_o("number"==typeof n),t=n}catch(e){ko("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Mo.A&&t.sequenceNumberHandler(s),e.next=39;break;case 37:if(n.key!==t.Gi){e.next=39;break}return e.abrupt("return",t.syncEngine.ar());case 39:e.next=42;break;case 41:t.$i.push(n);case 42:case"end":return e.stop()}}),e)}))))}}},{key:"Yi",get:function(){return this.Mi.get(this.xi)}},{key:"ji",value:function(){this.setItem(this.Fi,this.Yi.Di())}},{key:"Hi",value:function(e,t,n){var r=new Yh(this.currentUser,e,t,n),i=Hh(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Di())}},{key:"Ji",value:function(e){var t=Hh(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Zi",value:function(e){var t={clientId:this.xi,onlineState:e};this.storage.setItem(this.Ki,JSON.stringify(t))}},{key:"Xi",value:function(e,t,n){var r=Qh(this.persistenceKey,e),i=new $h(e,t,n);this.setItem(r,i.Di())}},{key:"tr",value:function(){this.setItem(this.Gi,"value-not-used")}},{key:"er",value:function(e){var t=this.Li.exec(e);return t?t[1]:null}},{key:"sr",value:function(e,t){var n=this.er(e);return Jh.Si(n,t)}},{key:"ir",value:function(e,t){var n=this.Ui.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Yh.Si(new po(i),r,t)}},{key:"cr",value:function(e,t){var n=this.qi.exec(e),r=Number(n[1]);return $h.Si(r,t)}},{key:"Qi",value:function(e){return Xh.Si(e)}},{key:"rr",value:function(){var e=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.hr(t.batchId,t.state,t.error));case 2:go("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ur",value:function(e){return this.syncEngine.lr(e.targetId,e.state,e.error)}},{key:"nr",value:function(e,t){var n=this,r=t?this.Mi.insert(e,t):this.Mi.remove(e),i=this.zi(this.Mi),a=this.zi(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.dr(o,u).then((function(){n.Mi=r}))}},{key:"Wi",value:function(e){this.Mi.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"zi",value:function(e){var t=dc();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"Vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),td=function(){function e(){te(this,e),this._r=new Zh,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return re(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this._r.Ci(e),this.wr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.wr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this._r.Ni(e)}},{key:"isLocalQueryTarget",value:function(e){return this._r.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.wr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this._r.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this._r.activeTargetIds.has(e)}},{key:"start",value:function(){return this._r=new Zh,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),nd=function(){function e(){te(this,e)}return re(e,[{key:"mr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),rd=function(){function e(){var t=this;te(this,e),this.gr=function(){return t.yr()},this.pr=function(){return t.Ir()},this.Er=[],this.Tr()}return re(e,[{key:"mr",value:function(e){this.Er.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}},{key:"Tr",value:function(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}},{key:"yr",value:function(){go("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=pe(this.Er);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Ir",value:function(){go("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=pe(this.Er);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"Vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),id={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},ad=function(){function e(t){te(this,e),this.Ar=t.Ar,this.Rr=t.Rr}return re(e,[{key:"Pr",value:function(e){this.br=e}},{key:"vr",value:function(e){this.Vr=e}},{key:"onMessage",value:function(e){this.Sr=e}},{key:"close",value:function(){this.Rr()}},{key:"send",value:function(e){this.Ar(e)}},{key:"Dr",value:function(){this.br()}},{key:"Cr",value:function(e){this.Vr(e)}},{key:"Nr",value:function(e){this.Sr(e)}}]),e}(),od=function(e){ie(n,e);var t=le(n);function n(e){var r;return te(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return re(n,[{key:"Br",value:function(e,t,n,r){return new Promise((function(i,a){var o=new fo;o.listenOnce(oo.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case ao.NO_ERROR:var t=o.getResponseJson();go("Connection","XHR received:",JSON.stringify(t)),i(t);break;case ao.TIMEOUT:go("Connection",'RPC "'+e+'" timed out'),a(new To(Eo.DEADLINE_EXCEEDED,"Request time out"));break;case ao.HTTP_ERROR:var n=o.getStatus();if(go("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Eo).indexOf(t)>=0?t:Eo.UNKNOWN}(r.status);a(new To(u,r.message))}else a(new To(Eo.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new To(Eo.UNAVAILABLE,"Connection failed."));break;default:xo()}}finally{go("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"Ur",value:function(e,t,n){var r=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=ro(),a=io(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new co({})),this.Fr(o.initMessageHeaders,t,n),Ne()||Pe()||Ce().indexOf("Electron/")>=0||Re()||Ce().indexOf("MSAppHost/")>=0||Oe()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");go("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new ad({Ar:function(e){l?go("Connection","Not sending because WebChannel is closed:",e):(c||(go("Connection","Opening WebChannel transport."),s.open(),c=!0),go("Connection","WebChannel sending:",e),s.send(e))},Rr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,lo.EventType.OPEN,(function(){l||go("Connection","WebChannel transport opened.")})),h(s,lo.EventType.CLOSE,(function(){l||(l=!0,go("Connection","WebChannel transport closed"),f.Cr())})),h(s,lo.EventType.ERROR,(function(e){l||(l=!0,wo("Connection","WebChannel transport errored:",e),f.Cr(new To(Eo.UNAVAILABLE,"The operation could not be completed")))})),h(s,lo.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];_o(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){go("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Gs[e];if(void 0!==t)return Xs(t)}(a),u=i.message;void 0===o&&(o=Eo.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.Cr(new To(o,u)),s.close()}else go("Connection","WebChannel received:",n),f.Nr(n)}})),h(a,uo.STAT_EVENT,(function(e){e.stat===so.PROXY?go("Connection","Detected buffering proxy"):e.stat===so.NOPROXY&&go("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Dr()}),0),f}}]),n}(function(){function e(t){te(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.kr=n+"://"+t.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return re(e,[{key:"Mr",value:function(e,t,n,r,i){var a=this.$r(e,t);go("RestConnection","Sending: ",a,n);var o={};return this.Fr(o,r,i),this.Br(e,a,o,n).then((function(e){return go("RestConnection","Received: ",e),e}),(function(t){throw wo("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"Lr",value:function(e,t,n,r,i){return this.Mr(e,t,n,r,i)}},{key:"Fr",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+vo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"$r",value:function(e,t){var n=id[e];return"".concat(this.kr,"/v1/").concat(t,":").concat(n)}}]),e}());function ud(){return"undefined"!=typeof window?window:null}function sd(){return"undefined"!=typeof document?document:null}function cd(e){return new Ec(e,!0)}var ld=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;te(this,e),this.Sn=t,this.timerId=n,this.qr=r,this.Kr=i,this.Gr=a,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}return re(e,[{key:"reset",value:function(){this.jr=0}},{key:"zr",value:function(){this.jr=this.Gr}},{key:"Hr",value:function(e){var t=this;this.cancel();var n=Math.floor(this.jr+this.Jr()),r=Math.max(0,Date.now()-this.Wr),i=Math.max(0,n-r);i>0&&go("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.jr," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,i,(function(){return t.Wr=Date.now(),e()})),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}},{key:"Yr",value:function(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}},{key:"cancel",value:function(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}},{key:"Jr",value:function(){return(Math.random()-.5)*this.jr}}]),e}(),fd=function(){function e(t,n,r,i,a,o,u,s){te(this,e),this.Sn=t,this.Xr=r,this.Zr=i,this.eo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new ld(t,n)}return re(e,[{key:"oo",value:function(){return 1===this.state||5===this.state||this.co()}},{key:"co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.uo()}},{key:"stop",value:function(){var e=Xe(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.oo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ao",value:function(){this.state=0,this.ro.reset()}},{key:"ho",value:function(){var e=this;this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,(function(){return e.lo()})))}},{key:"fo",value:function(e){this._o(),this.stream.send(e)}},{key:"lo",value:function(){var e=Xe(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_o",value:function(){this.so&&(this.so.cancel(),this.so=null)}},{key:"wo",value:function(){this.io&&(this.io.cancel(),this.io=null)}},{key:"close",value:function(){var e=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._o(),this.wo(),this.ro.cancel(),this.no++,4!==t?this.ro.reset():n&&n.code===Eo.RESOURCE_EXHAUSTED?(ko(n.toString()),ko("Using maximum backoff delay to prevent overloading the backend."),this.ro.zr()):n&&n.code===Eo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.mo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.vr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"mo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.yo(this.no),n=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=me(t,2),i=r[0],a=r[1];e.no===n&&e.po(i,a)}),(function(n){t((function(){var t=new To(Eo.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Io(t)}))}))}},{key:"po",value:function(e,t){var n=this,r=this.yo(this.no);this.stream=this.Eo(e,t),this.stream.Pr((function(){r((function(){return n.state=2,n.io=n.Sn.enqueueAfterDelay(n.Zr,1e4,(function(){return n.co()&&(n.state=3),Promise.resolve()})),n.listener.Pr()}))})),this.stream.vr((function(e){r((function(){return n.Io(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"uo",value:function(){var e=this;this.state=5,this.ro.Hr(Xe(et().mark((function t(){return et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Io",value:function(e){return go("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"yo",value:function(e){var t=this;return function(n){t.Sn.enqueueAndForget((function(){return t.no===e?n():(go("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),hd=function(e){ie(n,e);var t=le(n);function n(e,r,i,a,o,u){var s;return te(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).O=o,s}return re(n,[{key:"Eo",value:function(e,t){return this.eo.Ur("Listen",e,t)}},{key:"onMessage",value:function(e){this.ro.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:xo()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(_o(void 0===t||"string"==typeof t),Xo.fromBase64String(t||"")):(_o(void 0===t||t instanceof Uint8Array),Xo.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Eo.UNKNOWN:Xs(e.code);return new To(t,e.message||"")}(o);n=new gc(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Rc(e,s.document.name),l=Nc(s.document.updateTime),f=new Su({mapValue:{fields:s.document.fields}}),h=Nu.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new yc(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=Rc(e,v.document),m=v.readTime?Nc(v.readTime):zo.min(),g=Nu.newNoDocument(y,m),k=v.removedTargetIds||[];n=new yc([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=Rc(e,w.document),x=w.removedTargetIds||[];n=new yc([],x,b,null)}else{if(!("filter"in t))return xo();t.filter;var _=t.filter;_.targetId;var I=_.count||0,E=new $s(I),T=_.targetId;n=new mc(T,E)}return n}(this.O,e),n=function(e){if(!("targetChange"in e))return zo.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?zo.min():t.readTime?Nc(t.readTime):zo.min()}(e);return this.listener.To(t,n)}},{key:"Ao",value:function(e){var t={};t.database=Mc(this.O),t.addTarget=function(e,t){var n,r=t.target;return(n=Fu(r)?{documents:zc(e,r)}:{query:Kc(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Sc(e,t.resumeToken):t.snapshotVersion.compareTo(zo.min())>0&&(n.readTime=Tc(e,t.snapshotVersion.toTimestamp())),n}(this.O,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return xo()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.O,e);n&&(t.labels=n),this.fo(t)}},{key:"Ro",value:function(e){var t={};t.database=Mc(this.O),t.removeTarget=e,this.fo(t)}}]),n}(fd),dd=function(e){ie(n,e);var t=le(n);function n(e,r,i,a,o,u){var s;return te(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).O=o,s.Po=!1,s}return re(n,[{key:"bo",get:function(){return this.Po}},{key:"start",value:function(){this.Po=!1,this.lastStreamToken=void 0,Jt(ae(n.prototype),"start",this).call(this)}},{key:"mo",value:function(){this.Po&&this.vo([])}},{key:"Eo",value:function(e,t){return this.eo.Ur("Write",e,t)}},{key:"onMessage",value:function(e){if(_o(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();var t=function(e,t){return e&&e.length>0?(_o(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Nc(e.updateTime):Nc(t);return n.isEqual(zo.min())&&(n=Nc(t)),new Ps(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Nc(e.commitTime);return this.listener.Vo(n,t)}return _o(!e.writeResults||0===e.writeResults.length),this.Po=!0,this.listener.So()}},{key:"Do",value:function(){var e={};e.database=Mc(this.O),this.fo(e)}},{key:"vo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return qc(t.O,e)}))};this.fo(n)}}]),n}(fd),pd=function(e){ie(n,e);var t=le(n);function n(e,r,i,a){var o;return te(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.eo=i,o.O=a,o.Co=!1,o}return re(n,[{key:"No",value:function(){if(this.Co)throw new To(Eo.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Mr",value:function(e,t,n){var r=this;return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=me(i,2),o=a[0],u=a[1];return r.eo.Mr(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Eo.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new To(Eo.UNKNOWN,e.toString())}))}},{key:"Lr",value:function(e,t,n){var r=this;return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=me(i,2),o=a[0],u=a[1];return r.eo.Lr(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Eo.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new To(Eo.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Co=!0}}]),n}(function(){return re((function e(){te(this,e)}))}()),vd=function(){function e(t,n){te(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}return re(e,[{key:"Mo",value:function(){var e=this;0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ko=null,e.Fo("Backend didn't respond within 10 seconds."),e.$o("Offline"),Promise.resolve()})))}},{key:"Bo",value:function(e){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.$o("Offline")))}},{key:"set",value:function(e){this.Lo(),this.xo=0,"Online"===e&&(this.Oo=!1),this.$o(e)}},{key:"$o",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"Fo",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.Oo?(ko(t),this.Oo=!1):go("OnlineStateTracker",t)}},{key:"Lo",value:function(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}]),e}(),yd=re((function e(t,n,r,i,a){var o=this;te(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=a,this.jo.mr((function(e){r.enqueueAndForget(Xe(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Sd(o),!e.t0){e.next=5;break}return go("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Xe(et().mark((function e(t){var n;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Io(t)).Ko.add(4),e.next=4,kd(n);case 4:return n.Qo.set("Unknown"),n.Ko.delete(4),e.next=8,md(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.Qo=new vd(r,i)}));function md(e){return gd.apply(this,arguments)}function gd(){return gd=Xe(et().mark((function e(t){var n,r,i;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Sd(t)){e.next=18;break}n=pe(t.Go),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),gd.apply(this,arguments)}function kd(e){return wd.apply(this,arguments)}function wd(){return wd=Xe(et().mark((function e(t){var n,r,i;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=pe(t.Go),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),wd.apply(this,arguments)}function bd(e,t){var n=Io(e);n.qo.has(t.targetId)||(n.qo.set(t.targetId,t),Td(n)?Ed(n):np(n).co()&&_d(n,t))}function xd(e,t){var n=Io(e),r=np(n);n.qo.delete(t),r.co()&&Id(n,t),0===n.qo.size&&(r.co()?r.ho():Sd(n)&&n.Qo.set("Unknown"))}function _d(e,t){e.Wo.Z(t.targetId),np(e).Ao(t)}function Id(e,t){e.Wo.Z(t),np(e).Ro(t)}function Ed(e){e.Wo=new wc({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Tt:function(t){return e.qo.get(t)||null}}),np(e).start(),e.Qo.Mo()}function Td(e){return Sd(e)&&!np(e).oo()&&e.qo.size>0}function Sd(e){return 0===Io(e).Ko.size}function Cd(e){e.Wo=void 0}function Nd(e){return Ad.apply(this,arguments)}function Ad(){return Ad=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.qo.forEach((function(e,n){_d(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Ad.apply(this,arguments)}function Od(e,t){return Pd.apply(this,arguments)}function Pd(){return Pd=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Cd(t),Td(t)?(t.Qo.Bo(n),Ed(t)):t.Qo.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Pd.apply(this,arguments)}function Rd(e,t,n){return Dd.apply(this,arguments)}function Dd(){return Dd=Xe(et().mark((function e(t,n,r){var i;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Qo.set("Online"),!(n instanceof gc&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Xe(et().mark((function e(t,n){var r,i,a,o;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=pe(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.qo.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.qo.delete(o),t.Wo.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),go("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Ld(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof yc?t.Wo.ct(n):n instanceof mc?t.Wo._t(n):t.Wo.ht(n),r.isEqual(zo.min())){e.next=29;break}return e.prev=14,e.next=17,kh(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Wo.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.qo.get(r);i&&e.qo.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.qo.get(t);if(n){e.qo.set(t,n.withResumeToken(Xo.EMPTY_BYTE_STRING,n.snapshotVersion)),Id(e,t);var r=new Wl(n.target,t,1,n.sequenceNumber);_d(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),go("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Ld(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Dd.apply(this,arguments)}function Ld(e,t,n){return Md.apply(this,arguments)}function Md(){return Md=Xe(et().mark((function e(t,n,r){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ll(n)){e.next=2;break}throw n;case 2:return t.Ko.add(1),e.next=5,kd(t);case 5:t.Qo.set("Offline"),r||(r=function(){return kh(t.localStore)}),t.asyncQueue.enqueueRetryable(Xe(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return go("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Ko.delete(1),e.next=6,md(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Md.apply(this,arguments)}function Ud(e,t){return t().catch((function(n){return Ld(e,n,t)}))}function Fd(e){return Vd.apply(this,arguments)}function Vd(){return Vd=Xe(et().mark((function e(t){var n,r,i,a;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Io(t),r=rp(n),i=n.Uo.length>0?n.Uo[n.Uo.length-1].batchId:-1;case 2:if(!jd(n)){e.next=19;break}return e.prev=3,e.next=6,xh(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Uo.length&&r.ho(),e.abrupt("break",19);case 10:i=a.batchId,qd(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Ld(n,e.t0);case 17:e.next=2;break;case 19:Bd(n)&&zd(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Vd.apply(this,arguments)}function jd(e){return Sd(e)&&e.Uo.length<10}function qd(e,t){e.Uo.push(t);var n=rp(e);n.co()&&n.bo&&n.vo(t.mutations)}function Bd(e){return Sd(e)&&!rp(e).oo()&&e.Uo.length>0}function zd(e){rp(e).start()}function Kd(e){return Wd.apply(this,arguments)}function Wd(){return Wd=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:rp(t).Do();case 1:case"end":return e.stop()}}),e)}))),Wd.apply(this,arguments)}function Gd(e){return Hd.apply(this,arguments)}function Hd(){return Hd=Xe(et().mark((function e(t){var n,r,i,a;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=rp(t),r=pe(t.Uo);try{for(r.s();!(i=r.n()).done;)a=i.value,n.vo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Hd.apply(this,arguments)}function Qd(e,t,n){return Yd.apply(this,arguments)}function Yd(){return Yd=Xe(et().mark((function e(t,n,r){var i,a;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Uo.shift(),a=zl.from(i,n,r),e.next=3,Ud(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Fd(t);case 5:case"end":return e.stop()}}),e)}))),Yd.apply(this,arguments)}function $d(e,t){return Jd.apply(this,arguments)}function Jd(){return Jd=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&rp(t).bo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Xe(et().mark((function e(t,n){var r,i;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Js(i=n.code)||i===Eo.ABORTED){e.next=7;break}return r=t.Uo.shift(),rp(t).ao(),e.next=5,Ud(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Fd(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Bd(t)&&zd(t);case 5:case"end":return e.stop()}}),e)}))),Jd.apply(this,arguments)}function Xd(e,t){return Zd.apply(this,arguments)}function Zd(){return Zd=Xe(et().mark((function e(t,n){var r,i;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Io(t)).asyncQueue.verifyOperationInProgress(),go("RemoteStore","RemoteStore received new credentials"),i=Sd(r),r.Ko.add(3),e.next=6,kd(r);case 6:return i&&r.Qo.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Ko.delete(3),e.next=12,md(r);case 12:case"end":return e.stop()}}),e)}))),Zd.apply(this,arguments)}function ep(e,t){return tp.apply(this,arguments)}function tp(){return tp=Xe(et().mark((function e(t,n){var r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Io(t),!n){e.next=7;break}return r.Ko.delete(2),e.next=5,md(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Ko.add(2),e.next=12,kd(r);case 12:r.Qo.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),tp.apply(this,arguments)}function np(e){return e.zo||(e.zo=function(e,t,n){var r=Io(e);return r.No(),new hd(t,r.eo,r.authCredentials,r.appCheckCredentials,r.O,n)}(e.datastore,e.asyncQueue,{Pr:Nd.bind(null,e),vr:Od.bind(null,e),To:Rd.bind(null,e)}),e.Go.push(function(){var t=Xe(et().mark((function t(n){return et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.zo.ao(),Td(e)?Ed(e):e.Qo.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.zo.stop();case 6:Cd(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.zo}function rp(e){return e.Ho||(e.Ho=function(e,t,n){var r=Io(e);return r.No(),new dd(t,r.eo,r.authCredentials,r.appCheckCredentials,r.O,n)}(e.datastore,e.asyncQueue,{Pr:Kd.bind(null,e),vr:$d.bind(null,e),So:Gd.bind(null,e),Vo:Qd.bind(null,e)}),e.Go.push(function(){var t=Xe(et().mark((function t(n){return et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Ho.ao(),t.next=4,Fd(e);case 4:t.next=9;break;case 6:return t.next=8,e.Ho.stop();case 8:e.Uo.length>0&&(go("RemoteStore","Stopping write stream with ".concat(e.Uo.length," pending writes")),e.Uo=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Ho}var ip=function(){function e(t,n,r,i,a){te(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new So,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return re(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new To(Eo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function ap(e,t){if(ko("AsyncQueue","".concat(t,": ").concat(e)),Ll(e))return new To(Eo.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var op=function(){function e(t){te(this,e),this.comparator=t?function(e,n){return t(e,n)||fu.comparator(e.key,n.key)}:function(e,t){return fu.comparator(e.key,t.key)},this.keyedMap=sc(),this.sortedSet=new Zs(this.comparator)}return re(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),up=function(){function e(){te(this,e),this.Jo=new Zs(fu.comparator)}return re(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Jo.get(t);n?0!==e.type&&3===n.type?this.Jo=this.Jo.insert(t,e):3===e.type&&1!==n.type?this.Jo=this.Jo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Jo=this.Jo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Jo=this.Jo.remove(t):1===e.type&&2===n.type?this.Jo=this.Jo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):xo():this.Jo=this.Jo.insert(t,e)}},{key:"Yo",value:function(){var e=[];return this.Jo.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),sp=function(){function e(t,n,r,i,a,o,u,s){te(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return re(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ls(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,op.emptySet(n),a,r,i,!0,!1)}}]),e}(),cp=re((function e(){te(this,e),this.Xo=void 0,this.listeners=[]})),lp=re((function e(){te(this,e),this.queries=new $f((function(e){return fs(e)}),ls),this.onlineState="Unknown",this.Zo=new Set}));function fp(e,t){return hp.apply(this,arguments)}function hp(){return hp=Xe(et().mark((function e(t,n){var r,i,a,o,u;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Io(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new cp),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Xo=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=ap(e.t0,"Initialization of query '".concat(hs(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.tc(r.onlineState),o.Xo&&n.ec(o.Xo)&&mp(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),hp.apply(this,arguments)}function dp(e,t){return pp.apply(this,arguments)}function pp(){return pp=Xe(et().mark((function e(t,n){var r,i,a,o,u;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Io(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),pp.apply(this,arguments)}function vp(e,t){var n,r=Io(e),i=!1,a=pe(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=pe(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.ec(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Xo=o}}}catch(f){a.e(f)}finally{a.f()}i&&mp(r)}function yp(e,t,n){var r=Io(e),i=r.queries.get(t);if(i){var a,o=pe(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function mp(e){e.Zo.forEach((function(e){e.next()}))}var gp=function(){function e(t,n,r){te(this,e),this.query=t,this.nc=n,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=r||{}}return re(e,[{key:"ec",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=pe(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new sp(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.sc?this.rc(e)&&(this.nc.next(e),a=!0):this.oc(e,this.onlineState)&&(this.cc(e),a=!0),this.ic=e,a}},{key:"onError",value:function(e){this.nc.error(e)}},{key:"tc",value:function(e){this.onlineState=e;var t=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),t=!0),t}},{key:"oc",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.uc||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"rc",value:function(e){if(e.docChanges.length>0)return!0;var t=this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"cc",value:function(e){e=sp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}]),e}(),kp=function(){function e(t,n){te(this,e),this.payload=t,this.byteLength=n}return re(e,[{key:"ac",value:function(){return"metadata"in this.payload}}]),e}(),wp=function(){function e(t){te(this,e),this.O=t}return re(e,[{key:"Gs",value:function(e){return Rc(this.O,e)}},{key:"js",value:function(e){return e.metadata.exists?Vc(this.O,e.document,!1):Nu.newNoDocument(this.Gs(e.metadata.name),this.Qs(e.metadata.readTime))}},{key:"Qs",value:function(e){return Nc(e)}}]),e}(),bp=function(){function e(t,n,r){te(this,e),this.hc=t,this.localStore=n,this.O=r,this.queries=[],this.documents=[],this.progress=xp(t)}return re(e,[{key:"lc",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"fc",value:function(e){var t,n=new Map,r=new wp(this.O),i=pe(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Gs(a.metadata.name),s=pe(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||fc()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Xe(et().mark((function e(){var t,n,r,i,a;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oh(this.localStore,new wp(this.O),this.documents,this.hc.id);case 2:t=e.sent,n=this.fc(this.documents),r=pe(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Rh(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",new lh(Object.assign({},this.progress),t)));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function xp(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var _p=re((function e(t){te(this,e),this.key=t})),Ip=re((function e(t){te(this,e),this.key=t})),Ep=function(){function e(t,n){te(this,e),this.query=t,this.dc=n,this._c=null,this.current=!1,this.wc=fc(),this.mutatedKeys=fc(),this.mc=ps(t),this.gc=new op(this.mc)}return re(e,[{key:"yc",get:function(){return this.dc}},{key:"Ic",value:function(e,t){var n=this,r=t?t.Ec:new up,i=t?t.gc:this.gc,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=ns(this.query)&&i.size===this.query.limit?i.last():null,c=rs(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=ds(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Tc(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.mc(f,s)>0||c&&n.mc(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),ns(this.query)||rs(this.query))for(;o.size>this.query.limit;){var l=ns(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{gc:o,Ec:r,ks:u,mutatedKeys:a}}},{key:"Tc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;var a=e.Ec.Yo();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xo()}};return n(e)-n(t)}(e.type,t.type)||r.mc(e.doc,t.doc)})),this.Ac(n);var o=t?this.Rc():[],u=0===this.wc.size&&this.current?1:0,s=u!==this._c;return this._c=u,0!==a.length||s?{snapshot:new sp(this.query,e.gc,i,a,e.mutatedKeys,0===u,s,!1),Pc:o}:{Pc:o}}},{key:"tc",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new up,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}},{key:"bc",value:function(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}},{key:"Ac",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.dc=t.dc.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.dc=t.dc.delete(e)})),this.current=e.current)}},{key:"Rc",value:function(){var e=this;if(!this.current)return[];var t=this.wc;this.wc=fc(),this.gc.forEach((function(t){e.bc(t.key)&&(e.wc=e.wc.add(t.key))}));var n=[];return t.forEach((function(t){e.wc.has(t)||n.push(new Ip(t))})),this.wc.forEach((function(e){t.has(e)||n.push(new _p(e))})),n}},{key:"vc",value:function(e){this.dc=e.Ks,this.wc=fc();var t=this.Ic(e.documents);return this.applyChanges(t,!0)}},{key:"Vc",value:function(){return sp.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}]),e}(),Tp=re((function e(t,n,r){te(this,e),this.query=t,this.targetId=n,this.view=r})),Sp=re((function e(t){te(this,e),this.key=t,this.Sc=!1})),Cp=function(){function e(t,n,r,i,a,o){te(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Dc={},this.Cc=new $f((function(e){return fs(e)}),ls),this.Nc=new Map,this.xc=new Set,this.kc=new Zs(fu.comparator),this.Oc=new Map,this.Mc=new Uh,this.$c={},this.Fc=new Map,this.Bc=Uf.Je(),this.onlineState="Unknown",this.Lc=void 0}return re(e,[{key:"isPrimaryClient",get:function(){return!0===this.Lc}}]),e}();function Np(e,t){return Ap.apply(this,arguments)}function Ap(){return Ap=Xe(et().mark((function e(t,n){var r,i,a,o,u,s;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=xv(t),!(o=r.Cc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Vc(),e.next=15;break;case 6:return e.next=8,_h(r.localStore,ss(n));case 8:return u=e.sent,r.isPrimaryClient&&bd(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Op(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Ap.apply(this,arguments)}function Op(e,t,n,r){return Pp.apply(this,arguments)}function Pp(){return Pp=Xe(et().mark((function e(t,n,r,i){var a,o,u,s,c,l;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Uc=function(e,n,r){return function(){var e=Xe(et().mark((function e(t,n,r,i){var a,o,u;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ic(r),e.t0=a.ks,!e.t0){e.next=6;break}return e.next=5,Th(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ic(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Xp(t,n.targetId,u.Pc),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Th(t.localStore,n,!0);case 3:return a=e.sent,o=new Ep(n,a.Ks),u=o.Ic(a.documents),s=vc.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),Xp(t,r,c.Pc),l=new Tp(n,r,o),e.abrupt("return",(t.Cc.set(n,l),t.Nc.has(r)?t.Nc.get(r).push(n):t.Nc.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),Pp.apply(this,arguments)}function Rp(e,t){return Dp.apply(this,arguments)}function Dp(){return Dp=Xe(et().mark((function e(t,n){var r,i,a;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Io(t),i=r.Cc.get(n),!((a=r.Nc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Nc.set(i.targetId,a.filter((function(e){return!ls(e,n)}))),void r.Cc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Ih(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),xd(r.remoteStore,i.targetId),$p(r,i.targetId)})).catch(Bf);case 9:e.next=14;break;case 11:return $p(r,i.targetId),e.next=14,Ih(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Dp.apply(this,arguments)}function Lp(e,t,n){return Mp.apply(this,arguments)}function Mp(){return Mp=Xe(et().mark((function e(t,n,r){var i,a,o;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_v(t),e.prev=1,e.next=4,function(e,t){var n,r=Io(e),i=Bo.now(),a=t.reduce((function(e,t){return e.add(t.key)}),fc());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Us.Es(e,a).next((function(a){n=a;var o,u=[],s=pe(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Fs(c,n.get(c.key));null!=l&&u.push(new Bs(c.key,l,Cu(l.value.mapValue),Rs.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.gs.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.$c[e.currentUser.toKey()];r||(r=new Zs(Vo)),r=r.insert(t,n),e.$c[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,tv(i,a.changes);case 9:return e.next=11,Fd(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=ap(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Mp.apply(this,arguments)}function Up(e,t){return Fp.apply(this,arguments)}function Fp(){return Fp=Xe(et().mark((function e(t,n){var r,i;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Io(t),e.prev=1,e.next=4,wh(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Oc.get(t);n&&(_o(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Sc=!0:e.modifiedDocuments.size>0?_o(n.Sc):e.removedDocuments.size>0&&(_o(n.Sc),n.Sc=!1))})),e.next=8,tv(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Bf(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Fp.apply(this,arguments)}function Vp(e,t,n){var r=Io(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Cc.forEach((function(e,n){var r=n.view.tc(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Io(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=pe(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.tc(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&mp(n)}(r.eventManager,t),i.length&&r.Dc.To(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function jp(e,t,n){return qp.apply(this,arguments)}function qp(){return qp=Xe(et().mark((function e(t,n,r){var i,a,o,u,s,c;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Io(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Oc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Zs(fu.comparator)).insert(o,Nu.newNoDocument(o,zo.min())),s=fc().add(o),c=new pc(zo.min(),new Map,new nc(Vo),u,s),e.next=9,Up(i,c);case 9:i.kc=i.kc.remove(o),i.Oc.delete(n),ev(i),e.next=16;break;case 14:return e.next=16,Ih(i.localStore,n,!1).then((function(){return $p(i,n,r)})).catch(Bf);case 16:case"end":return e.stop()}}),e)}))),qp.apply(this,arguments)}function Bp(e,t){return zp.apply(this,arguments)}function zp(){return zp=Xe(et().mark((function e(t,n){var r,i,a;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Io(t),i=n.batch.batchId,e.prev=1,e.next=4,gh(r.localStore,n);case 4:return a=e.sent,Yp(r,i,null),Qp(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,tv(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Bf(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),zp.apply(this,arguments)}function Kp(e,t,n){return Wp.apply(this,arguments)}function Wp(){return Wp=Xe(et().mark((function e(t,n,r){var i,a;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Io(t),e.prev=1,e.next=4,function(e,t){var n=Io(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.gs.lookupMutationBatch(e,t).next((function(t){return _o(null!==t),r=t.keys(),n.gs.removeMutationBatch(e,t)})).next((function(){return n.gs.performConsistencyCheck(e)})).next((function(){return n.Us.Es(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Yp(i,n,r),Qp(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,tv(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Bf(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Wp.apply(this,arguments)}function Gp(e,t){return Hp.apply(this,arguments)}function Hp(){return Hp=Xe(et().mark((function e(t,n){var r,i,a,o;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sd((r=Io(t)).remoteStore)||go("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Io(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.gs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Fc.get(i)||[]).push(n),r.Fc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=ap(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Hp.apply(this,arguments)}function Qp(e,t){(e.Fc.get(t)||[]).forEach((function(e){e.resolve()})),e.Fc.delete(t)}function Yp(e,t,n){var r=Io(e),i=r.$c[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.$c[r.currentUser.toKey()]=i}}function $p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=pe(e.Nc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Cc.delete(a),n&&e.Dc.qc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Nc.delete(t),e.isPrimaryClient&&e.Mc.si(t).forEach((function(t){e.Mc.containsKey(t)||Jp(e,t)}))}function Jp(e,t){e.xc.delete(t.path.canonicalString());var n=e.kc.get(t);null!==n&&(xd(e.remoteStore,n),e.kc=e.kc.remove(t),e.Oc.delete(n),ev(e))}function Xp(e,t,n){var r,i=pe(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof _p?(e.Mc.addReference(a.key,t),Zp(e,a)):a instanceof Ip?(go("SyncEngine","Document no longer in limbo: "+a.key),e.Mc.removeReference(a.key,t),e.Mc.containsKey(a.key)||Jp(e,a.key)):xo()}}catch(o){i.e(o)}finally{i.f()}}function Zp(e,t){var n=t.key,r=n.path.canonicalString();e.kc.get(n)||e.xc.has(r)||(go("SyncEngine","New document in limbo: "+n),e.xc.add(r),ev(e))}function ev(e){for(;e.xc.size>0&&e.kc.size<e.maxConcurrentLimboResolutions;){var t=e.xc.values().next().value;e.xc.delete(t);var n=new fu(Qo.fromString(t)),r=e.Bc.next();e.Oc.set(r,new Sp(n)),e.kc=e.kc.insert(n,r),bd(e.remoteStore,new Wl(ss(ts(n.path)),r,2,Mo.A))}}function tv(e,t,n){return nv.apply(this,arguments)}function nv(){return nv=Xe(et().mark((function e(t,n,r){var i,a,o,u;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Io(t),a=[],o=[],u=[],e.t0=i.Cc.isEmpty(),e.t0){e.next=9;break}return i.Cc.forEach((function(e,t){u.push(i.Uc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=hh.Ss(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Dc.To(a),e.next=9,function(){var e=Xe(et().mark((function e(t,n){var r,i,a,o,u,s,c,l;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Io(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Al.forEach(n,(function(t){return Al.forEach(t.vs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Al.forEach(t.Vs,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Ll(e.t0)){e.next=10;break}throw e.t0;case 10:go("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=pe(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ms.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ms=r.Ms.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),nv.apply(this,arguments)}function rv(e,t){return iv.apply(this,arguments)}function iv(){return iv=Xe(et().mark((function e(t,n){var r,i;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Io(t)).currentUser.isEqual(n)){e.next=11;break}return go("SyncEngine","User change. New user:",n.toKey()),e.next=5,yh(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Fc.forEach((function(e){e.forEach((function(e){e.reject(new To(Eo.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Fc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,tv(r,i.qs);case 11:case"end":return e.stop()}}),e)}))),iv.apply(this,arguments)}function av(e,t){var n=Io(e),r=n.Oc.get(t);if(r&&r.Sc)return fc().add(r.key);var i=fc(),a=n.Nc.get(t);if(!a)return i;var o,u=pe(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.Cc.get(s);i=i.unionWith(c.view.yc)}}catch(l){u.e(l)}finally{u.f()}return i}function ov(e,t){return uv.apply(this,arguments)}function uv(){return uv=Xe(et().mark((function e(t,n){var r,i,a;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Io(t),e.next=3,Th(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.vc(i),e.abrupt("return",(r.isPrimaryClient&&Xp(r,n.targetId,a.Pc),a));case 6:case"end":return e.stop()}}),e)}))),uv.apply(this,arguments)}function sv(e){return cv.apply(this,arguments)}function cv(){return cv=Xe(et().mark((function e(t){var n;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Io(t),e.abrupt("return",Ch(n.localStore).then((function(e){return tv(n,e)})));case 2:case"end":return e.stop()}}),e)}))),cv.apply(this,arguments)}function lv(e,t,n,r){return fv.apply(this,arguments)}function fv(){return fv=Xe(et().mark((function e(t,n,r,i){var a,o;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Io(t),e.next=3,function(e,t){var n=Io(e),r=Io(n.gs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Ge(e,t).next((function(t){return t?n.Us.Es(e,t):Al.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Fd(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Yp(a,n,i||null),Qp(a,n),function(e,t){Io(Io(e).gs).Qe(t)}(a.localStore,n)):xo();case 11:return e.next=13,tv(a,o);case 13:e.next=16;break;case 15:go("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),fv.apply(this,arguments)}function hv(e,t){return dv.apply(this,arguments)}function dv(){return dv=Xe(et().mark((function e(t,n){var r,i,a,o,u,s,c,l;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xv(r=Io(t)),_v(r),!0!==n||!0===r.Lc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,pv(r,i.toArray());case 5:return a=e.sent,r.Lc=!0,e.next=9,ep(r.remoteStore,!0);case 9:o=pe(a);try{for(o.s();!(u=o.n()).done;)s=u.value,bd(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Lc){e.next=25;break}return c=[],l=Promise.resolve(),r.Nc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return $p(r,t),Ih(r.localStore,t,!0)})),xd(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,pv(r,c);case 21:return function(e){var t=Io(e);t.Oc.forEach((function(e,n){xd(t.remoteStore,n)})),t.Mc.ii(),t.Oc=new Map,t.kc=new Zs(fu.comparator)}(r),r.Lc=!1,e.next=25,ep(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),dv.apply(this,arguments)}function pv(e,t,n){return vv.apply(this,arguments)}function vv(){return vv=Xe(et().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Io(t),a=[],o=[],u=pe(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.Nc.get(c))||0===f.length){e.next=34;break}return e.next=11,_h(i.localStore,ss(f[0]));case 11:l=e.sent,h=pe(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.Cc.get(p),e.next=20,ov(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Sh(i.localStore,c);case 36:return m=e.sent,e.next=39,_h(i.localStore,m);case 39:return l=e.sent,e.next=42,Op(i,yv(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Dc.To(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),vv.apply(this,arguments)}function yv(e){return es(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function mv(e){var t=Io(e);return Io(Io(t.localStore).persistence).ds()}function gv(e,t,n,r){return kv.apply(this,arguments)}function kv(){return kv=Xe(et().mark((function e(t,n,r,i){var a,o,u;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Io(t)).Lc){e.next=5;break}go("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!a.Nc.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,Ch(a.localStore);case 11:return o=e.sent,u=pc.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,tv(a,o,u);case 15:return e.abrupt("break",21);case 16:return e.next=18,Ih(a.localStore,n,!0);case 18:return $p(a,n,i),e.abrupt("break",21);case 20:xo();case 21:case"end":return e.stop()}}),e)}))),kv.apply(this,arguments)}function wv(e,t,n){return bv.apply(this,arguments)}function bv(){return bv=Xe(et().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=xv(t)).Lc){e.next=45;break}a=pe(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.Nc.has(u)){e.next=10;break}return go("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Sh(i.localStore,u);case 12:return s=e.sent,e.next=15,_h(i.localStore,s);case 15:return c=e.sent,e.next=18,Op(i,yv(s),c.targetId,!1);case 18:bd(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=pe(r),e.prev=30,h=et().mark((function e(){var t;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.Nc.has(t),!e.t0){e.next=5;break}return e.next=5,Ih(i.localStore,t,!1).then((function(){xd(i.remoteStore,t),$p(i,t)})).catch(Bf);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),bv.apply(this,arguments)}function xv(e){var t=Io(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Up.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=av.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=jp.bind(null,t),t.Dc.To=vp.bind(null,t.eventManager),t.Dc.qc=yp.bind(null,t.eventManager),t}function _v(e){var t=Io(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Bp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Kp.bind(null,t),t}function Iv(e,t,n){var r=Io(e);(function(){var e=Xe(et().mark((function e(t,n,r){var i,a,o,u,s;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Io(e),r=Nc(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Kn.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)));case 10:return r._updateProgress(xp(i)),a=new bp(i,t.localStore,n.O),e.next=14,n.Kc();case 14:o=e.sent;case 15:if(!o){e.next=25;break}return e.next=18,a.lc(o);case 18:return(u=e.sent)&&r._updateProgress(u),e.next=22,n.Kc();case 22:o=e.sent;case 23:e.next=15;break;case 25:return e.next=27,a.complete();case 27:return s=e.sent,e.next=30,tv(t,s.ws,void 0);case 30:return e.next=32,function(e,t){var n=Io(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Kn.saveBundleMetadata(e,t)}))}(t.localStore,i);case 32:r._completeWith(s.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),wo("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}}),e,null,[[0,35]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var Ev=function(){function e(){te(this,e),this.synchronizeTabs=!1}return re(e,[{key:"initialize",value:function(){var e=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.O=cd(t.databaseInfo.databaseId),this.sharedClientState=this.Gc(t),this.persistence=this.jc(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.Qc(t),this.localStore=this.Wc(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){return null}},{key:"Wc",value:function(e){return vh(this.persistence,new dh,e.initialUser,this.O)}},{key:"jc",value:function(e){return new zh(Wh.bi,this.O)}},{key:"Gc",value:function(e){return new td}},{key:"terminate",value:function(){var e=Xe(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Tv=function(e){ie(n,e);var t=le(n);function n(e,r,i){var a;return te(this,n),(a=t.call(this)).zc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return re(n,[{key:"initialize",value:function(){var e=Xe(et().mark((function e(t){var r=this;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jt(ae(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,Nh(this.localStore);case 4:return e.next=6,this.zc.initialize(this,t);case 6:return e.next=8,_v(this.zc.syncEngine);case 8:return e.next=10,Fd(this.zc.remoteStore);case 10:return e.next=12,this.persistence.Hn((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Wc",value:function(e){return vh(this.persistence,new dh,e.initialUser,this.O)}},{key:"Qc",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Gf(t,e.asyncQueue)}},{key:"jc",value:function(e){var t=ch(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Nf.withCacheSize(this.cacheSizeBytes):Nf.DEFAULT;return new oh(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,ud(),sd(),this.O,this.sharedClientState,!!this.forceOwnership)}},{key:"Gc",value:function(e){return new td}}]),n}(Ev),Sv=function(e){ie(n,e);var t=le(n);function n(e,r){var i;return te(this,n),(i=t.call(this,e,r,!1)).zc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return re(n,[{key:"initialize",value:function(){var e=Xe(et().mark((function e(t){var r,i=this;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jt(ae(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.zc.syncEngine,e.t0=this.sharedClientState instanceof ed,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={hr:lv.bind(null,r),lr:gv.bind(null,r),dr:wv.bind(null,r),ds:mv.bind(null,r),ar:sv.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Hn(function(){var e=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hv(i.zc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Gc",value:function(e){var t=ud();if(!ed.Vt(t))throw new To(Eo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=ch(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ed(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Tv),Cv=function(){function e(){te(this,e)}return re(e,[{key:"initialize",value:function(){var e=Xe(et().mark((function e(t,n){var r=this;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Vp(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=rv.bind(null,this.syncEngine),e.next=12,ep(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new lp}},{key:"createDatastore",value:function(e){var t,n=cd(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new od(t));return function(e,t,n,r){return new pd(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Vp(o.syncEngine,e,0)},a=rd.Vt()?new rd:new nd,new yd(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Cp(e,t,n,r,i,a);return o&&(u.Lc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Xe(et().mark((function e(t){var n;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Io(t),go("RemoteStore","RemoteStore shutting down."),n.Ko.add(5),e.next=5,kd(n);case 5:n.jo.shutdown(),n.Qo.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Nv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Xe(et().mark((function r(){var i;return et().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Xe(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Av=function(){function e(t){te(this,e),this.observer=t,this.muted=!1}return re(e,[{key:"next",value:function(e){this.observer.next&&this.Hc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Jc",value:function(){this.muted=!0}},{key:"Hc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Ov=function(){function e(t,n){var r=this;te(this,e),this.Yc=t,this.O=n,this.metadata=new So,this.buffer=new Uint8Array,this.Xc=new TextDecoder("utf-8"),this.Zc().then((function(e){e&&e.ac()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return re(e,[{key:"close",value:function(){return this.Yc.cancel()}},{key:"getMetadata",value:function(){var e=Xe(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Kc",value:function(){var e=Xe(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Zc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(){var e=Xe(et().mark((function e(){var t,n,r,i;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tu();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Xc.decode(t),r=Number(n),isNaN(r)&&this.eu("length string (".concat(n,") is not valid number")),e.next=9,this.nu(r);case 9:return i=e.sent,e.abrupt("return",new kp(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"su",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"tu",value:function(){var e=Xe(et().mark((function e(){var t,n;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.su()<0)){e.next=7;break}return e.next=3,this.iu();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.su())<0&&this.eu("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nu",value:function(){var e=Xe(et().mark((function e(t){var n;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.iu();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.eu("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Xc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"eu",value:function(e){throw this.Yc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"iu",value:function(){var e=Xe(et().mark((function e(){var t,n;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Yc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Pv=function(){function e(t){te(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return re(e,[{key:"lookup",value:function(){var e=Xe(et().mark((function e(t){var n,r=this;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new To(Eo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Xe(et().mark((function e(t,n){var r,i,a,o,u,s;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Io(t),i=Mc(r.O)+"/documents",a={documents:n.map((function(e){return Pc(r.O,e)}))},e.next=5,r.Lr("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=jc(r.O,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());_o(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Qs(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Xe(et().mark((function e(){var t,n=this;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=fu.fromPath(t);n.mutations.push(new Ys(r,n.precondition(r)))})),e.next=7,function(){var e=Xe(et().mark((function e(t,n){var r,i,a;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Io(t),i=Mc(r.O)+"/documents",a={writes:n.map((function(e){return qc(r.O,e)}))},e.next=3,r.Mr("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw xo();t=zo.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new To(Eo.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Rs.updateTime(t):Rs.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(zo.min()))throw new To(Eo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rs.updateTime(t)}return Rs.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Rv=function(){function e(t,n,r,i){te(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.ru=5,this.ro=new ld(this.asyncQueue,"transaction_retry")}return re(e,[{key:"run",value:function(){this.ru-=1,this.ou()}},{key:"ou",value:function(){var e=this;this.ro.Hr(Xe(et().mark((function t(){var n,r;return et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Pv(e.datastore),(r=e.cu(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.uu(t)}))}))})).catch((function(t){e.uu(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"cu",value:function(e){try{var t=this.updateFunction(e);return!su(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"uu",value:function(e){var t=this;this.ru>0&&this.au(e)?(this.ru-=1,this.asyncQueue.enqueueAndForget((function(){return t.ou(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"au",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Js(t)}return!1}}]),e}(),Dv=function(){function e(t,n,r,i){var a=this;te(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=po.UNAUTHENTICATED,this.clientId=Fo.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return go("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return go("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return re(e,[{key:"getConfiguration",value:function(){var e=Xe(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new To(Eo.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new So;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Xe(et().mark((function n(){var r;return et().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=ap(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Lv(e,t){return Mv.apply(this,arguments)}function Mv(){return Mv=Xe(et().mark((function e(t,n){var r,i;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),go("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,yh(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Mv.apply(this,arguments)}function Uv(e,t){return Fv.apply(this,arguments)}function Fv(){return Fv=Xe(et().mark((function e(t,n){var r,i;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Vv(t);case 3:return r=e.sent,go("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Xd(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Xd(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Fv.apply(this,arguments)}function Vv(e){return jv.apply(this,arguments)}function jv(){return jv=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return go("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Lv(t,new Ev);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),jv.apply(this,arguments)}function qv(e){return Bv.apply(this,arguments)}function Bv(){return Bv=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return go("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Uv(t,new Cv);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Bv.apply(this,arguments)}function zv(e){return Vv(e).then((function(e){return e.persistence}))}function Kv(e){return Vv(e).then((function(e){return e.localStore}))}function Wv(e){return qv(e).then((function(e){return e.remoteStore}))}function Gv(e){return qv(e).then((function(e){return e.syncEngine}))}function Hv(e){return Qv.apply(this,arguments)}function Qv(){return Qv=Xe(et().mark((function e(t){var n,r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qv(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Np.bind(null,n.syncEngine),r.onUnlisten=Rp.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),Qv.apply(this,arguments)}function Yv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new So;return e.asyncQueue.enqueueAndForget(Xe(et().mark((function i(){return et().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Av({next:function(a){t.enqueueAndForget((function(){return dp(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new To(Eo.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new To(Eo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new gp(ts(n.path),a,{includeMetadataChanges:!0,uc:!0});return fp(e,o)},i.next=3,Hv(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function $v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new So;return e.asyncQueue.enqueueAndForget(Xe(et().mark((function i(){return et().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Av({next:function(n){t.enqueueAndForget((function(){return dp(e,o)})),n.fromCache&&"server"===r.source?i.reject(new To(Eo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new gp(n,a,{includeMetadataChanges:!0,uc:!0});return fp(e,o)},i.next=3,Hv(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Jv=new Map;function Xv(e,t,n){if(!n)throw new To(Eo.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Zv(e,t,n,r){if(!0===t&&!0===r)throw new To(Eo.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function ey(e){if(!fu.isDocumentKey(e))throw new To(Eo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ty(e){if(fu.isDocumentKey(e))throw new To(Eo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ny(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":xo()}function ry(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new To(Eo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ny(e);throw new To(Eo.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function iy(e,t){if(t<=0)throw new To(Eo.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var ay=function(){function e(t){var n;if(te(this,e),void 0===t.host){if(void 0!==t.ssl)throw new To(Eo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new To(Eo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Zv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return re(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),oy=function(){function e(t,n,r){te(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ay({}),this._settingsFrozen=!1,t instanceof uu?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new To(Eo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uu(e.options.projectId)}(t))}return re(e,[{key:"app",get:function(){if(!this._app)throw new To(Eo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new To(Eo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ay(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new No;switch(e.type){case"gapi":var t=e.client;return _o(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Ro(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new To(Eo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Jv.get(e);t&&(go("ComponentProvider","Removing Datastore"),Jv.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function uy(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=ry(e,oy))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&wo("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=po.MOCK_USER;else{o=Se(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new To(Eo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new po(s)}e._authCredentials=new Ao(new Co(o,u))}}var sy=function(){function e(t,n,r){te(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return re(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new ly(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),cy=function(){function e(t,n,r){te(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return re(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),ly=function(e){ie(n,e);var t=le(n);function n(e,r,i){var a;return te(this,n),(a=t.call(this,e,r,ts(i)))._path=i,a.type="collection",a}return re(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new sy(this.firestore,null,new fu(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(cy);function fy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Qe(e),Xv("collection","path",t),e instanceof oy){var a=Qo.fromString.apply(Qo,[t].concat(r));return ty(a),new ly(e,null,a)}if(!(e instanceof sy||e instanceof ly))throw new To(Eo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Qo.fromString.apply(Qo,[t].concat(r)));return ty(o),new ly(e.firestore,null,o)}function hy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Qe(e),1===arguments.length&&(t=Fo.R()),Xv("doc","path",t),e instanceof oy){var a=Qo.fromString.apply(Qo,[t].concat(r));return ey(a),new sy(e,null,new fu(a))}if(!(e instanceof sy||e instanceof ly))throw new To(Eo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Qo.fromString.apply(Qo,[t].concat(r)));return ey(o),new sy(e.firestore,e instanceof ly?e.converter:null,new fu(o))}function dy(e,t){return e=Qe(e),t=Qe(t),(e instanceof sy||e instanceof ly)&&(t instanceof sy||t instanceof ly)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function py(e,t){return e=Qe(e),t=Qe(t),e instanceof cy&&t instanceof cy&&e.firestore===t.firestore&&ls(e._query,t._query)&&e.converter===t.converter}var vy=function(){function e(){var t=this;te(this,e),this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new ld(this,"async_queue_retry"),this.yu=function(){var e=sd();e&&go("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ro.Yr()};var n=sd();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.yu)}return re(e,[{key:"isShuttingDown",get:function(){return this.fu}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.pu(),this.Iu(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.fu){this.fu=!0,this.mu=e||!1;var t=sd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.yu)}}},{key:"enqueue",value:function(e){var t=this;if(this.pu(),this.fu)return new Promise((function(){}));var n=new So;return this.Iu((function(){return t.fu&&t.mu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.lu.push(e),t.Eu()}))}},{key:"Eu",value:function(){var e=Xe(et().mark((function e(){var t=this;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.lu.length){e.next=14;break}return e.prev=1,e.next=4,this.lu[0]();case 4:this.lu.shift(),this.ro.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Ll(e.t0)){e.next=12;break}throw e.t0;case 12:go("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.lu.length>0&&this.ro.Hr((function(){return t.Eu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Iu",value:function(e){var t=this,n=this.hu.then((function(){return t.wu=!0,e().catch((function(e){t._u=e,t.wu=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ko("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.wu=!1,e}))}));return this.hu=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.pu(),this.gu.indexOf(e)>-1&&(t=0);var i=ip.createAndSchedule(this,e,t,n,(function(e){return r.Tu(e)}));return this.du.push(i),i}},{key:"pu",value:function(){this._u&&xo()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Au",value:function(){var e=Xe(et().mark((function e(){var t;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.hu,e.next=3,t;case 3:if(t!==this.hu){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ru",value:function(e){var t,n=pe(this.du);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Pu",value:function(e){var t=this;return this.Au().then((function(){t.du.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=pe(t.du);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Au()}))}},{key:"bu",value:function(e){this.gu.push(e)}},{key:"Tu",value:function(e){var t=this.du.indexOf(e);this.du.splice(t,1)}}]),e}();function yy(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=pe(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var my=function(){function e(){te(this,e),this._progressObserver={},this._taskCompletionResolver=new So,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return re(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),gy=function(e){ie(n,e);var t=le(n);function n(e,r,i){var a;return te(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new vy,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return re(n,[{key:"_terminate",value:function(){return this._firestoreClient||wy(this),this._firestoreClient.terminate()}}]),n}(oy);function ky(e){return e._firestoreClient||wy(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function wy(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new ou(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Dv(e._authCredentials,e._appCheckCredentials,e._queue,r)}function by(e,t,n){var r=new So;return e.asyncQueue.enqueue(Xe(et().mark((function i(){return et().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Lv(e,n);case 3:return i.next=5,Uv(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Eo.FAILED_PRECONDITION||e.code===Eo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function xy(e){return function(e){return e.asyncQueue.enqueue(Xe(et().mark((function t(){var n,r;return et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,zv(e);case 2:return n=t.sent,t.next=5,Wv(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Io(e);return t.Ko.delete(0),md(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(ky(e=ry(e,gy)))}function _y(e){return function(e){return e.asyncQueue.enqueue(Xe(et().mark((function t(){var n,r;return et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,zv(e);case 2:return n=t.sent,t.next=5,Wv(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Xe(et().mark((function e(t){var n;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Io(t)).Ko.add(0),e.next=4,kd(n);case 4:n.Qo.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(ky(e=ry(e,gy)))}function Iy(e,t){var n=ky(e=ry(e,gy)),r=new my;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Ov(e,t)}(function(e,t){if(e instanceof Uint8Array)return Nv(e,t);if(e instanceof ArrayBuffer)return Nv(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,cd(t));e.asyncQueue.enqueueAndForget(Xe(et().mark((function t(){return et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Iv,t.next=3,Gv(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function Ey(e,t){return function(e,t){return e.asyncQueue.enqueue(Xe(et().mark((function n(){return et().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Io(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Kn.getNamedQuery(e,t)}))},n.next=3,Kv(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(ky(e=ry(e,gy)),t).then((function(t){return t?new cy(e,null,t.query):null}))}function Ty(e){if(e._initialized||e._terminated)throw new To(Eo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Sy=function(){function e(){te(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new To(Eo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $o(n)}return re(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Cy=function(){function e(t){te(this,e),this._byteString=t}return re(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Xo.fromBase64String(t))}catch(t){throw new To(Eo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Xo.fromUint8Array(t))}}]),e}(),Ny=re((function e(t){te(this,e),this._methodName=t})),Ay=function(){function e(t,n){if(te(this,e),!isFinite(t)||t<-90||t>90)throw new To(Eo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new To(Eo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return re(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Vo(this._lat,e._lat)||Vo(this._long,e._long)}}]),e}(),Oy=/^__.*__$/,Py=function(){function e(t,n,r){te(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return re(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Bs(e,this.data,this.fieldMask,t,this.fieldTransforms):new qs(e,this.data,t,this.fieldTransforms)}}]),e}(),Ry=function(){function e(t,n,r){te(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return re(e,[{key:"toMutation",value:function(e,t){return new Bs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Dy(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xo()}}var Ly=function(){function e(t,n,r,i,a,o){te(this,e),this.settings=t,this.databaseId=n,this.O=r,this.ignoreUndefinedProperties=i,void 0===a&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return re(e,[{key:"path",get:function(){return this.settings.path}},{key:"Vu",get:function(){return this.settings.Vu}},{key:"Su",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Du",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Su({path:n,Cu:!1});return r.Nu(e),r}},{key:"xu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Su({path:n,Cu:!1});return r.vu(),r}},{key:"ku",value:function(e){return this.Su({path:void 0,Cu:!0})}},{key:"Ou",value:function(e){return tm(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"vu",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}},{key:"Nu",value:function(e){if(0===e.length)throw this.Ou("Document fields must not be empty");if(Dy(this.Vu)&&Oy.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}]),e}(),My=function(){function e(t,n,r){te(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.O=r||cd(t)}return re(e,[{key:"Fu",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Ly({Vu:e,methodName:t,$u:n,path:$o.emptyPath(),Cu:!1,Mu:r},this.databaseId,this.O,this.ignoreUndefinedProperties)}}]),e}();function Uy(e){var t=e._freezeSettings(),n=cd(e._databaseId);return new My(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Fy(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.Fu(a.merge||a.mergeFields?2:0,t,n,i);Jy("Data must be an object, but it was:",o,r);var u,s,c=Yy(r,o);if(a.merge)u=new Jo(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=pe(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=Xy(t,d,n);if(!o.contains(p))throw new To(Eo.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));nm(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new Jo(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new Py(new Su(c),u,s)}var Vy=function(e){ie(n,e);var t=le(n);function n(){return te(this,n),t.apply(this,arguments)}return re(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Vu)throw 1===e.Vu?e.Ou("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Ou("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Ny);function jy(e,t,n){return new Ly({Vu:3,$u:t.settings.$u,methodName:e._methodName,Cu:n},t.databaseId,t.O,t.ignoreUndefinedProperties)}var qy=function(e){ie(n,e);var t=le(n);function n(){return te(this,n),t.apply(this,arguments)}return re(n,[{key:"_toFieldTransform",value:function(e){return new Os(e.path,new _s)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Ny),By=function(e){ie(n,e);var t=le(n);function n(e,r){var i;return te(this,n),(i=t.call(this,e)).Bu=r,i}return re(n,[{key:"_toFieldTransform",value:function(e){var t=jy(this,e,!0),n=this.Bu.map((function(e){return Qy(e,t)})),r=new Is(n);return new Os(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ny),zy=function(e){ie(n,e);var t=le(n);function n(e,r){var i;return te(this,n),(i=t.call(this,e)).Bu=r,i}return re(n,[{key:"_toFieldTransform",value:function(e){var t=jy(this,e,!0),n=this.Bu.map((function(e){return Qy(e,t)})),r=new Ts(n);return new Os(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ny),Ky=function(e){ie(n,e);var t=le(n);function n(e,r){var i;return te(this,n),(i=t.call(this,e)).Lu=r,i}return re(n,[{key:"_toFieldTransform",value:function(e){var t=new Cs(e.O,gs(e.O,this.Lu));return new Os(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ny);function Wy(e,t,n,r){var i=e.Fu(1,t,n);Jy("Data must be an object, but it was:",i,r);var a=[],o=Su.empty();Wo(r,(function(e,r){var u=em(t,e,n);r=Qe(r);var s=i.xu(u);if(r instanceof Vy)a.push(u);else{var c=Qy(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Jo(a);return new Ry(o,u,i.fieldTransforms)}function Gy(e,t,n,r,i,a){var o=e.Fu(1,t,n),u=[Xy(t,r,n)],s=[i];if(a.length%2!=0)throw new To(Eo.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(Xy(t,a[c])),s.push(a[c+1]);for(var l=[],f=Su.empty(),h=u.length-1;h>=0;--h)if(!nm(l,u[h])){var d=u[h],p=s[h];p=Qe(p);var v=o.xu(d);if(p instanceof Vy)l.push(d);else{var y=Qy(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Jo(l);return new Ry(f,m,o.fieldTransforms)}function Hy(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Qy(n,e.Fu(r?4:3,t))}function Qy(e,t){if($y(e=Qe(e)))return Jy("Unsupported field value:",t,e),Yy(e,t);if(e instanceof Ny)return function(e,t){if(!Dy(t.Vu))throw t.Ou("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Ou("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Cu&&4!==t.Vu)throw t.Ou("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=pe(e);try{for(a.s();!(n=a.n()).done;){var o=Qy(n.value,t.ku(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Qe(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return gs(t.O,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Bo.fromDate(e);return{timestampValue:Tc(t.O,n)}}if(e instanceof Bo){var r=new Bo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Tc(t.O,r)}}if(e instanceof Ay)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Cy)return{bytesValue:Sc(t.O,e._byteString)};if(e instanceof sy){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Ou("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Ac(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Ou("Unsupported field value: ".concat(ny(e)))}(e,t)}function Yy(e,t){var n={};return Go(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Wo(e,(function(e,r){var i=Qy(r,t.Du(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function $y(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Bo||e instanceof Ay||e instanceof Cy||e instanceof sy||e instanceof Ny)}function Jy(e,t,n){if(!$y(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=ny(n);throw"an object"===r?t.Ou(e+" a custom object"):t.Ou(e+" "+r)}}function Xy(e,t,n){if((t=Qe(t))instanceof Sy)return t._internalPath;if("string"==typeof t)return em(e,t);throw tm("Field path arguments must be of type string or ",e,!1,void 0,n)}var Zy=new RegExp("[~\\*/\\[\\]]");function em(e,t,n){if(t.search(Zy)>=0)throw tm("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return ge(Sy,$e(t.split(".")))._internalPath}catch(r){throw tm("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function tm(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new To(Eo.INVALID_ARGUMENT,u+e+s)}function nm(e,t){return e.some((function(e){return e.isEqual(t)}))}var rm=function(){function e(t,n,r,i,a){te(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return re(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new sy(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new im(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(am("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),im=function(e){ie(n,e);var t=le(n);function n(){return te(this,n),t.apply(this,arguments)}return re(n,[{key:"data",value:function(){return Jt(ae(n.prototype),"data",this).call(this)}}]),n}(rm);function am(e,t){return"string"==typeof t?em(e,t):t instanceof Sy?t._internalPath:t._delegate._internalPath}var om=function(){function e(t,n){te(this,e),this.hasPendingWrites=t,this.fromCache=n}return re(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),um=function(e){ie(n,e);var t=le(n);function n(e,r,i,a,o,u){var s;return te(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return re(n,[{key:"exists",value:function(){return Jt(ae(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new sm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(am("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(rm),sm=function(e){ie(n,e);var t=le(n);function n(){return te(this,n),t.apply(this,arguments)}return re(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Jt(ae(n.prototype),"data",this).call(this,e)}}]),n}(um),cm=function(){function e(t,n,r,i){te(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new om(i.hasPendingWrites,i.fromCache),this.query=r}return re(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new sm(n._firestore,n._userDataWriter,r.key,r,new om(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new To(Eo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new sm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new om(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new sm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new om(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:lm(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function lm(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xo()}}function fm(e,t){return e instanceof um&&t instanceof um?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof cm&&t instanceof cm&&e._firestore===t._firestore&&py(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function hm(e){if(rs(e)&&0===e.explicitOrderBy.length)throw new To(Eo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var dm=re((function e(){te(this,e)}));function pm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var vm=function(e){ie(n,e);var t=le(n);function n(e,r,i){var a;return te(this,n),(a=t.call(this)).Uu=e,a.qu=r,a.Ku=i,a.type="where",a}return re(n,[{key:"_apply",value:function(e){var t=Uy(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new To(Eo.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Tm(o,a);var s,c=[],l=pe(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(Em(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=Em(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Tm(o,a),u=Hy(n,"where",o,"in"===a||"not-in"===a);var h=Vu.create(i,a,u);return function(e,t){if(t.S()){var n=as(e);if(null!==n&&!n.isEqual(t.field))throw new To(Eo.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=is(e);null!==r&&Sm(e,t.field,r)}var i=function(e,t){var n,r=pe(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new To(Eo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new To(Eo.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.Uu,this.qu,this.Ku);return new cy(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Zu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(dm);var ym=function(e){ie(n,e);var t=le(n);function n(e,r){var i;return te(this,n),(i=t.call(this)).Uu=e,i.Gu=r,i.type="orderBy",i}return re(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new To(Eo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new To(Eo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Yu(t,n);return function(e,t){if(null===is(e)){var n=as(e);null!==n&&Sm(e,n,t.field)}}(e,r),r}(e._query,this.Uu,this.Gu);return new cy(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Zu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(dm);var mm=function(e){ie(n,e);var t=le(n);function n(e,r,i){var a;return te(this,n),(a=t.call(this)).type=e,a.ju=r,a.Qu=i,a}return re(n,[{key:"_apply",value:function(e){return new cy(e.firestore,e.converter,cs(e._query,this.ju,this.Qu))}}]),n}(dm);var gm=function(e){ie(n,e);var t=le(n);function n(e,r,i){var a;return te(this,n),(a=t.call(this)).type=e,a.Wu=r,a.zu=i,a}return re(n,[{key:"_apply",value:function(e){var t=Im(e,this.type,this.Wu,this.zu);return new cy(e.firestore,e.converter,function(e,t){return new Zu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(dm);function km(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new gm("startAt",t,!0)}function wm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new gm("startAfter",t,!1)}var bm=function(e){ie(n,e);var t=le(n);function n(e,r,i){var a;return te(this,n),(a=t.call(this)).type=e,a.Wu=r,a.zu=i,a}return re(n,[{key:"_apply",value:function(e){var t=Im(e,this.type,this.Wu,this.zu);return new cy(e.firestore,e.converter,function(e,t){return new Zu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(dm);function xm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new bm("endBefore",t,!1)}function _m(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new bm("endAt",t,!0)}function Im(e,t,n,r){if(n[0]=Qe(n[0]),n[0]instanceof rm)return function(e,t,n,r,i){if(!r)throw new To(Eo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=pe(us(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(wu(t,r.key));else{var c=r.data.field(s.field);if(ru(c))throw new To(Eo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new To(Eo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Qu(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Uy(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new To(Eo.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new To(Eo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!os(e)&&-1!==c.indexOf("/"))throw new To(Eo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Qo.fromString(c));if(!fu.isDocumentKey(l))throw new To(Eo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new fu(l);u.push(wu(t,f))}else{var h=Hy(n,r,c);u.push(h)}}return new Qu(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Em(e,t,n){if("string"==typeof(n=Qe(n))){if(""===n)throw new To(Eo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!os(t)&&-1!==n.indexOf("/"))throw new To(Eo.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Qo.fromString(n));if(!fu.isDocumentKey(r))throw new To(Eo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return wu(e,new fu(r))}if(n instanceof sy)return wu(e,n._key);throw new To(Eo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(ny(n),"."))}function Tm(e,t){if(!Array.isArray(e)||0===e.length)throw new To(Eo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new To(Eo.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Sm(e,t,n){if(!n.isEqual(t))throw new To(Eo.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Cm=function(){function e(){te(this,e)}return re(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(du(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(nu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw xo()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Wo(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Ay(tu(e.latitude),tu(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=iu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(au(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=eu(e);return new Bo(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Qo.fromString(e);_o(el(n));var r=new uu(n.get(1),n.get(3)),i=new fu(n.popFirst(5));return r.isEqual(t)||ko("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Nm(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Am=function(e){ie(n,e);var t=le(n);function n(e){var r;return te(this,n),(r=t.call(this)).firestore=e,r}return re(n,[{key:"convertBytes",value:function(e){return new Cy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new sy(this.firestore,null,t)}}]),n}(Cm),Om=function(){function e(t,n){te(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Uy(t)}return re(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Pm(e,this._firestore),i=Nm(r.converter,t,n),a=Fy(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Rs.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Pm(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Qe(t))||t instanceof Sy?Gy(this._dataReader,"WriteBatch.update",i._key,t,n,o):Wy(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Rs.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Pm(e,this._firestore);return this._mutations=this._mutations.concat(new Qs(t._key,Rs.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new To(Eo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Pm(e,t){if((e=Qe(e)).firestore!==t)throw new To(Eo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Rm=function(e){ie(n,e);var t=le(n);function n(e){var r;return te(this,n),(r=t.call(this)).firestore=e,r}return re(n,[{key:"convertBytes",value:function(e){return new Cy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new sy(this.firestore,null,t)}}]),n}(Cm);function Dm(e){e=ry(e,sy);var t=ry(e.firestore,gy),n=ky(t),r=new Rm(t);return function(e,t){var n=new So;return e.asyncQueue.enqueueAndForget(Xe(et().mark((function r(){return et().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Xe(et().mark((function e(t,n,r){var i,a;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Io(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Us.ys(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new To(Eo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=ap(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Kv(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new um(t,r,e._key,n,new om(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Lm(e){e=ry(e,cy);var t=ry(e.firestore,gy),n=ky(t),r=new Rm(t);return function(e,t){var n=new So;return e.asyncQueue.enqueueAndForget(Xe(et().mark((function r(){return et().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Xe(et().mark((function e(t,n,r){var i,a,o,u,s;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Th(t,n,!0);case 3:i=e.sent,a=new Ep(n,i.Ks),o=a.Ic(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=ap(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Kv(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new cm(t,r,e,n)}))}function Mm(e,t,n){e=ry(e,sy);var r=ry(e.firestore,gy),i=Nm(e.converter,t,n);return jm(r,[Fy(Uy(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Rs.none())])}function Um(e,t,n){e=ry(e,sy);for(var r=ry(e.firestore,gy),i=Uy(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return jm(r,[("string"==typeof(t=Qe(t))||t instanceof Sy?Gy(i,"updateDoc",e._key,t,n,o):Wy(i,"updateDoc",e._key,t)).toMutation(e._key,Rs.exists(!0))])}function Fm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Qe(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||yy(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(yy(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof sy)l=ry(e.firestore,gy),f=ts(e._key.path),c={next:function(t){n[s]&&n[s](qm(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=ry(e,cy);l=ry(p.firestore,gy),f=p._query;var v=new Rm(l);c={next:function(e){n[s]&&n[s](new cm(l,v,p,e))},error:n[s+1],complete:n[s+2]},hm(e._query)}return function(e,t,n,r){var i=new Av(r),a=new gp(t,i,n);return e.asyncQueue.enqueueAndForget(Xe(et().mark((function t(){return et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=fp,t.next=3,Hv(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Jc(),e.asyncQueue.enqueueAndForget(Xe(et().mark((function t(){return et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=dp,t.next=3,Hv(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(ky(l),f,h,c)}function Vm(e,t){return function(e,t){var n=new Av(t);return e.asyncQueue.enqueueAndForget(Xe(et().mark((function t(){return et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Io(e).Zo.add(t),t.next()},t.next=3,Hv(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Jc(),e.asyncQueue.enqueueAndForget(Xe(et().mark((function t(){return et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Io(e).Zo.delete(t)},t.next=3,Hv(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(ky(e=ry(e,gy)),yy(t)?t:{next:t})}function jm(e,t){return function(e,t){var n=new So;return e.asyncQueue.enqueueAndForget(Xe(et().mark((function r(){return et().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Lp,r.next=3,Gv(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(ky(e),t)}function qm(e,t,n){var r=n.docs.get(t._key),i=new Rm(e);return new um(e,i,t._key,r,new om(n.hasPendingWrites,n.fromCache),t.converter)}var Bm=function(e){ie(n,e);var t=le(n);function n(e,r){var i;return te(this,n),(i=t.call(this,e,r))._firestore=e,i}return re(n,[{key:"get",value:function(e){var t=this,r=Pm(e,this._firestore),i=new Rm(this._firestore);return Jt(ae(n.prototype),"get",this).call(this,e).then((function(e){return new um(t._firestore,i,r._key,e._document,new om(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){te(this,e),this._firestore=t,this._transaction=n,this._dataReader=Uy(t)}return re(e,[{key:"get",value:function(e){var t=this,n=Pm(e,this._firestore),r=new Am(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return xo();var i=e[0];if(i.isFoundDocument())return new rm(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new rm(t._firestore,r,n._key,null,n.converter);throw xo()}))}},{key:"set",value:function(e,t,n){var r=Pm(e,this._firestore),i=Nm(r.converter,t,n),a=Fy(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Pm(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Qe(t))||t instanceof Sy?Gy(this._dataReader,"Transaction.update",i._key,t,n,o):Wy(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Pm(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function zm(e,t){return function(e,t){var n=new So;return e.asyncQueue.enqueueAndForget(Xe(et().mark((function r(){var i;return et().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return qv(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new Rv(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(ky(e=ry(e,gy)),(function(n){return t(new Bm(e,n))}))}function Km(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new By("arrayUnion",t)}function Wm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new zy("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){vo=e}(Dt),Et(new tt("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new gy(i,new Oo(e.getProvider("auth-internal")),new Lo(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),jt(ho,"3.4.5",e),jt(ho,"3.4.5","esm2017")}();function Gm(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new To("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Hm(){if("undefined"===typeof Uint8Array)throw new To("unimplemented","Uint8Arrays are not available in this environment.")}function Qm(){if("undefined"==typeof atob)throw new To("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Ym=function(){function e(t){te(this,e),this._delegate=t}return re(e,[{key:"toBase64",value:function(){return Qm(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Hm(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Qm(),new e(Cy.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Hm(),new e(Cy.fromUint8Array(t))}}]),e}();function $m(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=pe(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var Jm=function(){function e(){te(this,e)}return re(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Ty(e=ry(e,gy));var n=ky(e),r=e._freezeSettings(),i=new Cv;return by(n,i,new Tv(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Ty(e=ry(e,gy));var t=ky(e),n=e._freezeSettings(),r=new Cv;return by(t,r,new Sv(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new To(Eo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new So;return e._queue.enqueueAndForgetEvenWhileRestricted(Xe(et().mark((function n(){return et().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Xe(et().mark((function e(t){var n;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pl.Vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Pl.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(ch(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Xm=function(){function e(t,n,r){var i=this;te(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof uu||(this._appCompat=t)}return re(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||wo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};uy(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return xy(this._delegate)}},{key:"disableNetwork",value:function(){return _y(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Zv("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new So;return e.asyncQueue.enqueueAndForget(Xe(et().mark((function n(){return et().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Gp,n.next=3,Gv(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(ky(e=ry(e,gy)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Vm(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new To("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new hg(this,fy(this._delegate,e))}catch(t){throw ig(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new rg(this,hy(this._delegate,e))}catch(t){throw ig(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new cg(this,function(e,t){if(e=ry(e,oy),Xv("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new To(Eo.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new cy(e,null,function(e){return new Zu(Qo.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw ig(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return zm(this._delegate,(function(n){return e(new eg(t,n))}))}},{key:"batch",value:function(){var e=this;return ky(this._delegate),new tg(new Om(this._delegate,(function(t){return jm(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Iy(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Ey(this._delegate,e).then((function(e){return e?new cg(t,e):null}))}}]),e}(),Zm=function(e){ie(n,e);var t=le(n);function n(e){var r;return te(this,n),(r=t.call(this)).firestore=e,r}return re(n,[{key:"convertBytes",value:function(e){return new Ym(new Cy(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return rg.forKey(t,this.firestore,null)}}]),n}(Cm);var eg=function(){function e(t,n){te(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Zm(t)}return re(e,[{key:"get",value:function(e){var t=this,n=dg(e);return this._delegate.get(n).then((function(e){return new ug(t._firestore,new um(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=dg(e);return n?(Gm("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=dg(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=dg(e);return this._delegate.delete(t),this}}]),e}(),tg=function(){function e(t){te(this,e),this._delegate=t}return re(e,[{key:"set",value:function(e,t,n){var r=dg(e);return n?(Gm("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=dg(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=dg(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),ng=function(){function e(t,n,r){te(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return re(e,[{key:"fromFirestore",value:function(e,t){var n=new sm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new sg(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Zm(t),n),i.set(n,a)),a}}]),e}();ng.INSTANCES=new WeakMap;var rg=function(){function e(t,n){te(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Zm(t)}return re(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new hg(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new hg(this.firestore,fy(this._delegate,e))}catch(t){throw ig(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Qe(e))instanceof sy&&dy(this._delegate,e)}},{key:"set",value:function(e,t){t=Gm("DocumentReference.set",t);try{return t?Mm(this._delegate,e,t):Mm(this._delegate,e)}catch(n){throw ig(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Um(this._delegate,e):Um.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw ig(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return jm(ry(e.firestore,gy),[new Qs(e._key,Rs.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ag(n),a=og(n,(function(t){return new ug(e.firestore,new um(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Fm(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Dm(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=ry(e,sy);var t=ry(e.firestore,gy);return Yv(ky(t),e._key,{source:"server"}).then((function(n){return qm(t,e,n)}))}(this._delegate):function(e){e=ry(e,sy);var t=ry(e.firestore,gy);return Yv(ky(t),e._key).then((function(n){return qm(t,e,n)}))}(this._delegate),t.then((function(e){return new ug(n.firestore,new um(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(ng.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new To("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new sy(n._delegate,r,new fu(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new sy(n._delegate,r,t))}}]),e}();function ig(e,t,n){return e.message=e.message.replace(t,n),e}function ag(e){var t,n=pe(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!$m(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function og(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=$m(e[0])?e[0]:$m(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var ug=function(){function e(t,n){te(this,e),this._firestore=t,this._delegate=n}return re(e,[{key:"ref",get:function(){return new rg(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return fm(this._delegate,e._delegate)}}]),e}(),sg=function(e){ie(n,e);var t=le(n);function n(){return te(this,n),t.apply(this,arguments)}return re(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||xo()}(void 0!==t),t}}]),n}(ug),cg=function(){function e(t,n){te(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Zm(t)}return re(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,pm(this._delegate,function(e,t,n){var r=t,i=am("where",e);return new vm(i,r,n)}(t,n,r)))}catch(i){throw ig(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,pm(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=am("orderBy",e);return new ym(n,t)}(t,n)))}catch(r){throw ig(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,pm(this._delegate,function(e){return iy("limit",e),new mm("limit",e,"F")}(t)))}catch(n){throw ig(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,pm(this._delegate,function(e){return iy("limitToLast",e),new mm("limitToLast",e,"L")}(t)))}catch(n){throw ig(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,pm(this._delegate,km.apply(void 0,arguments)))}catch(t){throw ig(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,pm(this._delegate,wm.apply(void 0,arguments)))}catch(t){throw ig(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,pm(this._delegate,xm.apply(void 0,arguments)))}catch(t){throw ig(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,pm(this._delegate,_m.apply(void 0,arguments)))}catch(t){throw ig(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return py(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Lm(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=ry(e,cy);var t=ry(e.firestore,gy),n=ky(t),r=new Rm(t);return $v(n,e._query,{source:"server"}).then((function(n){return new cm(t,r,e,n)}))}(this._delegate):function(e){e=ry(e,cy);var t=ry(e.firestore,gy),n=ky(t),r=new Rm(t);return hm(e._query),$v(n,e._query).then((function(n){return new cm(t,r,e,n)}))}(this._delegate),t.then((function(e){return new fg(n.firestore,new cm(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ag(n),a=og(n,(function(t){return new fg(e.firestore,new cm(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Fm(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(ng.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),lg=function(){function e(t,n){te(this,e),this._firestore=t,this._delegate=n}return re(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new sg(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),fg=function(){function e(t,n){te(this,e),this._firestore=t,this._delegate=n}return re(e,[{key:"query",get:function(){return new cg(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new sg(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new lg(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new sg(n._firestore,r))}))}},{key:"isEqual",value:function(e){return fm(this._delegate,e._delegate)}}]),e}(),hg=function(e){ie(n,e);var t=le(n);function n(e,r){var i;return te(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return re(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new rg(this.firestore,e):null}},{key:"doc",value:function(e){try{return new rg(this.firestore,void 0===e?hy(this._delegate):hy(this._delegate,e))}catch(t){throw ig(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=ry(e.firestore,gy),r=hy(e),i=Nm(e.converter,t);return jm(n,[Fy(Uy(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Rs.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new rg(t.firestore,e)}))}},{key:"isEqual",value:function(e){return dy(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(ng.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(cg);function dg(e){return ry(e,sy)}var pg,vg=function(){function e(){te(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=ge(Sy,n)}return re(e,[{key:"isEqual",value:function(e){return(e=Qe(e))instanceof Sy&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e($o.keyField().canonicalString())}}]),e}(),yg=function(){function e(t){te(this,e),this._delegate=t}return re(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new qy("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Vy("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Km.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=Wm.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Ky("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),mg={Firestore:Xm,GeoPoint:Ay,Timestamp:Bo,Blob:Ym,Transaction:eg,WriteBatch:tg,DocumentReference:rg,DocumentSnapshot:ug,Query:cg,QueryDocumentSnapshot:sg,QuerySnapshot:fg,CollectionReference:hg,FieldPath:vg,FieldValue:yg,setLogLevel:function(e){!function(e){yo.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new tt("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},mg)))})(pg=Yt,(function(e,t){return new Xm(e,t,new Jm)})),pg.registerVersion("@firebase/firestore-compat","0.1.14");function gg(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var kg;Object.create;var wg="facebook.com",bg="github.com",xg="google.com",_g="password",Ig="twitter.com",Eg="EMAIL_SIGNIN",Tg="PASSWORD_RESET",Sg="RECOVER_EMAIL",Cg="REVERT_SECOND_FACTOR_ADDITION",Ng="VERIFY_AND_CHANGE_EMAIL",Ag="VERIFY_EMAIL";function Og(){return fe({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Pg=function(){var e;return fe(e={},"admin-restricted-operation","This operation is restricted to administrators only."),fe(e,"argument-error",""),fe(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),fe(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),fe(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),fe(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),fe(e,"cordova-not-ready","Cordova framework is not ready."),fe(e,"cors-unsupported","This browser is not supported."),fe(e,"credential-already-in-use","This credential is already associated with a different user account."),fe(e,"custom-token-mismatch","The custom token corresponds to a different audience."),fe(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),fe(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),fe(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),fe(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),fe(e,"email-already-in-use","The email address is already in use by another account."),fe(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),fe(e,"expired-action-code","The action code has expired."),fe(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),fe(e,"internal-error","An internal AuthError has occurred."),fe(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),fe(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),fe(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),fe(e,"invalid-auth-event","An internal AuthError has occurred."),fe(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),fe(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),fe(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),fe(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),fe(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),fe(e,"invalid-email","The email address is badly formatted."),fe(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),fe(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),fe(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),fe(e,"invalid-credential","The supplied auth credential is malformed or has expired."),fe(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),fe(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),fe(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),fe(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),fe(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),fe(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),fe(e,"wrong-password","The password is invalid or the user does not have a password."),fe(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),fe(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),fe(e,"invalid-provider-id","The specified provider ID is invalid."),fe(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),fe(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),fe(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),fe(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),fe(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),fe(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),fe(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),fe(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),fe(e,"missing-continue-uri","A continue URL must be provided in the request."),fe(e,"missing-iframe-start","An internal AuthError has occurred."),fe(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),fe(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),fe(e,"missing-multi-factor-info","No second factor identifier is provided."),fe(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),fe(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),fe(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),fe(e,"app-deleted","This instance of FirebaseApp has been deleted."),fe(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),fe(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),fe(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),fe(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),fe(e,"no-auth-event","An internal AuthError has occurred."),fe(e,"no-such-provider","User was not linked to an account with the given provider."),fe(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),fe(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),fe(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),fe(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),fe(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),fe(e,"provider-already-linked","User can only be linked to one identity for the given provider."),fe(e,"quota-exceeded","The project's quota for this operation has been exceeded."),fe(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),fe(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),fe(e,"rejected-credential","The request contains malformed or mismatching credentials."),fe(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),fe(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),fe(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),fe(e,"timeout","The operation has timed out."),fe(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),fe(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),fe(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),fe(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),fe(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),fe(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),fe(e,"unverified-email","The operation requires a verified email."),fe(e,"user-cancelled","The user did not grant your application the permissions it requested."),fe(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),fe(e,"user-disabled","The user account has been disabled by an administrator."),fe(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),fe(e,"user-signed-out",""),fe(e,"weak-password","The password must be 6 characters long or more."),fe(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),fe(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Rg=Og,Dg=new Me("auth","Firebase",Og()),Lg=new pt("@firebase/auth");function Mg(e){if(Lg.logLevel<=at.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Lg.error.apply(Lg,["Auth (".concat(Dt,"): ").concat(e)].concat(n))}}function Ug(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw qg.apply(void 0,[e].concat(n))}function Fg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return qg.apply(void 0,[e].concat(n))}function Vg(e,t,n){var r=Object.assign(Object.assign({},Rg()),fe({},t,n));return new Me("auth","Firebase",r).create(t,{appName:e.name})}function jg(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Ug(e,"argument-error"),Vg(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function qg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=$e(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat($e(o)))}return Dg.create.apply(Dg,[e].concat(n))}function Bg(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw qg.apply(void 0,[t].concat(r))}}function zg(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Mg(t),new Error(t)}function Kg(e,t){e||zg(t)}var Wg=new Map;function Gg(e){Kg(e instanceof Function,"Expected a class definition");var t=Wg.get(e);return t?(Kg(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Wg.set(e,t),t)}function Hg(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Qg(){return"http:"===Yg()||"https:"===Yg()}function Yg(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var $g=function(){function e(t,n){te(this,e),this.shortDelay=t,this.longDelay=n,Kg(n>t,"Short delay should be less than long delay!"),this.isMobile=Ne()||Pe()}return re(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Qg()||Oe()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Jg(e,t){Kg(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Xg=function(){function e(){te(this,e)}return re(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void zg("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void zg("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void zg("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Zg=(fe(kg={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),fe(kg,"MISSING_CUSTOM_TOKEN","internal-error"),fe(kg,"INVALID_IDENTIFIER","invalid-email"),fe(kg,"MISSING_CONTINUE_URI","internal-error"),fe(kg,"INVALID_PASSWORD","wrong-password"),fe(kg,"MISSING_PASSWORD","internal-error"),fe(kg,"EMAIL_EXISTS","email-already-in-use"),fe(kg,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),fe(kg,"INVALID_IDP_RESPONSE","invalid-credential"),fe(kg,"INVALID_PENDING_TOKEN","invalid-credential"),fe(kg,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),fe(kg,"MISSING_REQ_TYPE","internal-error"),fe(kg,"EMAIL_NOT_FOUND","user-not-found"),fe(kg,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),fe(kg,"EXPIRED_OOB_CODE","expired-action-code"),fe(kg,"INVALID_OOB_CODE","invalid-action-code"),fe(kg,"MISSING_OOB_CODE","internal-error"),fe(kg,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),fe(kg,"INVALID_ID_TOKEN","invalid-user-token"),fe(kg,"TOKEN_EXPIRED","user-token-expired"),fe(kg,"USER_NOT_FOUND","user-token-expired"),fe(kg,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),fe(kg,"INVALID_CODE","invalid-verification-code"),fe(kg,"INVALID_SESSION_INFO","invalid-verification-id"),fe(kg,"INVALID_TEMPORARY_PROOF","invalid-credential"),fe(kg,"MISSING_SESSION_INFO","missing-verification-id"),fe(kg,"SESSION_EXPIRED","code-expired"),fe(kg,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),fe(kg,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),fe(kg,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),fe(kg,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),fe(kg,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),fe(kg,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),fe(kg,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),fe(kg,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),fe(kg,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),fe(kg,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),fe(kg,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),kg),ek=new $g(3e4,6e4);function tk(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function nk(e,t,n,r){return rk.apply(this,arguments)}function rk(){return rk=Xe(et().mark((function e(t,n,r,i){var a,o=arguments;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",ik(t,a,Xe(et().mark((function e(){var a,o,u,s;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Be(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Xg.fetch()(sk(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),rk.apply(this,arguments)}function ik(e,t,n){return ak.apply(this,arguments)}function ak(){return ak=Xe(et().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Zg),n),e.prev=2,a=new ck(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw lk(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=me(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw lk(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=25;break}throw lk(t,"email-already-in-use",u);case 25:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=30;break}throw Vg(t,d,h);case 30:Ug(t,d);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof Le)){e.next=37;break}throw e.t0;case 37:Ug(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])}))),ak.apply(this,arguments)}function ok(e,t,n,r){return uk.apply(this,arguments)}function uk(){return uk=Xe(et().mark((function e(t,n,r,i){var a,o,u=arguments;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,nk(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Ug(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),uk.apply(this,arguments)}function sk(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Jg(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var ck=function(){function e(t){var n=this;te(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Fg(n.auth,"network-request-failed"))}),ek.get())}))}return re(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function lk(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Fg(e,t,r);return i.customData._tokenResponse=n,i}function fk(e,t){return hk.apply(this,arguments)}function hk(){return hk=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nk(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),hk.apply(this,arguments)}function dk(e,t){return pk.apply(this,arguments)}function pk(){return pk=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nk(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),pk.apply(this,arguments)}function vk(e,t){return yk.apply(this,arguments)}function yk(){return yk=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nk(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),yk.apply(this,arguments)}function mk(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function gk(){return gk=Xe(et().mark((function e(t){var n,r,i,a,o,u,s=arguments;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Qe(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Bg((a=wk(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:mk(kk(a.auth_time)),issuedAtTime:mk(kk(a.iat)),expirationTime:mk(kk(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),gk.apply(this,arguments)}function kk(e){return 1e3*Number(e)}function wk(e){var t=me(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Mg("JWT malformed, contained fewer than 3 sections"),null;try{var a=_e(r);return a?JSON.parse(a):(Mg("Failed to decode base64 JWT payload"),null)}catch(o){return Mg("Caught error parsing JWT payload as JSON",o),null}}function bk(e,t){return xk.apply(this,arguments)}function xk(){return xk=Xe(et().mark((function e(t,n){var r=arguments;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Le&&_k(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),xk.apply(this,arguments)}function _k(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Ik=function(){function e(t){te(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return re(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Xe(et().mark((function t(){return et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Xe(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ek=function(){function e(t,n){te(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return re(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=mk(this.lastLoginAt),this.creationTime=mk(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Tk(e){return Sk.apply(this,arguments)}function Sk(){return Sk=Xe(et().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,bk(t,vk(r,{idToken:i}));case 6:Bg(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Ak(o.providerUserInfo):[],s=Nk(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Ek(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Sk.apply(this,arguments)}function Ck(){return(Ck=Xe(et().mark((function e(t){var n;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Qe(t),e.next=3,Tk(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nk(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat($e(n),$e(t))}function Ak(e){return e.map((function(e){var t=e.providerId,n=gg(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Ok(e,t){return Pk.apply(this,arguments)}function Pk(){return Pk=Xe(et().mark((function e(t,n){var r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ik(t,{},Xe(et().mark((function e(){var r,i,a,o,u,s;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Be({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=sk(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Xg.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Pk.apply(this,arguments)}var Rk=function(){function e(){te(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return re(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Bg(e.idToken,"internal-error"),Bg("undefined"!==typeof e.idToken,"internal-error"),Bg("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=wk(e);return Bg(t,"internal-error"),Bg("undefined"!==typeof t.exp,"internal-error"),Bg("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Xe(et().mark((function e(t){var n,r=arguments;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Bg(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Xe(et().mark((function e(t,n){var r,i,a,o;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ok(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return zg("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Bg("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Bg("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Bg("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Dk(e,t){Bg("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Lk=function(){function e(t){te(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=gg(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ik(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?$e(a.providerData):[],this.metadata=new Ek(a.createdAt||void 0,a.lastLoginAt||void 0)}return re(e,[{key:"getIdToken",value:function(){var e=Xe(et().mark((function e(t){var n;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bk(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Bg(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return gk.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Ck.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Bg(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Bg(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Xe(et().mark((function e(t){var n,r,i=arguments;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Tk(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Xe(et().mark((function e(){var t;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,bk(this,fk(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;Bg(k&&_,t,"internal-error");var I=Rk.fromJSON(this.name,_);Bg("string"===typeof k,t,"internal-error"),Dk(f,t.name),Dk(h,t.name),Bg("boolean"===typeof w,t,"internal-error"),Bg("boolean"===typeof b,t,"internal-error"),Dk(d,t.name),Dk(p,t.name),Dk(v,t.name),Dk(y,t.name),Dk(m,t.name),Dk(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(){var t=Xe(et().mark((function t(n,r){var i,a,o,u=arguments;return et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Rk).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Tk(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Mk=function(){function e(){te(this,e),this.type="NONE",this.storage={}}return re(e,[{key:"_isAvailable",value:function(){var e=Xe(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Xe(et().mark((function e(t){var n;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Mk.type="NONE";var Uk=Mk;function Fk(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Vk=function(){function e(t,n,r){te(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Fk(this.userKey,a.apiKey,o),this.fullPersistenceKey=Fk("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return re(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Xe(et().mark((function e(){var t;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Lk._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Xe(et().mark((function e(t){var n;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Xe(et().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Gg(Uk),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Gg(Uk),u=Fk(i,n.config.apiKey,n.name),s=null,c=pe(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Lk._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function jk(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Kk(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(qk(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Gk(t))return"Blackberry";if(Hk(t))return"Webos";if(Bk(t))return"Safari";if((t.includes("chrome/")||zk(t))&&!t.includes("edge/"))return"Chrome";if(Wk(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function qk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return/firefox\//i.test(e)}function Bk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function zk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return/crios\//i.test(e)}function Kk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return/iemobile/i.test(e)}function Wk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return/android/i.test(e)}function Gk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return/blackberry/i.test(e)}function Hk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return/webos/i.test(e)}function Qk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return/iphone|ipad|ipod/i.test(e)}function Yk(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return Qk(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function $k(){return Re()&&10===document.documentMode}function Jk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return Qk(e)||Wk(e)||Hk(e)||Gk(e)||/windows phone/i.test(e)||Kk(e)}function Xk(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=jk(Ce());break;case"Worker":t="".concat(jk(Ce()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Dt,"/").concat(r)}var Zk=function(){function e(t,n){te(this,e),this.app=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tw(this),this.idTokenSubscription=new tw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Dg,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}return re(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Gg(t)),this._initializationPromise=this.queue(Xe(et().mark((function r(){var i,a;return et().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Vk.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Xe(et().mark((function e(){var t;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Xe(et().mark((function e(t){var n,r,i,a,o;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return Bg(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Xe(et().mark((function e(t){var n;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Tk(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Xe(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Xe(et().mark((function e(t){var n;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Qe(t):null)&&Bg(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Xe(et().mark((function e(t){var n=this;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&Bg(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(Xe(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Xe(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Xe(et().mark((function n(){return et().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Gg(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Me("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Xe(et().mark((function e(t,n){var r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Xe(et().mark((function e(t){var n;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Bg(n=t&&Gg(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Vk.create(this,[Gg(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Xe(et().mark((function e(t){var n,r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Xe(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Xe(et().mark((function e(t){var n=this;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Xe(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Bg(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Bg(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Xk(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Xe(et().mark((function e(){var t;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=fe({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ew(e){return Qe(e)}var tw=function(){function e(t){var n=this;te(this,e),this.auth=t,this.observer=null,this.addObserver=We((function(e){return n.observer=e}))}return re(e,[{key:"next",get:function(){return Bg(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function nw(e,t,n){var r=ew(e);Bg(r._canInitEmulator,r,"emulator-config-failed"),Bg(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=rw(t),o=function(e){var t=rw(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:iw(r.substr(a.length+1))}}var o=me(r.split(":"),2);return{host:o[0],port:iw(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function rw(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function iw(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var aw=function(){function e(t,n){te(this,e),this.providerId=t,this.signInMethod=n}return re(e,[{key:"toJSON",value:function(){return zg("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return zg("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return zg("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return zg("not implemented")}}]),e}();function ow(e,t){return uw.apply(this,arguments)}function uw(){return uw=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nk(t,"POST","/v1/accounts:resetPassword",tk(t,n)));case 1:case"end":return e.stop()}}),e)}))),uw.apply(this,arguments)}function sw(e,t){return cw.apply(this,arguments)}function cw(){return cw=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nk(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),cw.apply(this,arguments)}function lw(e,t){return fw.apply(this,arguments)}function fw(){return fw=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nk(t,"POST","/v1/accounts:update",tk(t,n)));case 1:case"end":return e.stop()}}),e)}))),fw.apply(this,arguments)}function hw(e,t){return dw.apply(this,arguments)}function dw(){return dw=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ok(t,"POST","/v1/accounts:signInWithPassword",tk(t,n)));case 1:case"end":return e.stop()}}),e)}))),dw.apply(this,arguments)}function pw(e,t){return vw.apply(this,arguments)}function vw(){return vw=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nk(t,"POST","/v1/accounts:sendOobCode",tk(t,n)));case 1:case"end":return e.stop()}}),e)}))),vw.apply(this,arguments)}function yw(e,t){return mw.apply(this,arguments)}function mw(){return mw=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pw(t,n));case 1:case"end":return e.stop()}}),e)}))),mw.apply(this,arguments)}function gw(e,t){return kw.apply(this,arguments)}function kw(){return kw=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pw(t,n));case 1:case"end":return e.stop()}}),e)}))),kw.apply(this,arguments)}function ww(e,t){return bw.apply(this,arguments)}function bw(){return bw=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pw(t,n));case 1:case"end":return e.stop()}}),e)}))),bw.apply(this,arguments)}function xw(e,t){return _w.apply(this,arguments)}function _w(){return _w=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pw(t,n));case 1:case"end":return e.stop()}}),e)}))),_w.apply(this,arguments)}function Iw(e,t){return Ew.apply(this,arguments)}function Ew(){return Ew=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ok(t,"POST","/v1/accounts:signInWithEmailLink",tk(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ew.apply(this,arguments)}function Tw(e,t){return Sw.apply(this,arguments)}function Sw(){return Sw=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ok(t,"POST","/v1/accounts:signInWithEmailLink",tk(t,n)));case 1:case"end":return e.stop()}}),e)}))),Sw.apply(this,arguments)}var Cw=function(e){ie(n,e);var t=le(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return te(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return re(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",hw(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Iw(t,{email:this._email,oobCode:this._password}));case 5:Ug(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",sw(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Tw(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Ug(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(aw);function Nw(e,t){return Aw.apply(this,arguments)}function Aw(){return Aw=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ok(t,"POST","/v1/accounts:signInWithIdp",tk(t,n)));case 1:case"end":return e.stop()}}),e)}))),Aw.apply(this,arguments)}var Ow=function(e){ie(n,e);var t=le(n);function n(){var e;return te(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return re(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Nw(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Nw(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Nw(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Be(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ug("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=gg(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(aw);function Pw(e,t){return Rw.apply(this,arguments)}function Rw(){return Rw=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nk(t,"POST","/v1/accounts:sendVerificationCode",tk(t,n)));case 1:case"end":return e.stop()}}),e)}))),Rw.apply(this,arguments)}function Dw(){return Dw=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ok(t,"POST","/v1/accounts:signInWithPhoneNumber",tk(t,n)));case 1:case"end":return e.stop()}}),e)}))),Dw.apply(this,arguments)}function Lw(){return Lw=Xe(et().mark((function e(t,n){var r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ok(t,"POST","/v1/accounts:signInWithPhoneNumber",tk(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw lk(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Lw.apply(this,arguments)}var Mw=fe({},"USER_NOT_FOUND","user-not-found");function Uw(){return Uw=Xe(et().mark((function e(t,n){var r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",ok(t,"POST","/v1/accounts:signInWithPhoneNumber",tk(t,r),Mw));case 2:case"end":return e.stop()}}),e)}))),Uw.apply(this,arguments)}var Fw=function(e){ie(n,e);var t=le(n);function n(e){var r;return te(this,n),(r=t.call(this,"phone","phone")).params=e,r}return re(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Dw.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Lw.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Uw.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(aw);var Vw=function(){function e(t){var n,r,i,a,o,u;te(this,e);var s=ze(Ke(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Bg(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return re(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=ze(Ke(e)).link,n=t?ze(Ke(t)).deep_link_id:null,r=ze(Ke(e)).deep_link_id;return(r?ze(Ke(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(ky){return null}}}]),e}();var jw=function(){function e(){te(this,e),this.providerId=e.PROVIDER_ID}return re(e,null,[{key:"credential",value:function(e,t){return Cw._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Vw.parseLink(t);return Bg(n,"argument-error"),Cw._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();jw.PROVIDER_ID="password",jw.EMAIL_PASSWORD_SIGN_IN_METHOD="password",jw.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var qw=function(){function e(t){te(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return re(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Bw=function(e){ie(n,e);var t=le(n);function n(){var e;return te(this,n),(e=t.apply(this,arguments)).scopes=[],e}return re(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return $e(this.scopes)}}]),n}(qw),zw=function(e){ie(n,e);var t=le(n);function n(){return te(this,n),t.apply(this,arguments)}return re(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Bg(e.idToken||e.accessToken,"argument-error"),Ow._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Bg("providerId"in t&&"signInMethod"in t,"argument-error"),Ow._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Bw),Kw=function(e){ie(n,e);var t=le(n);function n(){return te(this,n),t.call(this,"facebook.com")}return re(n,null,[{key:"credential",value:function(e){return Ow._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(ky){return null}}}]),n}(Bw);Kw.FACEBOOK_SIGN_IN_METHOD="facebook.com",Kw.PROVIDER_ID="facebook.com";var Ww=function(e){ie(n,e);var t=le(n);function n(){var e;return te(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return re(n,null,[{key:"credential",value:function(e,t){return Ow._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(ky){return null}}}]),n}(Bw);Ww.GOOGLE_SIGN_IN_METHOD="google.com",Ww.PROVIDER_ID="google.com";var Gw=function(e){ie(n,e);var t=le(n);function n(){return te(this,n),t.call(this,"github.com")}return re(n,null,[{key:"credential",value:function(e){return Ow._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(ky){return null}}}]),n}(Bw);Gw.GITHUB_SIGN_IN_METHOD="github.com",Gw.PROVIDER_ID="github.com";var Hw=function(e){ie(n,e);var t=le(n);function n(e,r){var i;return te(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return re(n,[{key:"_getIdTokenResponse",value:function(e){return Nw(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Nw(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Nw(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(aw),Qw=function(e){ie(n,e);var t=le(n);function n(e){return te(this,n),Bg(e.startsWith("saml."),"argument-error"),t.call(this,e)}return re(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Hw.fromJSON(e);return Bg(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Hw._create(r,n)}catch(i){return null}}}]),n}(qw),Yw=function(e){ie(n,e);var t=le(n);function n(){return te(this,n),t.call(this,"twitter.com")}return re(n,null,[{key:"credential",value:function(e,t){return Ow._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(ky){return null}}}]),n}(Bw);function $w(e,t){return Jw.apply(this,arguments)}function Jw(){return Jw=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ok(t,"POST","/v1/accounts:signUp",tk(t,n)));case 1:case"end":return e.stop()}}),e)}))),Jw.apply(this,arguments)}Yw.TWITTER_SIGN_IN_METHOD="twitter.com",Yw.PROVIDER_ID="twitter.com";var Xw=function(){function e(t){te(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return re(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Xe(et().mark((function t(n,r,i){var a,o,u,s,c=arguments;return et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Lk._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Zw(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Xe(et().mark((function t(n,r,i){var a;return et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Zw(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Zw(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function eb(){return eb=Xe(et().mark((function e(t){var n,r,i,a;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ew(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Xw({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,$w(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Xw._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),eb.apply(this,arguments)}var tb=function(e){ie(n,e);var t=le(n);function n(e,r,i,a){var o,u;return te(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(se(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return re(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Le);function nb(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw tb._fromErrorAndOperation(e,n,t,r);throw n}))}function rb(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function ib(e,t){return ab.apply(this,arguments)}function ab(){return ab=Xe(et().mark((function e(t,n){var r,i,a,o;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Qe(t),e.next=3,sb(!0,r,n);case 3:return e.t0=dk,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=rb(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),ab.apply(this,arguments)}function ob(e,t){return ub.apply(this,arguments)}function ub(){return ub=Xe(et().mark((function e(t,n){var r,i,a=arguments;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=bk,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Xw._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),ub.apply(this,arguments)}function sb(e,t,n){return cb.apply(this,arguments)}function cb(){return cb=Xe(et().mark((function e(t,n,r){var i,a;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tk(n);case 2:i=rb(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Bg(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)}))),cb.apply(this,arguments)}function lb(e,t){return fb.apply(this,arguments)}function fb(){return fb=Xe(et().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,bk(t,nb(i,a,n,t),r);case 6:return Bg((o=e.sent).idToken,i,"internal-error"),Bg(u=wk(o.idToken),i,"internal-error"),s=u.sub,Bg(t.uid===s,i,"user-mismatch"),e.abrupt("return",Xw._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Ug(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),fb.apply(this,arguments)}function hb(e,t){return db.apply(this,arguments)}function db(){return db=Xe(et().mark((function e(t,n){var r,i,a,o,u=arguments;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,nb(t,i,n);case 4:return a=e.sent,e.next=7,Xw._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),db.apply(this,arguments)}function pb(e,t){return vb.apply(this,arguments)}function vb(){return vb=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hb(ew(t),n));case 1:case"end":return e.stop()}}),e)}))),vb.apply(this,arguments)}function yb(e,t){return mb.apply(this,arguments)}function mb(){return(mb=Xe(et().mark((function e(t,n){var r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Qe(t),e.next=3,sb(!1,r,n.providerId);case 3:return e.abrupt("return",ob(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gb(e,t){return kb.apply(this,arguments)}function kb(){return(kb=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lb(Qe(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wb(e,t){return bb.apply(this,arguments)}function bb(){return bb=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ok(t,"POST","/v1/accounts:signInWithCustomToken",tk(t,n)));case 1:case"end":return e.stop()}}),e)}))),bb.apply(this,arguments)}function xb(){return xb=Xe(et().mark((function e(t,n){var r,i,a;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ew(t),e.next=3,wb(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Xw._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),xb.apply(this,arguments)}var _b=function(){function e(t,n){te(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return re(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Ib._fromServerResponse(e,t):Ug(e,"internal-error")}}]),e}(),Ib=function(e){ie(n,e);var t=le(n);function n(e){var r;return te(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return re(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(_b);function Eb(e,t,n){var r;Bg((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Bg("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Bg(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Bg(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Tb(){return Tb=Xe(et().mark((function e(t,n,r){var i,a;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qe(t),a={requestType:"PASSWORD_RESET",email:n},r&&Eb(i,a,r),e.next=5,gw(i,a);case 5:case"end":return e.stop()}}),e)}))),Tb.apply(this,arguments)}function Sb(){return Sb=Xe(et().mark((function e(t,n,r){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ow(Qe(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),Sb.apply(this,arguments)}function Cb(){return Cb=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lw(Qe(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Cb.apply(this,arguments)}function Nb(e,t){return Ab.apply(this,arguments)}function Ab(){return Ab=Xe(et().mark((function e(t,n){var r,i,a,o;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Qe(t),e.next=3,ow(r,{oobCode:n});case 3:i=e.sent,Bg(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Bg(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Bg(i.mfaInfo,r,"internal-error");case 13:Bg(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=_b._fromServerResponse(ew(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Ab.apply(this,arguments)}function Ob(){return Ob=Xe(et().mark((function e(t,n){var r,i;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nb(Qe(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Ob.apply(this,arguments)}function Pb(e,t,n){return Rb.apply(this,arguments)}function Rb(){return Rb=Xe(et().mark((function e(t,n,r){var i,a,o;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ew(t),e.next=3,$w(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Xw._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),Rb.apply(this,arguments)}function Db(){return Db=Xe(et().mark((function e(t,n,r){var i,a;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qe(t),a={requestType:"EMAIL_SIGNIN",email:n},Bg(r.handleCodeInApp,i,"argument-error"),r&&Eb(i,a,r),e.next=6,ww(i,a);case 6:case"end":return e.stop()}}),e)}))),Db.apply(this,arguments)}function Lb(){return Lb=Xe(et().mark((function e(t,n,r){var i,a;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qe(t),Bg((a=jw.credentialWithLink(n,r||Hg()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",pb(i,a));case 4:case"end":return e.stop()}}),e)}))),Lb.apply(this,arguments)}function Mb(e,t){return Ub.apply(this,arguments)}function Ub(){return Ub=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nk(t,"POST","/v1/accounts:createAuthUri",tk(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ub.apply(this,arguments)}function Fb(){return Fb=Xe(et().mark((function e(t,n){var r,i,a,o;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Qg()?Hg():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Mb(Qe(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Fb.apply(this,arguments)}function Vb(){return(Vb=Xe(et().mark((function e(t,n){var r,i,a,o;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Qe(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Eb(r.auth,a,n),e.next=8,yw(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jb(){return(jb=Xe(et().mark((function e(t,n,r){var i,a,o,u;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qe(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Eb(i.auth,o,r),e.next=8,xw(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qb(e,t){return Bb.apply(this,arguments)}function Bb(){return Bb=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nk(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Bb.apply(this,arguments)}function zb(){return(zb=Xe(et().mark((function e(t,n){var r,i,a,o,u,s,c;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Qe(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,bk(a,qb(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kb(e,t,n){return Wb.apply(this,arguments)}function Wb(){return Wb=Xe(et().mark((function e(t,n,r){var i,a,o,u;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,bk(t,sw(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),Wb.apply(this,arguments)}var Gb=re((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};te(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Hb=function(e){ie(n,e);var t=le(n);function n(e,r,i,a){var o;return te(this,n),(o=t.call(this,e,r,i)).username=a,o}return re(n)}(Gb),Qb=function(e){ie(n,e);var t=le(n);function n(e,r){return te(this,n),t.call(this,e,"facebook.com",r)}return re(n)}(Gb),Yb=function(e){ie(n,e);var t=le(n);function n(e,r){return te(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return re(n)}(Hb),$b=function(e){ie(n,e);var t=le(n);function n(e,r){return te(this,n),t.call(this,e,"google.com",r)}return re(n)}(Gb),Jb=function(e){ie(n,e);var t=le(n);function n(e,r,i){return te(this,n),t.call(this,e,"twitter.com",r,i)}return re(n)}(Hb);function Xb(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=wk(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Gb(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Qb(a,i);case"github.com":return new Yb(a,i);case"google.com":return new $b(a,i);case"twitter.com":return new Jb(a,i,e.screenName||null);case"custom":case"anonymous":return new Gb(a,null);default:return new Gb(a,r,i)}}(n)}var Zb=function(){function e(t,n){te(this,e),this.type=t,this.credential=n}return re(e,[{key:"toJSON",value:function(){return{multiFactorSession:fe({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),ex=function(){function e(t,n,r){te(this,e),this.session=t,this.hints=n,this.signInResolver=r}return re(e,[{key:"resolveSignIn",value:function(){var e=Xe(et().mark((function e(t){var n;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=ew(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return _b._fromServerResponse(r,e)}));Bg(i.mfaPendingCredential,r,"internal-error");var o=Zb._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Xe(et().mark((function e(t){var a,u,s;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Xw._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Bg(n.user,r,"internal-error"),e.abrupt("return",Xw._forOperation(n.user,n.operationType,u));case 17:Ug(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function tx(e,t){return nk(e,"POST","/v2/accounts/mfaEnrollment:start",tk(e,t))}function nx(e,t){return nk(e,"POST","/v2/accounts/mfaEnrollment:withdraw",tk(e,t))}var rx=function(){function e(t){var n=this;te(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return _b._fromServerResponse(t.auth,e)})))}))}return re(e,[{key:"getSession",value:function(){var e=Xe(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Zb,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Xe(et().mark((function e(t,n){var r,i,a;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,bk(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Xe(et().mark((function e(t){var n,r,i;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,bk(this.user,nx(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),ix=new WeakMap;var ax="__sak",ox=function(){function e(t,n){te(this,e),this.storageRetriever=t,this.type=n}return re(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(ax,"1"),this.storage.removeItem(ax),Promise.resolve(!0)):Promise.resolve(!1)}catch(ky){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var ux=function(e){ie(n,e);var t=le(n);function n(){var e;return te(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Ce();return Bk(e)||Qk(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Jk(),e._shouldAllowMigration=!0,e}return re(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);$k()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Xe(et().mark((function e(t,r){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jt(ae(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Xe(et().mark((function e(t){var r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jt(ae(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jt(ae(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(ox);ux.type="LOCAL";var sx=ux,cx=function(e){ie(n,e);var t=le(n);function n(){return te(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return re(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(ox);cx.type="SESSION";var lx=cx;function fx(e){return Promise.all(e.map(function(){var e=Xe(et().mark((function e(t){var n;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var hx=function(){function e(t){te(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return re(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Xe(et().mark((function e(t){var n,r,i,a,o,u,s,c;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,fx(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function dx(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}hx.receivers=[];var px=function(){function e(t){te(this,e),this.target=t,this.handlers=new Set}return re(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Xe(et().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=dx("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function vx(){return window}function yx(){return"undefined"!==typeof vx().WorkerGlobalScope&&"function"===typeof vx().importScripts}function mx(){return gx.apply(this,arguments)}function gx(){return(gx=Xe(et().mark((function e(){var t;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function kx(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var wx="firebaseLocalStorageDb",bx="firebaseLocalStorage",xx="fbase_key",_x=function(){function e(t){te(this,e),this.request=t}return re(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Ix(e,t){return e.transaction([bx],t?"readwrite":"readonly").objectStore(bx)}function Ex(){var e=indexedDB.deleteDatabase(wx);return new _x(e).toPromise()}function Tx(){var e=indexedDB.open(wx,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(bx,{keyPath:xx})}catch(r){n(r)}})),e.addEventListener("success",Xe(et().mark((function n(){var r;return et().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(bx)){n.next=12;break}return r.close(),n.next=5,Ex();case 5:return n.t0=t,n.next=8,Tx();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Sx(e,t,n){return Cx.apply(this,arguments)}function Cx(){return Cx=Xe(et().mark((function e(t,n,r){var i,a;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ix(t,!0).put((fe(i={},xx,n),fe(i,"value",r),i)),e.abrupt("return",new _x(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Cx.apply(this,arguments)}function Nx(e,t){return Ax.apply(this,arguments)}function Ax(){return Ax=Xe(et().mark((function e(t,n){var r,i;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ix(t,!1).get(n),e.next=3,new _x(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Ax.apply(this,arguments)}function Ox(e,t){var n=Ix(e,!0).delete(t);return new _x(n).toPromise()}var Px=function(){function e(){te(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return re(e,[{key:"_openDb",value:function(){var e=Xe(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Tx();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Xe(et().mark((function e(t){var n,r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Xe(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yx()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Xe(et().mark((function e(){var t=this;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=hx._getInstance(yx()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Xe(et().mark((function e(n,r){var i;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Xe(et().mark((function e(){var t,n,r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mx();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new px(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&kx()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Xe(et().mark((function e(){var t;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Tx();case 5:return t=e.sent,e.next=8,Sx(t,ax,"1");case 8:return e.next=10,Ox(t,ax);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Xe(et().mark((function e(t,n){var r=this;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Xe(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Sx(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Xe(et().mark((function e(t){var n;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Nx(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Xe(et().mark((function e(t){var n=this;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Xe(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Ox(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Xe(et().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Ix(e,!1).getAll();return new _x(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=pe(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Xe(et().mark((function t(){return et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Px.type="LOCAL";var Rx=Px;function Dx(e,t){return nk(e,"POST","/v2/accounts/mfaSignIn:start",tk(e,t))}function Lx(e){return Mx.apply(this,arguments)}function Mx(){return Mx=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nk(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Mx.apply(this,arguments)}function Ux(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Fg("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Fx(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Vx=1e12,jx=function(){function e(t){te(this,e),this.auth=t,this.counter=Vx,this._widgets=new Map}return re(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new qx(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Vx;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Vx;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Xe(et().mark((function e(t){var n,r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Vx,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),qx=function(){function e(t,n,r){var i=this;te(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Bg(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return re(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Bx=Fx("rcb"),zx=new $g(3e4,6e4),Kx="https://www.google.com/recaptcha/api.js?",Wx=function(){function e(){te(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!vx().grecaptcha}return re(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Bg(Gx(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(vx().grecaptcha):new Promise((function(r,i){var a=vx().setTimeout((function(){i(Fg(e,"network-request-failed"))}),zx.get());vx()[Bx]=function(){vx().clearTimeout(a),delete vx()[Bx];var o=vx().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Fg(e,"internal-error"))},Ux("".concat(Kx,"?").concat(Be({onload:Bx,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Fg(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!vx().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function Gx(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Hx=function(){function e(){te(this,e)}return re(e,[{key:"load",value:function(){var e=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new jx(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Qx="recaptcha",Yx={theme:"light",type:"image"},$x=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Yx),r=arguments.length>2?arguments[2]:void 0;te(this,e),this.parameters=n,this.type=Qx,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ew(r),this.isInvisible="invisible"===this.parameters.size,Bg("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Bg(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Hx:new Wx,this.validateStartingState()}return re(e,[{key:"verify",value:function(){var e=Xe(et().mark((function e(){var t,n,r,i=this;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Bg(!this.parameters.sitekey,this.auth,"argument-error"),Bg(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Bg("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=vx()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Bg(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Xe(et().mark((function e(){var t,n;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Xe(et().mark((function e(){var t;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bg(Qg()&&!yx(),this.auth,"internal-error"),e.next=3,Jx();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Lx(this.auth);case 8:Bg(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Bg(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Jx(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Xx=function(){function e(t,n){te(this,e),this.verificationId=t,this.onConfirmation=n}return re(e,[{key:"confirm",value:function(e){var t=Fw._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Zx(){return Zx=Xe(et().mark((function e(t,n,r){var i,a;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ew(t),e.next=3,r_(i,n,Qe(r));case 3:return a=e.sent,e.abrupt("return",new Xx(a,(function(e){return pb(i,e)})));case 5:case"end":return e.stop()}}),e)}))),Zx.apply(this,arguments)}function e_(e,t,n){return t_.apply(this,arguments)}function t_(){return(t_=Xe(et().mark((function e(t,n,r){var i,a;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qe(t),e.next=3,sb(!1,i,"phone");case 3:return e.next=5,r_(i.auth,n,Qe(r));case 5:return a=e.sent,e.abrupt("return",new Xx(a,(function(e){return yb(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n_(){return(n_=Xe(et().mark((function e(t,n,r){var i,a;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qe(t),e.next=3,r_(i.auth,n,Qe(r));case 3:return a=e.sent,e.abrupt("return",new Xx(a,(function(e){return gb(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function r_(e,t,n){return i_.apply(this,arguments)}function i_(){return i_=Xe(et().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Bg("string"===typeof a,t,"argument-error"),Bg(r.type===Qx,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Bg("enroll"===u.type,t,"internal-error"),e.next=13,tx(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Bg("signin"===u.type,t,"internal-error"),Bg(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Dx(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Pw(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),i_.apply(this,arguments)}function a_(){return(a_=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ob(Qe(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var o_=function(){function e(t){te(this,e),this.providerId=e.PROVIDER_ID,this.auth=ew(t)}return re(e,[{key:"verifyPhoneNumber",value:function(e,t){return r_(this.auth,e,Qe(t))}}],[{key:"credential",value:function(e,t){return Fw._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Fw._fromTokenResponse(n,r):null}}]),e}();function u_(e,t){return t?Gg(t):(Bg(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}o_.PROVIDER_ID="phone",o_.PHONE_SIGN_IN_METHOD="phone";var s_=function(e){ie(n,e);var t=le(n);function n(e){var r;return te(this,n),(r=t.call(this,"custom","custom")).params=e,r}return re(n,[{key:"_getIdTokenResponse",value:function(e){return Nw(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Nw(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Nw(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(aw);function c_(e){return hb(e.auth,new s_(e),e.bypassAuthState)}function l_(e){var t=e.auth,n=e.user;return Bg(n,t,"internal-error"),lb(n,new s_(e),e.bypassAuthState)}function f_(e){return h_.apply(this,arguments)}function h_(){return h_=Xe(et().mark((function e(t){var n,r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Bg(r=t.user,n,"internal-error"),e.abrupt("return",ob(r,new s_(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),h_.apply(this,arguments)}var d_=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];te(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return re(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Xe(et().mark((function t(n,r){return et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Xe(et().mark((function e(t){var n,r,i,a,o,u,s;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return c_;case"linkViaPopup":case"linkViaRedirect":return f_;case"reauthViaPopup":case"reauthViaRedirect":return l_;default:Ug(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Kg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Kg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),p_=new $g(2e3,1e4);function v_(e,t,n){return y_.apply(this,arguments)}function y_(){return y_=Xe(et().mark((function e(t,n,r){var i,a,o;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ew(t),jg(t,n,qw),a=u_(i,r),o=new w_(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),y_.apply(this,arguments)}function m_(){return m_=Xe(et().mark((function e(t,n,r){var i,a,o;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jg((i=Qe(t)).auth,n,qw),a=u_(i.auth,r),o=new w_(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),m_.apply(this,arguments)}function g_(e,t,n){return k_.apply(this,arguments)}function k_(){return k_=Xe(et().mark((function e(t,n,r){var i,a,o;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jg((i=Qe(t)).auth,n,qw),a=u_(i.auth,r),o=new w_(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),k_.apply(this,arguments)}var w_=function(e){ie(n,e);var t=le(n);function n(e,r,i,a,o){var u;return te(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=se(u),u}return re(n,[{key:"executeNotNull",value:function(){var e=Xe(et().mark((function e(){var t;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Bg(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Xe(et().mark((function e(){var t,n=this;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Kg(1===this.filter.length,"Popup operations only handle one event"),t=dx(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Fg(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Fg(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Fg(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,p_.get())}()}}]),n}(d_);w_.currentPopupAction=null;var b_=new Map,x_=function(e){ie(n,e);var t=le(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return te(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return re(n,[{key:"execute",value:function(){var e=Xe(et().mark((function e(){var t,r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=b_.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,__(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Jt(ae(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:b_.set(this.auth._key(),t);case 21:return this.bypassAuthState||b_.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Xe(et().mark((function e(t){var r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Jt(ae(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Jt(ae(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Xe(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(d_);function __(e,t){return I_.apply(this,arguments)}function I_(){return I_=Xe(et().mark((function e(t,n){var r,i,a;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=C_(n),i=S_(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),I_.apply(this,arguments)}function E_(e,t){return T_.apply(this,arguments)}function T_(){return T_=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S_(t)._set(C_(n),"true"));case 1:case"end":return e.stop()}}),e)}))),T_.apply(this,arguments)}function S_(e){return Gg(e._redirectPersistence)}function C_(e){return Fk("pendingRedirect",e.config.apiKey,e.name)}function N_(e,t,n){return function(e,t,n){return A_.apply(this,arguments)}(e,t,n)}function A_(){return A_=Xe(et().mark((function e(t,n,r){var i,a;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ew(t),jg(t,n,qw),a=u_(i,r),e.next=5,E_(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),A_.apply(this,arguments)}function O_(e,t,n){return function(e,t,n){return P_.apply(this,arguments)}(e,t,n)}function P_(){return P_=Xe(et().mark((function e(t,n,r){var i,a,o;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jg((i=Qe(t)).auth,n,qw),a=u_(i.auth,r),e.next=5,E_(a,i.auth);case 5:return e.next=7,V_(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)}))),P_.apply(this,arguments)}function R_(e,t,n){return function(e,t,n){return D_.apply(this,arguments)}(e,t,n)}function D_(){return D_=Xe(et().mark((function e(t,n,r){var i,a,o;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jg((i=Qe(t)).auth,n,qw),a=u_(i.auth,r),e.next=5,sb(!1,i,n.providerId);case 5:return e.next=7,E_(a,i.auth);case 7:return e.next=9,V_(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)}))),D_.apply(this,arguments)}function L_(e,t){return M_.apply(this,arguments)}function M_(){return M_=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ew(t)._initializationPromise;case 2:return e.abrupt("return",U_(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),M_.apply(this,arguments)}function U_(e,t){return F_.apply(this,arguments)}function F_(){return F_=Xe(et().mark((function e(t,n){var r,i,a,o,u,s=arguments;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=ew(t),a=u_(i,n),o=new x_(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),F_.apply(this,arguments)}function V_(e){return j_.apply(this,arguments)}function j_(){return(j_=Xe(et().mark((function e(t){var n;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=dx("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q_=function(){function e(t){te(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return re(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return z_(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!z_(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Fg(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(B_(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(B_(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function B_(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function z_(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function K_(e){return W_.apply(this,arguments)}function W_(){return W_=Xe(et().mark((function e(t){var n,r=arguments;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",nk(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),W_.apply(this,arguments)}var G_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,H_=/^https?/;function Q_(){return Q_=Xe(et().mark((function e(t){var n,r,i,a,o;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,K_(t);case 4:n=e.sent,r=n.authorizedDomains,i=pe(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Y_(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Ug(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Q_.apply(this,arguments)}function Y_(e){var t=Hg(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!H_.test(r))return!1;if(G_.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var $_=new $g(3e4,6e4);function J_(){var e=vx().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=$e(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var X_=null;function Z_(e){return X_=X_||function(e){return new Promise((function(t,n){var r,i,a;function o(){J_(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){J_(),n(Fg(e,"network-request-failed"))},timeout:$_.get()})}if(null===(i=null===(r=vx().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=vx().gapi)||void 0===a?void 0:a.load)){var u=Fx("iframefcb");return vx()[u]=function(){gapi.load?o():n(Fg(e,"network-request-failed"))},Ux("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw X_=null,e}))}(e),X_}var eI=new $g(5e3,15e3),tI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rI(e){var t=e.config;Bg(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Jg(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Dt},i=nI.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Be(r).slice(1))}function iI(e){return aI.apply(this,arguments)}function aI(){return aI=Xe(et().mark((function e(t){var n,r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z_(t);case 2:return n=e.sent,Bg(r=vx().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:rI(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tI,dontclear:!0},(function(e){return new Promise(function(){var n=Xe(et().mark((function n(r,i){var a,o,u;return et().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){vx().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Fg(t,"network-request-failed"),o=vx().setTimeout((function(){i(a)}),eI.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),aI.apply(this,arguments)}var oI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uI="_blank",sI="http://localhost",cI=function(){function e(t){te(this,e),this.window=t,this.associatedEvent=null}return re(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function lI(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},oI),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Ce().toLowerCase();n&&(u=zk(c)?uI:n),qk(c)&&(t=t||sI,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=me(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Yk(c)&&"_self"!==u)return fI(t||"",u),new cI(null);var f=window.open(t||"",u,l);Bg(f,e,"popup-blocked");try{f.focus()}catch(h){}return new cI(f)}function fI(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var hI="__/auth/handler",dI="emulator/auth/handler";function pI(e,t,n,r,i,a){Bg(e.config.authDomain,e,"auth-domain-config-required"),Bg(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Dt,eventId:i};if(t instanceof qw){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=me(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof Bw){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var y=v[p];void 0===d[y]&&delete d[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(hI);return Jg(t,dI)}(e),"?").concat(Be(d).slice(1))}var vI="webStorageSupport",yI=function(){function e(){te(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lx,this._completeRedirectFn=U_}return re(e,[{key:"_openPopup",value:function(){var e=Xe(et().mark((function e(t,n,r,i){var a,o;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Kg(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=pI(t,n,r,Hg(),i),e.abrupt("return",lI(t,o,dx()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Xe(et().mark((function e(t,n,r,i){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=pI(t,n,r,Hg(),i),vx().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Kg(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Xe(et().mark((function e(t){var n,r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,iI(t);case 2:return n=e.sent,r=new q_(t),n.register("authEvent",(function(e){return Bg(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(vI,{type:vI},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Ug(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Q_.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Jk()||Bk()||Qk()}}]),e}(),mI=yI,gI=function(){function e(t){te(this,e),this.factorId=t}return re(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return zg("unexpected MultiFactorSessionType")}}}]),e}(),kI=function(e){ie(n,e);var t=le(n);function n(e){var r;return te(this,n),(r=t.call(this,"phone")).credential=e,r}return re(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return nk(e,"POST","/v2/accounts/mfaEnrollment:finalize",tk(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return nk(e,"POST","/v2/accounts/mfaSignIn:finalize",tk(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(gI),wI=function(){function e(){te(this,e)}return re(e,null,[{key:"assertion",value:function(e){return kI._fromCredential(e)}}]),e}();wI.FACTOR_ID="phone";var bI,xI="@firebase/auth",_I="0.19.9",II=function(){function e(t){te(this,e),this.auth=t,this.internalListeners=new Map}return re(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Xe(et().mark((function e(t){var n;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Bg(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function EI(){return window}bI="Browser",Et(new tt("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=r.options,a=i.apiKey,o=i.authDomain;return function(e){Bg(a&&!a.includes(":"),"invalid-api-key",{appName:e.name}),Bg(!(null===o||void 0===o?void 0:o.includes(":")),"argument-error",{appName:e.name});var t={apiKey:a,authDomain:o,clientPlatform:bI,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xk(bI)},r=new Zk(e,t);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Gg);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(r,n),r}(r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Et(new tt("auth-internal",(function(e){return function(e){return new II(e)}(ew(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),jt(xI,_I,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(bI)),jt(xI,_I,"esm2017");function TI(e,t,n){return SI.apply(this,arguments)}function SI(){return SI=Xe(et().mark((function e(t,n,r){var i,a,o,u,s;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=EI(),o=a.BuildInfo,Kg(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,RI(n.sessionId);case 4:return u=e.sent,s={},Qk()?s.ibi=o.packageName:Wk()?s.apn=o.packageName:Ug(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",pI(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),SI.apply(this,arguments)}function CI(){return CI=Xe(et().mark((function e(t){var n,r,i;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=EI(),r=n.BuildInfo,i={},Qk()?i.iosBundleId=r.packageName:Wk()?i.androidPackageName=r.packageName:Ug(t,"operation-not-supported-in-this-environment"),e.next=5,K_(t,i);case 5:case"end":return e.stop()}}),e)}))),CI.apply(this,arguments)}function NI(e){var t=EI().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function AI(e,t,n){return OI.apply(this,arguments)}function OI(){return OI=Xe(et().mark((function e(t,n,r){var i,a,o;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=EI(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Fg(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Wk()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),OI.apply(this,arguments)}function PI(e){var t,n,r,i,a,o,u,s,c,l,f=EI();Bg("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Bg("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Bg("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Bg("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Bg("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function RI(e){return DI.apply(this,arguments)}function DI(){return(DI=Xe(et().mark((function e(t){var n,r,i;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=LI(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function LI(e){if(Kg(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var MI=function(e){ie(n,e);var t=le(n);function n(){var e;return te(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return re(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Jt(ae(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Xe(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(q_);function UI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:BI(),postBody:null,tenantId:e.tenantId,error:Fg(e,"no-auth-event")}}function FI(e,t){return zI()._set(KI(e),t)}function VI(e){return jI.apply(this,arguments)}function jI(){return jI=Xe(et().mark((function e(t){var n;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zI()._get(KI(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,zI()._remove(KI(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),jI.apply(this,arguments)}function qI(e,t){var n,r,i=function(e){var t=WI(e),n=t.link?decodeURIComponent(t.link):void 0,r=WI(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return WI(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=WI(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Fg(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function BI(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function zI(){return Gg(sx)}function KI(e){return Fk("authEvent",e.config.apiKey,e.name)}function WI(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=ve(t=n)||Ye(t)||de(t)||ye();r[0];return ze(r.slice(1).join("?"))}var GI=function(){function e(){te(this,e),this._redirectPersistence=lx,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=U_}return re(e,[{key:"_initialize",value:function(){var e=Xe(et().mark((function e(t){var n,r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new MI(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Ug(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Xe(et().mark((function e(t,n,r,i){var a,o,u,s;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return PI(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),b_.clear(),e.next=10,this._originValidation(t);case 10:return o=UI(t,r,i),e.next=13,FI(t,o);case 13:return e.next=15,TI(t,o,n);case 15:return u=e.sent,e.next=18,NI(u);case 18:return s=e.sent,e.abrupt("return",AI(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return CI.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=EI(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Xe(et().mark((function n(){return et().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,VI(e);case 2:t.onEvent(QI());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Xe(et().mark((function n(r){var i,a;return et().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,VI(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=qI(i,r.url)),t.onEvent(a||QI());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");EI().handleOpenURL=function(){var e=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),HI=GI;function QI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Fg("no-auth-event")}}function YI(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function $I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return!("file:"!==YI()&&"ionic:"!==YI()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function JI(){return Re()&&11===(null===document||void 0===document?void 0:document.documentMode)}function XI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return/Edge\/\d+/.test(e)}function ZI(){try{var e=self.localStorage,t=dx();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return JI()||XI(e)}()||De()}catch(n){return eE()&&De()}return!1}function eE(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function tE(){return("http:"===YI()||"https:"===YI()||Oe()||$I())&&!(Pe()||Ae())&&ZI()&&!eE()}function nE(){return $I()&&"undefined"!==typeof document}function rE(){return iE.apply(this,arguments)}function iE(){return(iE=Xe(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(nE()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var aE={LOCAL:"local",NONE:"none",SESSION:"session"},oE=Bg,uE="persistence";function sE(e,t){oE(Object.values(aE).includes(t),e,"invalid-persistence-type"),Pe()?oE(t!==aE.SESSION,e,"unsupported-persistence-type"):Ae()?oE(t===aE.NONE,e,"unsupported-persistence-type"):eE()?oE(t===aE.NONE||t===aE.LOCAL&&De(),e,"unsupported-persistence-type"):oE(t===aE.NONE||ZI(),e,"unsupported-persistence-type")}function cE(e){return lE.apply(this,arguments)}function lE(){return lE=Xe(et().mark((function e(t){var n,r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=fE(),r=Fk(uE,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),lE.apply(this,arguments)}function fE(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var hE=Bg,dE=function(){function e(){te(this,e),this.browserResolver=Gg(mI),this.cordovaResolver=Gg(HI),this.underlyingResolver=null,this._redirectPersistence=lx,this._completeRedirectFn=U_}return re(e,[{key:"_initialize",value:function(){var e=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Xe(et().mark((function e(t,n,r,i){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Xe(et().mark((function e(t,n,r,i){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return nE()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return hE(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Xe(et().mark((function e(){var t;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,rE();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function pE(e){return e.unwrap()}function vE(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new wE(e,function(e,t){var n,r=Qe(e),i=t;return Bg(t.customData.operationType,r,"argument-error"),Bg(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ex._fromError(r,i)}(e,t));else if(r){var i=yE(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function yE(e){var t=(e instanceof Le?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Le)&&"temporaryProof"in t&&"phoneNumber"in t)return o_.credentialFromResult(e);var n,r=t.providerId;if(!r||r===_g)return null;switch(r){case xg:n=Ww;break;case wg:n=Kw;break;case bg:n=Gw;break;case Ig:n=Yw;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Hw._create(r,u):Ow._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new zw(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Le?n.credentialFromError(e):n.credentialFromResult(e)}function mE(e,t){return t.catch((function(t){throw t instanceof Le&&vE(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,yE(t)),additionalUserInfo:Xb(e),user:bE.getOrCreate(r)}}))}function gE(e,t){return kE.apply(this,arguments)}function kE(){return kE=Xe(et().mark((function e(t,n){var r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return mE(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),kE.apply(this,arguments)}var wE=function(){function e(t,n){te(this,e),this.resolver=n,this.auth=t.wrapped()}return re(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return mE(pE(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),bE=function(){function e(t){te(this,e),this._delegate=t,this.multiFactor=function(e){var t=Qe(e);return ix.has(t)||ix.set(t,rx._fromUser(t)),ix.get(t)}(t)}return re(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mE(this.auth,yb(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gE(this.auth,e_(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mE(this.auth,g_(this._delegate,t,dE)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cE(ew(this.auth));case 2:return e.abrupt("return",R_(this._delegate,t,dE));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mE(this.auth,gb(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return gE(this.auth,function(e,t,n){return n_.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return mE(this.auth,function(e,t,n){return m_.apply(this,arguments)}(this._delegate,e,dE))}},{key:"reauthenticateWithRedirect",value:function(){var e=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cE(ew(this.auth));case 2:return e.abrupt("return",O_(this._delegate,t,dE));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Vb.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ib(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Kb(Qe(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Kb(Qe(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return a_.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return zb.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return jb.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();bE.USER_MAP=new WeakMap;var xE=Bg,_E=function(){function e(t,n){if(te(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;xE(r,"invalid-api-key",{appName:t.name}),xE(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?dE:void 0;this._delegate=n.initialize({options:{persistence:EE(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Pg),this.linkUnderlyingAuth()}return re(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?bE.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){nw(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Cb.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Nb(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Sb.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Xe(et().mark((function e(t,n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mE(this._delegate,Pb(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Fb.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Vw.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Xe(et().mark((function e(){var t;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xE(tE(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,L_(this._delegate,dE);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",mE(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){ew(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=IE(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=IE(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Db.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Tb.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Xe(et().mark((function e(t){var n,r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:sE(this._delegate,t),e.t0=t,e.next=e.t0===aE.SESSION?4:e.t0===aE.LOCAL?6:e.t0===aE.NONE?11:13;break;case 4:return n=lx,e.abrupt("break",14);case 6:return e.next=8,Gg(Rx)._isAvailable();case 8:return r=e.sent,n=r?Rx:sx,e.abrupt("break",14);case 11:return n=Uk,e.abrupt("break",14);case 13:return e.abrupt("return",Ug("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return mE(this._delegate,function(e){return eb.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return mE(this._delegate,pb(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return mE(this._delegate,function(e,t){return xb.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return mE(this._delegate,function(e,t,n){return pb(Qe(e),jw.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return mE(this._delegate,function(e,t,n){return Lb.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return gE(this._delegate,function(e,t,n){return Zx.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xE(tE(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",mE(this._delegate,v_(this._delegate,t,dE)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Xe(et().mark((function e(t){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xE(tE(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,cE(this._delegate);case 3:return e.abrupt("return",N_(this._delegate,t,dE));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Ob.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function IE(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&bE.getOrCreate(e))},error:t,complete:n}}function EE(e,t){var n=function(e,t){var n=fE();if(!n)return[];var r=Fk(uE,e,t);switch(n.getItem(r)){case aE.NONE:return[Uk];case aE.LOCAL:return[Rx,lx];case aE.SESSION:return[lx];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Rx)||n.push(Rx),"undefined"!==typeof window)for(var r=0,i=[sx,lx];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Uk)||n.push(Uk),n}_E.Persistence=aE;var TE=function(){function e(){te(this,e),this.providerId="phone",this._delegate=new o_(pE(Yt.auth()))}return re(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return o_.credential(e,t)}}]),e}();TE.PHONE_SIGN_IN_METHOD=o_.PHONE_SIGN_IN_METHOD,TE.PROVIDER_ID=o_.PROVIDER_ID;var SE=Bg,CE=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yt.app();te(this,e),SE(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new $x(t,n,i.auth()),this.type=this._delegate.type}return re(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new tt("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new _E(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Eg,PASSWORD_RESET:Tg,RECOVER_EMAIL:Sg,REVERT_SECOND_FACTOR_ADDITION:Cg,VERIFY_AND_CHANGE_EMAIL:Ng,VERIFY_EMAIL:Ag}},EmailAuthProvider:jw,FacebookAuthProvider:Kw,GithubAuthProvider:Gw,GoogleAuthProvider:Ww,OAuthProvider:zw,SAMLAuthProvider:Qw,PhoneAuthProvider:TE,PhoneMultiFactorGenerator:wI,RecaptchaVerifier:CE,TwitterAuthProvider:Yw,Auth:_E,AuthCredential:aw,Error:Le}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.2.9")}(Yt);Yt.initializeApp({apiKey:"AIzaSyDiHkP0q2I1f7hrbb6Vf_OO5GWX3ifXYjY",authDomain:"crwn-db-70a8c.firebaseapp.com",projectId:"crwn-db-70a8c",storageBucket:"crwn-db-70a8c.appspot.com",messagingSenderId:"1019782539817",appId:"1:1019782539817:web:ea029306e83506a3d40a38",measurementId:"G-68QQ207W18"});var NE=Yt.auth(),AE=(Yt.firestore(),new Yt.auth.GoogleAuthProvider);AE.setCustomParameters({prompt:"select_account"});var OE,PE,RE=function(){return NE.signInWithPopup(AE)},DE=["title","titleId"];function LE(){return LE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LE.apply(this,arguments)}function ME(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function UE(e,n){var r=e.title,i=e.titleId,a=ME(e,DE);return t.createElement("svg",LE({width:"50px",height:"39px",viewBox:"0 0 50 39",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:n,"aria-labelledby":i},a),void 0===r?t.createElement("title",{id:i},"Group"):r?t.createElement("title",{id:i},r):null,OE||(OE=t.createElement("desc",null,"Created with Sketch.")),PE||(PE=t.createElement("g",{id:"WiP",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},t.createElement("g",{id:"Artboard",transform:"translate(-90.000000, -38.000000)"},t.createElement("g",{id:"Group",transform:"translate(90.000000, 38.000000)"},t.createElement("polygon",{id:"Rectangle",fill:"#808282",points:"3 14 25 26.5 47 14 40.855176 39 9.08421785 39"}),t.createElement("polygon",{id:"Triangle",fillOpacity:.262838724,fill:"#101A1A",points:"25 8 40 39 10 39"}),t.createElement("circle",{id:"Oval",fill:"#5E6363",cx:2,cy:9,r:2}),t.createElement("circle",{id:"Oval",fill:"#5E6363",cx:25,cy:2,r:2}),t.createElement("circle",{id:"Oval",fill:"#5E6363",cx:48,cy:9,r:2}))))))}var FE=t.forwardRef(UE),VE=(n.p,n(184)),jE=function(e){var t=e.currentUser;return(0,VE.jsxs)("div",{className:"header",children:[(0,VE.jsx)(ee,{className:"logo-container",to:"/",children:(0,VE.jsx)(FE,{className:"logo"})}),(0,VE.jsxs)("div",{className:"options",children:[(0,VE.jsx)(ee,{className:"option",to:"/shop",children:"SHOP"}),(0,VE.jsx)(ee,{className:"option",to:"/contact",children:"CONTACT"}),t?(0,VE.jsx)("div",{className:"option",onClick:function(){return NE.signOut()},children:"SIGN  OUT"}):(0,VE.jsx)(ee,{className:"option",to:"/signin",children:"SIGN IN"})]})]})};function qE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qE(Object(n),!0).forEach((function(t){fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zE(e,t){if(null==e)return{};var n,r,i=U(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var KE=["handleChange","label"],WE=function(e){var t=e.handleChange,n=e.label,r=zE(e,KE);return(0,VE.jsxs)("div",{className:"group",children:[(0,VE.jsx)("input",BE({className:"form-input",onChange:t},r)),n?(0,VE.jsx)("label",{className:"".concat(r.value.length?"shrink":""," form-input-label"),children:n}):null]})},GE=["children","isGoogleSignIn"],HE=function(e){var t=e.children,n=e.isGoogleSignIn,r=zE(e,GE);return(0,VE.jsx)("button",BE(BE({className:"".concat(n?"google-sign-in":""," custom-button")},r),{},{children:t}))},QE=function(e){ie(n,e);var t=le(n);function n(e){var r;return te(this,n),(r=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),r.setState({email:"",password:""})},r.handleChange=function(e){var t=e.target,n=t.value,i=t.name;r.setState(fe({},i,n))},r.state={email:"",password:""},r}return re(n,[{key:"render",value:function(){return(0,VE.jsxs)("div",{className:"sign-in",children:[(0,VE.jsx)("h2",{children:"I already have an account"}),(0,VE.jsx)("span",{children:"Sign in with your email and password"}),(0,VE.jsxs)("form",{onSubmit:this.handleSubmit,children:[(0,VE.jsx)(WE,{name:"email",type:"email",value:this.state.email,handleChange:this.handleChange,label:"email",required:!0}),(0,VE.jsx)(WE,{name:"password",type:"password",value:this.state.password,handleChange:this.handleChange,label:"password",required:!0}),(0,VE.jsxs)("div",{className:"buttons",children:[(0,VE.jsx)(HE,{type:"submit",children:"Sign in"}),(0,VE.jsxs)(HE,{onClick:RE,isGoogleSignIn:!0,children:[" ","Sign in With Google ",""]})]})]})]})}}]),n}(t.Component),YE=function(){return(0,VE.jsx)("div",{className:"sign-in-and-sign-up",children:(0,VE.jsx)(QE,{})})},$E=function(e){var n=function(n){var r=n.wrappedComponentRef,i=U(n,["wrappedComponentRef"]);return t.createElement(G,{children:function(n){return t.createElement(e,s({},i,n,{ref:r}))}})};return n.displayName="withRouter("+(e.displayName||e.name)+")",n.WrappedComponent=e,V()(n,e)}((function(e){var t=e.title,n=e.imageUrl,r=e.size,i=e.history,a=e.linkUrl,o=e.match;return(0,VE.jsxs)("div",{className:"".concat(r," menu-item"),onClick:function(){return i.push("".concat(o.url).concat(a))},children:[(0,VE.jsx)("div",{className:"background-image",style:{backgroundImage:"url(".concat(n,")")}}),(0,VE.jsxs)("div",{className:"content",children:[(0,VE.jsx)("div",{className:"title",children:t.toUpperCase()}),(0,VE.jsx)("span",{className:"subtitle",children:"SHOP NOW"})]})]})})),JE=["id"],XE=function(e){ie(n,e);var t=le(n);function n(){var e;return te(this,n),(e=t.call(this)).state={sections:[{title:"hats",imageUrl:"https://i.ibb.co/cvpntL1/hats.png",id:1,linkUrl:"shop/hats"},{title:"jackets",imageUrl:"https://i.ibb.co/px2tCc3/jackets.png",id:2,linkUrl:"shop/jackets"},{title:"sneakers",imageUrl:"https://i.ibb.co/0jqHpnp/sneakers.png",id:3,linkUrl:"shop/sneakers"},{title:"womens",imageUrl:"https://i.ibb.co/GCCdy8t/womens.png",size:"large",id:4,linkUrl:"shop/womens"},{title:"mens",imageUrl:"https://i.ibb.co/R70vBrQ/men.png",size:"large",id:5,linkUrl:"shop/mens"}]},e}return re(n,[{key:"render",value:function(){return(0,VE.jsx)("div",{className:"directory-menu",children:this.state.sections.map((function(e){var t=e.id,n=zE(e,JE);return(0,VE.jsx)($E,BE({},n),t)}))})}}]),n}(t.Component),ZE=XE,eT=function(){return(0,VE.jsxs)("div",{className:"homepage",children:[(0,VE.jsx)("h1",{children:"Welcome to my Homepage"}),(0,VE.jsx)(ZE,{})]})},tT=[{id:1,title:"Hats",routeName:"hats",items:[{id:1,name:"Brown Brim",imageUrl:"https://i.ibb.co/ZYW3VTp/brown-brim.png",price:25},{id:2,name:"Blue Beanie",imageUrl:"https://i.ibb.co/ypkgK0X/blue-beanie.png",price:18},{id:3,name:"Brown Cowboy",imageUrl:"https://i.ibb.co/QdJwgmp/brown-cowboy.png",price:35},{id:4,name:"Grey Brim",imageUrl:"https://i.ibb.co/RjBLWxB/grey-brim.png",price:25},{id:5,name:"Green Beanie",imageUrl:"https://i.ibb.co/YTjW3vF/green-beanie.png",price:18},{id:6,name:"Palm Tree Cap",imageUrl:"https://i.ibb.co/rKBDvJX/palm-tree-cap.png",price:14},{id:7,name:"Red Beanie",imageUrl:"https://i.ibb.co/bLB646Z/red-beanie.png",price:18},{id:8,name:"Wolf Cap",imageUrl:"https://i.ibb.co/1f2nWMM/wolf-cap.png",price:14},{id:9,name:"Blue Snapback",imageUrl:"https://i.ibb.co/X2VJP2W/blue-snapback.png",price:16}]},{id:2,title:"Sneakers",routeName:"sneakers",items:[{id:1,name:"Adidas NMD",imageUrl:"https://i.ibb.co/0s3pdnc/adidas-nmd.png",price:220},{id:2,name:"Adidas Yeezy",imageUrl:"https://i.ibb.co/dJbG1cT/yeezy.png",price:280},{id:3,name:"Black Converse",imageUrl:"https://i.ibb.co/bPmVXyP/black-converse.png",price:110},{id:4,name:"Nike White AirForce",imageUrl:"https://i.ibb.co/1RcFPk0/white-nike-high-tops.png",price:160},{id:5,name:"Nike Red High Tops",imageUrl:"https://i.ibb.co/QcvzydB/nikes-red.png",price:160},{id:6,name:"Nike Brown High Tops",imageUrl:"https://i.ibb.co/fMTV342/nike-brown.png",price:160},{id:7,name:"Air Jordan Limited",imageUrl:"https://i.ibb.co/w4k6Ws9/nike-funky.png",price:190},{id:8,name:"Timberlands",imageUrl:"https://i.ibb.co/Mhh6wBg/timberlands.png",price:200}]},{id:3,title:"Jackets",routeName:"jackets",items:[{id:1,name:"Black Jean Shearling",imageUrl:"https://i.ibb.co/XzcwL5s/black-shearling.png",price:125},{id:2,name:"Blue Jean Jacket",imageUrl:"https://i.ibb.co/mJS6vz0/blue-jean-jacket.png",price:90},{id:3,name:"Grey Jean Jacket",imageUrl:"https://i.ibb.co/N71k1ML/grey-jean-jacket.png",price:90},{id:4,name:"Brown Shearling",imageUrl:"https://i.ibb.co/s96FpdP/brown-shearling.png",price:165},{id:5,name:"Tan Trench",imageUrl:"https://i.ibb.co/M6hHc3F/brown-trench.png",price:185}]},{id:4,title:"Womens",routeName:"womens",items:[{id:1,name:"Blue Tanktop",imageUrl:"https://i.ibb.co/7CQVJNm/blue-tank.png",price:25},{id:2,name:"Floral Blouse",imageUrl:"https://i.ibb.co/4W2DGKm/floral-blouse.png",price:20},{id:3,name:"Floral Dress",imageUrl:"https://i.ibb.co/KV18Ysr/floral-skirt.png",price:80},{id:4,name:"Red Dots Dress",imageUrl:"https://i.ibb.co/N3BN1bh/red-polka-dot-dress.png",price:80},{id:5,name:"Striped Sweater",imageUrl:"https://i.ibb.co/KmSkMbH/striped-sweater.png",price:45},{id:6,name:"Yellow Track Suit",imageUrl:"https://i.ibb.co/v1cvwNf/yellow-track-suit.png",price:135},{id:7,name:"White Blouse",imageUrl:"https://i.ibb.co/qBcrsJg/white-vest.png",price:20}]},{id:5,title:"Mens",routeName:"mens",items:[{id:1,name:"Camo Down Vest",imageUrl:"https://i.ibb.co/xJS0T3Y/camo-vest.png",price:325},{id:2,name:"Floral T-shirt",imageUrl:"https://i.ibb.co/qMQ75QZ/floral-shirt.png",price:20},{id:3,name:"Black & White Longsleeve",imageUrl:"https://i.ibb.co/55z32tw/long-sleeve.png",price:25},{id:4,name:"Pink T-shirt",imageUrl:"https://i.ibb.co/RvwnBL8/pink-shirt.png",price:25},{id:5,name:"Jean Long Sleeve",imageUrl:"https://i.ibb.co/VpW4x5t/roll-up-jean-shirt.png",price:40},{id:6,name:"Burgundy T-shirt",imageUrl:"https://i.ibb.co/mh3VM1f/polka-dot-shirt.png",price:25}]}],nT=function(e){e.id;var t=e.name,n=e.price,r=e.imageUrl;return(0,VE.jsxs)("div",{className:"collection-item",children:[(0,VE.jsx)("div",{className:"image",style:{backgroundImage:"url(".concat(r,")")}}),(0,VE.jsxs)("div",{className:"collection-footer",children:[(0,VE.jsx)("span",{className:"name",children:t}),(0,VE.jsx)("span",{className:"price",children:n})]})]})},rT=["id"],iT=function(e){var t=e.title,n=e.items;return(0,VE.jsxs)("div",{className:"collection-preview",children:[(0,VE.jsx)("h1",{className:"title",children:t.toUpperCase()}),(0,VE.jsx)("div",{className:"preview",children:n.filter((function(e,t){return t<4})).map((function(e){var t=e.id,n=zE(e,rT);return(0,VE.jsx)(nT,BE({},n),t)}))})]})},aT=["id"],oT=function(e){ie(n,e);var t=le(n);function n(e){var r;return te(this,n),(r=t.call(this,e)).state={collections:tT},r}return re(n,[{key:"render",value:function(){var e=this.state.collections;return(0,VE.jsx)("div",{className:"shop-page",children:e.map((function(e){var t=e.id,n=zE(e,aT);return(0,VE.jsx)(iT,BE({},n),t)}))})}}]),n}(t.Component),uT=oT,sT=function(e){ie(n,e);var t=le(n);function n(){var e;return te(this,n),(e=t.call(this)).unsubscribeFromAuth=null,e.state={currentUser:null},e}return re(n,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribeFromAuth=NE.onAuthStateChanged((function(t){e.setState({currentUser:t})}))}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromAuth()}},{key:"render",value:function(){return(0,VE.jsxs)("div",{children:[(0,VE.jsx)(jE,{currentUser:this.state.currentUser}),(0,VE.jsxs)(X,{children:[(0,VE.jsx)(G,{exact:!0,path:"/",component:eT}),(0,VE.jsx)(G,{exact:!0,path:"/shop",component:uT}),(0,VE.jsx)(G,{exact:!0,path:"/signin",component:YE})]})]})}}]),n}(t.Component),cT=sT;r.render((0,VE.jsx)(Z,{children:(0,VE.jsx)(cT,{})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.d0d557f1.js.map